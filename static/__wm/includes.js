(function(global,factory){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document")}return factory(w)}}else{factory(global)}})(typeof window!=="undefined"?window:this,function(window,noGlobal){var arr=[];var slice=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var trim="".trim;var support={};var document=window.document,version="2.1.0",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return num!=null?num<0?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret},each:function(callback,args){return jQuery.each(this,callback,args)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={}}if(i===length){target=this;i--}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else{clone=src&&jQuery.isPlainObject(src)?src:{}}target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined){target[name]=copy}}}}return target};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray,isWindow:function(obj){return obj!=null&&obj===obj.window},isNumeric:function(obj){return obj-parseFloat(obj)>=0},isPlainObject:function(obj){if(jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false}try{if(obj.constructor&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}return true},isEmptyObject:function(obj){var name;for(name in obj){return false}return true},type:function(obj){if(obj==null){return obj+""}return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code);if(code){if(code.indexOf("use strict")===1){script=document.createElement("script");script.text=code;document.head.appendChild(script).parentNode.removeChild(script)}else{indirect(code)}}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray){for(;i<length;i++){value=callback.apply(obj[i],args);if(value===false){break}}}else{for(i in obj){value=callback.apply(obj[i],args);if(value===false){break}}}}else{if(isArray){for(;i<length;i++){value=callback.call(obj[i],i,obj[i]);if(value===false){break}}}else{for(i in obj){value=callback.call(obj[i],i,obj[i]);if(value===false){break}}}}return obj},trim:function(text){return text==null?"":trim.call(text)},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArraylike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr)}else{push.call(ret,arr)}}return ret},inArray:function(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i)},merge:function(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j]}first.length=i;return first},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i])}}return matches},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}return concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn)){return undefined}args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},now:Date.now,support:support});jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);if(type==="function"||jQuery.isWindow(obj)){return false}if(obj.nodeType===1&&length){return true}return type==="array"||length===0||typeof length==="number"&&length>0&&length-1 in obj}var Sizzle=function(window){var i,support,Expr,getText,isXML,compile,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true}return 0},strundefined=typeof undefined,MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){var i=0,len=this.length;for(;i<len;i++){if(this[i]===elem){return i}}return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:([*^$|!~]?=)"+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){var j=target.length,i=0;while(target[j++]=els[i++]){}target.length=j-1}}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context)}context=context||document;results=results||[];if(!selector||typeof selector!=="string"){return results}if((nodeType=context.nodeType)!==1&&nodeType!==9){return[]}if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector)){if(m=match[1]){if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results}}else{return results}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results}}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){nid=old=expando;newContext=context;newSelector=nodeType===9&&selector;if(nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if(old=context.getAttribute("id")){nid=old.replace(rescape,"\\$&")}else{context.setAttribute("id",nid)}nid="[id='"+nid+"'] ";i=groups.length;while(i--){groups[i]=nid+toSelector(groups[i])}newContext=rsibling.test(selector)&&testContext(context.parentNode)||context;newSelector=groups.join(",")}if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results}catch(qsaError){}finally{if(!old){context.removeAttribute("id")}}}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()]}return cache[key+" "]=value}return cache}function markFunction(fn){fn[expando]=true;return fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return false}finally{if(div.parentNode){div.parentNode.removeChild(div)}div=null}}function addHandle(attrs,handler){var arr=attrs.split("|"),i=attrs.length;while(i--){Expr.attrHandle[arr[i]]=handler}}function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff){return diff}if(cur){while(cur=cur.nextSibling){if(cur===b){return-1}}}return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[j=matchIndexes[i]]){seed[j]=!(matches[j]=seed[j])}}})})}function testContext(context){return context&&typeof context.getElementsByTagName!==strundefined&&context}support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};setDocument=Sizzle.setDocument=function(node){var hasCompare,doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document}document=doc;docElem=doc.documentElement;documentIsHTML=!isXML(doc);if(parent&&parent!==parent.top){if(parent.addEventListener){parent.addEventListener("unload",function(){setDocument()},false)}else if(parent.attachEvent){parent.attachEvent("onunload",function(){setDocument()})}}support.attributes=assert(function(div){div.className="i";return!div.getAttribute("className")});support.getElementsByTagName=assert(function(div){div.appendChild(doc.createComment(""));return!div.getElementsByTagName("*").length});support.getElementsByClassName=rnative.test(doc.getElementsByClassName)&&assert(function(div){div.innerHTML="<div class='a'></div><div class='a i'></div>";div.firstChild.className="i";return div.getElementsByClassName("i").length===2});support.getById=assert(function(div){docElem.appendChild(div).id=expando;return!doc.getElementsByName||!doc.getElementsByName(expando).length});if(support.getById){Expr.find["ID"]=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}}else{delete Expr.find["ID"];Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}}}Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!==strundefined){return context.getElementsByTagName(tag)}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while(elem=results[i++]){if(elem.nodeType===1){tmp.push(elem)}}return tmp}return results};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!==strundefined&&documentIsHTML){return context.getElementsByClassName(className)}};rbuggyMatches=[];rbuggyQSA=[];if(support.qsa=rnative.test(doc.querySelectorAll)){assert(function(div){div.innerHTML="<select t=''><option selected=''></option></select>";if(div.querySelectorAll("[t^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")")}if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")")}if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}});assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden");div.appendChild(input).setAttribute("name","D");if(div.querySelectorAll("[name=d]").length){rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=")}if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled")}div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:")})}if(support.matchesSelector=rnative.test(matches=docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)){assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!='']:x");rbuggyMatches.push("!=",pseudos)})}rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return true}}}return false};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare}compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||!support.sortDetached&&b.compareDocumentPosition(a)===compare){if(a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){return-1}if(b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){return 1}return sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0}return compare&4?-1:1}:function(a,b){if(a===b){hasDuplicate=true;return 0}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0}else if(aup===bup){return siblingCheck(a,b)}cur=a;while(cur=cur.parentNode){ap.unshift(cur)}cur=b;while(cur=cur.parentNode){bp.unshift(cur)}while(ap[i]===bp[i]){i++}return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0};return doc};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem)}expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret}}catch(e){}}return Sizzle(expr,document,null,[elem]).length>0};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context)}return contains(context,elem)};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem)}var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while(elem=results[i++]){if(elem===results[i]){j=duplicates.push(i)}}while(j--){results.splice(duplicates[j],1)}}sortInput=null;return results};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while(node=elem[i++]){ret+=getText(node)}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else if(nodeType===3||nodeType===4){return elem.nodeValue}return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" "}return match.slice(0,4)},CHILD:function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0])}match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+(match[7]+match[8]||match[3]==="odd")}else if(match[3]){Sizzle.error(match[0])}return match},PSEUDO:function(match){var excess,unquoted=!match[5]&&match[2];if(matchExpr["CHILD"].test(match[0])){return null}if(match[3]&&match[4]!==undefined){match[2]=match[4]}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}return match.slice(0,3)}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!="}if(!operator){return true}result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false}},CHILD:function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){while(dir){node=elem;while(node=node[dir]){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false}}start=dir=type==="only"&&!start&&"nextSibling"}return true}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){outerCache=parent[expando]||(parent[expando]={});cache=outerCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=cache[0]===dirruns&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if(node.nodeType===1&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns){diff=cache[1]}else{while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){(node[expando]||(node[expando]={}))[type]=[dirruns,diff]}if(node===elem){break}}}}diff-=last;return diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument)}if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if(elem=unmatched[i]){seed[i]=!(matches[i]=elem)}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);return!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang)}lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang")){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===false},disabled:function(elem){return elem.disabled===true},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&!!elem.selected},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false}}return true},parent:function(elem){return!Expr.pseudos["empty"](elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},text:function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text")},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i)}return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i)}return matchIndexes})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i)}for(i in{submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i)}function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters;function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0)}soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar}groups.push(tokens=[])}matched=false;if(match=rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length)}}if(!matched){break}}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value}return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml)}}}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true}}}}else{while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});if((oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return newCache[2]=oldCache[2]}else{outerCache[dir]=newCache;if(newCache[2]=matcher(elem,context,xml)){return true}}}}}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false}}return true}:matchers[0]}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if(elem=unmatched[i]){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i)}}}}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter)}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector)}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml)}if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if(elem=temp[i]){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if(elem=matcherOut[i]){temp.push(matcherIn[i]=elem)}}postFinder(null,matcherOut=[],temp,xml)}i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem)}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml)}else{push.apply(results,matcherOut)}}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];for(;i<len;i++){if(matcher=Expr.relative[tokens[i].type]){matchers=[addCombinator(elementMatcher(matchers),matcher)]}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=dirruns+=contextBackup==null?1:Math.random()||.1,len=elems.length;
if(outermost){outermostContext=context!==document&&context}for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;while(matcher=elementMatchers[j++]){if(matcher(elem,context,xml)){results.push(elem);break}}if(outermost){dirruns=dirrunsUnique}}if(bySet){if(elem=!matcher&&elem){matchedCount--}if(seed){unmatched.push(elem)}}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++]){matcher(unmatched,setMatched,context,xml)}if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results)}}}setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1){Sizzle.uniqueSort(results)}}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!group){group=tokenize(selector)}i=group.length;while(i--){cached=matcherFromTokens(group[i]);if(cached[expando]){setMatchers.push(cached)}else{elementMatchers.push(cached)}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached};function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results)}return results}function select(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed){if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&support.getById&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results}selector=selector.slice(tokens.shift().value.length)}i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[type=token.type]){break}if(find=Expr.find[type]){if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context)){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results}break}}}}}compile(selector,match)(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context);return results}support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(div1){return div1.compareDocumentPosition(document.createElement("div"))&1});if(!assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild.getAttribute("href")==="#"})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2)}})}if(!support.attributes||!assert(function(div){div.innerHTML="<input/>";div.firstChild.setAttribute("value","");return div.firstChild.getAttribute("value")===""})){addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue}})}if(!assert(function(div){return div.getAttribute("disabled")==null})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}})}return Sizzle}(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/;var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not})}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return elem===qualifier!==not})}if(typeof qualifier==="string"){if(risSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not)}qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>=0!==not})}jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")"}return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1}))};jQuery.fn.extend({find:function(selector){var i,len=this.length,ret=[],self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true}}}))}for(i=0;i<len;i++){jQuery.find(selector,self[i],ret)}ret=this.pushStack(len>1?jQuery.unique(ret):ret);ret.selector=this.selector?this.selector+" "+selector:selector;return ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],false))},not:function(selector){return this.pushStack(winnow(this,selector||[],true))},is:function(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context){var match,elem;if(!selector){return this}if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null]}else{match=rquickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match])}else{this.attr(match,context[match])}}}return this}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}}else if(!context||context.jquery){return(context||rootjQuery).find(selector)}else{return this.constructor(context).find(selector)}}else if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}else if(jQuery.isFunction(selector)){return typeof rootjQuery.ready!=="undefined"?rootjQuery.ready(selector):selector(jQuery)}if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.extend({dir:function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break}matched.push(elem)}}return matched},sibling:function(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n)}}return matched}});jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true}}})},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}}}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},index:function(elem){if(!elem){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0])}return indexOf.call(this,elem.jquery?elem[0]:elem)},add:function(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until}if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched)}if(this.length>1){if(!guaranteedUnique[name]){jQuery.unique(matched)}if(rparentsprev.test(name)){matched.reverse()}}return this.pushStack(matched)}});var rnotwhite=/\S+/g;var optionsCache={};function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?optionsCache[options]||createOptions(options):jQuery.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break}}firing=false;if(list){if(stack){if(stack.length){fire(stack.shift())}}else if(memory){list=[]}else{self.disable()}}},self={add:function(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if(type==="function"){if(!options.unique||!self.has(arg)){list.push(arg)}}else if(arg&&arg.length&&type!=="string"){add(arg)}})})(arguments);if(firing){firingLength=list.length}else if(memory){firingStart=start;fire(memory)}}return this},remove:function(){if(list){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength){firingLength--}if(index<=firingIndex){firingIndex--}}}})}return this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!!(list&&list.length)},empty:function(){list=[];firingLength=0;return this},disable:function(){list=stack=memory=undefined;return this},disabled:function(){return!list},lock:function(){stack=undefined;if(!memory){self.disable()}return this},locked:function(){return!stack},fireWith:function(context,args){if(list&&(!fired||stack)){args=args||[];args=[context,args.slice?args.slice():args];if(firing){stack.push(args)}else{fire(args)}}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return!!fired}};return self};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify)}else{newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)}})});fns=null}).promise()},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock)}deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func){func.call(deferred,deferred)}return deferred},when:function(subordinate){var i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=length!==1||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values)}else if(!--remaining){deferred.resolveWith(contexts,values)}}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues))}else{--remaining}}}if(!remaining){deferred.resolveWith(resolveContexts,resolveValues)}return deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){jQuery.ready.promise().done(fn);return this};jQuery.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++}else{jQuery.ready(true)}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return}readyList.resolveWith(document,[jQuery]);if(jQuery.fn.trigger){jQuery(document).trigger("ready").off("ready")}}});function completed(){document.removeEventListener("DOMContentLoaded",completed,false);window.removeEventListener("load",completed,false);jQuery.ready()}jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"){setTimeout(jQuery.ready)}else{document.addEventListener("DOMContentLoaded",completed,false);window.addEventListener("load",completed,false)}}return readyList.promise(obj)};jQuery.ready.promise();var access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key){jQuery.access(elems,fn,i,key[i],true,emptyGet,raw)}}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value)){raw=true}if(bulk){if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value)}}}if(fn){for(;i<len;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}}}return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet};jQuery.acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!+owner.nodeType};function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=jQuery.expando+Math.random()}Data.uid=1;Data.accepts=jQuery.acceptData;Data.prototype={key:function(owner){if(!Data.accepts(owner)){return 0}var descriptor={},unlock=owner[this.expando];if(!unlock){unlock=Data.uid++;try{descriptor[this.expando]={value:unlock};Object.defineProperties(owner,descriptor)}catch(e){descriptor[this.expando]=unlock;jQuery.extend(owner,descriptor)}}if(!this.cache[unlock]){this.cache[unlock]={}}return unlock},set:function(owner,data,value){var prop,unlock=this.key(owner),cache=this.cache[unlock];if(typeof data==="string"){cache[data]=value}else{if(jQuery.isEmptyObject(cache)){jQuery.extend(this.cache[unlock],data)}else{for(prop in data){cache[prop]=data[prop]}}}return cache},get:function(owner,key){var cache=this.cache[this.key(owner)];return key===undefined?cache:cache[key]},access:function(owner,key,value){var stored;if(key===undefined||key&&typeof key==="string"&&value===undefined){stored=this.get(owner,key);return stored!==undefined?stored:this.get(owner,jQuery.camelCase(key))}this.set(owner,key,value);return value!==undefined?value:key},remove:function(owner,key){var i,name,camel,unlock=this.key(owner),cache=this.cache[unlock];if(key===undefined){this.cache[unlock]={}}else{if(jQuery.isArray(key)){name=key.concat(key.map(jQuery.camelCase))}else{camel=jQuery.camelCase(key);if(key in cache){name=[key,camel]}else{name=camel;name=name in cache?[name]:name.match(rnotwhite)||[]}}i=name.length;while(i--){delete cache[name[i]]}}},hasData:function(owner){return!jQuery.isEmptyObject(this.cache[owner[this.expando]]||{})},discard:function(owner){if(owner[this.expando]){delete this.cache[owner[this.expando]]}}};var data_priv=new Data;var data_user=new Data;var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}data_user.set(elem,key,data)}else{data=undefined}}return data}jQuery.extend({hasData:function(elem){return data_user.hasData(elem)||data_priv.hasData(elem)},data:function(elem,name,data){return data_user.access(elem,name,data)},removeData:function(elem,name){data_user.remove(elem,name)},_data:function(elem,name,data){return data_priv.access(elem,name,data)},_removeData:function(elem,name){data_priv.remove(elem,name)}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=data_user.get(elem);if(elem.nodeType===1&&!data_priv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name])}}data_priv.set(elem,"hasDataAttrs",true)}}return data}if(typeof key==="object"){return this.each(function(){data_user.set(this,key)})}return access(this,function(value){var data,camelKey=jQuery.camelCase(key);if(elem&&value===undefined){data=data_user.get(elem,key);if(data!==undefined){return data}data=data_user.get(elem,camelKey);if(data!==undefined){return data}data=dataAttr(elem,camelKey,undefined);if(data!==undefined){return data}return}this.each(function(){var data=data_user.get(this,camelKey);data_user.set(this,camelKey,value);if(key.indexOf("-")!==-1&&data!==undefined){data_user.set(this,key,value)}})},null,value,arguments.length>1,null,true)},removeData:function(key){return this.each(function(){data_user.remove(this,key)})}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=data_priv.get(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=data_priv.access(elem,type,jQuery.makeArray(data))}else{queue.push(data)}}return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx"){queue.unshift("inprogress")}delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks){hooks.empty.fire()}},_queueHooks:function(elem,type){var key=type+"queueHooks";return data_priv.get(elem,key)||data_priv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(elem,[type+"queue",key])})})}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter){return jQuery.queue(this[0],type)}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!--count){defer.resolveWith(elements,[elements])}};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=data_priv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var cssExpand=["Top","Right","Bottom","Left"];var isHidden=function(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)};var rcheckableType=/^(?:checkbox|radio)$/i;(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div"));div.innerHTML="<input type='radio' checked='checked' name='t'/>";support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue})();var strundefined=typeof undefined;support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;function returnTrue(){return true}function returnFalse(){return false}function safeActiveElement(){try{return document.activeElement}catch(err){}}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.get(elem);if(!elemData){return}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid){handler.guid=jQuery.guid++}if(!(events=elemData.events)){events=elemData.events={}}if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!==strundefined&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined}}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false)}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)}else{handlers.push(handleObj)}jQuery.event.global[type]=true}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.hasData(elem)&&data_priv.get(elem);if(!elemData||!(events=elemData.events)){return}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true)}continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--}if(special.remove){special.remove.call(elem,handleObj)}}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle)}delete events[type]}}if(jQuery.isEmptyObject(events)){delete elemData.handle;data_priv.remove(elem,"events")}},trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return}if(rfocusMorph.test(type+jQuery.event.triggered)){return}if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem}data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return}if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode}for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window)}}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(data_priv.get(cur,"events")||{})[event.type]&&data_priv.get(cur,"handle");if(handle){handle.apply(cur,data)}handle=ontype&&cur[ontype];if(handle&&handle.apply&&jQuery.acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault()}}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&jQuery.acceptData(elem)){if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null}jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp}}}}return event.result},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=slice.call(arguments),handlers=(data_priv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return}handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.namespace_re||event.namespace_re.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch){special.postDispatch.call(this,event)}return event.result},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||event.type!=="click")){for(;cur!==this;cur=cur.parentNode||this){if(cur.disabled!==true||event.type!=="click"){matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matches[sel]===undefined){matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length}if(matches[sel]){matches.push(handleObj)}}if(matches.length){handlerQueue.push({elem:cur,handlers:matches})}}}}if(delegateCount<handlers.length){handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)})}return handlerQueue},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode}return event}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.which&&button!==undefined){event.which=button&1?1:button&2?3:button&4?2:0}return event}},fix:function(event){if(event[jQuery.expando]){return event}var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook){this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}}copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop]}if(!event.target){event.target=document}if(event.target.nodeType===3){event.target=event.target.parentNode}return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();return false}},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){if(event.result!==undefined){event.originalEvent.returnValue=event.result}}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){jQuery.event.trigger(e,null,elem)}else{jQuery.event.dispatch.call(elem,e)}if(e.isDefaultPrevented()){event.preventDefault()}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse
}else{this.type=src}if(props){jQuery.extend(this,props)}this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&e.preventDefault){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&e.stopPropagation){e.stopPropagation()}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation()}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});if(!support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true)};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true)}data_priv.access(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);data_priv.remove(doc,fix)}else{data_priv.access(doc,fix,attaches)}}}})}jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types){this.on(type,selector,data,types[type],one)}return this}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}}if(fn===false){fn=returnFalse}else if(!fn){return this}if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types){this.off(type,selector,types[type])}return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false){fn=returnFalse}return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true)}}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1]}else{elem.removeAttribute("type")}return elem}function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++){data_priv.set(elems[i],"globalEval",!refElements||data_priv.get(refElements[i],"globalEval"))}}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return}if(data_priv.hasData(src)){pdataOld=data_priv.access(src);pdataCur=data_priv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i])}}}}if(data_user.hasData(src)){udataOld=data_user.access(src);udataCur=jQuery.extend({},udataOld);data_user.set(dest,udataCur)}}function getAll(context,tag){var ret=context.getElementsByTagName?context.getElementsByTagName(tag||"*"):context.querySelectorAll?context.querySelectorAll(tag||"*"):[];return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}}jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i])}}if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i])}}else{cloneCopyEvent(elem,clone)}}destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"))}return clone},buildFragment:function(elems,context,scripts,selection){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem)}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem))}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild}jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}}}fragment.textContent="";i=0;while(elem=nodes[i++]){if(selection&&jQuery.inArray(elem,selection)!==-1){continue}contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp)}if(scripts){j=0;while(elem=tmp[j++]){if(rscriptType.test(elem.type||"")){scripts.push(elem)}}}}return fragment},cleanData:function(elems){var data,elem,events,type,key,j,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(jQuery.acceptData(elem)){key=elem[data_priv.expando];if(key&&(data=data_priv.cache[key])){events=Object.keys(data.events||{});if(events.length){for(j=0;(type=events[j])!==undefined;j++){if(special[type]){jQuery.event.remove(elem,type)}else{jQuery.removeEvent(elem,type,data.handle)}}}if(data_priv.cache[key]){delete data_priv.cache[key]}}}delete data_user.cache[elem[data_user.expando]]}}});jQuery.fn.extend({text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value}})},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this)}})},after:function(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling)}})},remove:function(selector,keepData){var elem,elems=selector?jQuery.filter(selector,this):this,i=0;for(;(elem=elems[i])!=null;i++){if(!keepData&&elem.nodeType===1){jQuery.cleanData(getAll(elem))}if(elem.parentNode){if(keepData&&jQuery.contains(elem.ownerDocument,elem)){setGlobalEval(getAll(elem,"script"))}elem.parentNode.removeChild(elem)}}return this},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent=""}}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem){this.empty().append(value)}},null,value,arguments.length)},replaceWith:function(){var arg=arguments[0];this.domManip(arguments,function(elem){arg=this.parentNode;jQuery.cleanData(getAll(this));if(arg){arg.replaceChild(elem,this)}});return arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function(selector){return this.remove(selector,true)},domManip:function(args,callback){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value)){return this.each(function(index){var self=set.eq(index);if(isFunction){args[0]=value.call(this,index,self.html())}self.domManip(args,callback)})}if(l){fragment=jQuery.buildFragment(args,this[0].ownerDocument,false,this);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first}if(first){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"))}}callback.call(this[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!data_priv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){if(jQuery._evalUrl){jQuery._evalUrl(node.src)}}else{jQuery.globalEval(node.textContent.replace(rcleanScript,""))}}}}}}return this}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get())}return this.pushStack(ret)}});var iframe,elemdisplay={};function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle?window.getDefaultComputedStyle(elem[0]).display:jQuery.css(elem[0],"display");elem.detach();return display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display==="none"||!display){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement);doc=iframe[0].contentDocument;doc.write();doc.close();display=actualDisplay(nodeName,doc);iframe.detach()}elemdisplay[nodeName]=display}return display}var rmargin=/^margin/;var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles=function(elem){return elem.ownerDocument.defaultView.getComputedStyle(elem,null)};function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);if(computed){ret=computed.getPropertyValue(name)||computed[name]}if(computed){if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name)}if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret!==undefined?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn()){delete this.get;return}return(this.get=hookFn).apply(this,arguments)}}}(function(){var pixelPositionVal,boxSizingReliableVal,divReset="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;"+"-moz-box-sizing:content-box;box-sizing:content-box",docElem=document.documentElement,container=document.createElement("div"),div=document.createElement("div");div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;"+"margin-top:1px";container.appendChild(div);function computePixelPositionAndBoxSizingReliable(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;"+"box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;"+"position:absolute;top:1%";docElem.appendChild(container);var divStyle=window.getComputedStyle(div,null);pixelPositionVal=divStyle.top!=="1%";boxSizingReliableVal=divStyle.width==="4px";docElem.removeChild(container)}if(window.getComputedStyle){jQuery.extend(support,{pixelPosition:function(){computePixelPositionAndBoxSizingReliable();return pixelPositionVal},boxSizingReliable:function(){if(boxSizingReliableVal==null){computePixelPositionAndBoxSizingReliable()}return boxSizingReliableVal},reliableMarginRight:function(){var ret,marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";docElem.appendChild(container);ret=!parseFloat(window.getComputedStyle(marginDiv,null).marginRight);docElem.removeChild(container);div.innerHTML="";return ret}})}})();jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name]}return ret};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssPrefixes=["Webkit","O","Moz","ms"];function vendorPropName(style,name){if(name in style){return name}var capName=name[0].toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in style){return name}}return origName}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles)}if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles)}if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}}return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null){val=elem.style[name]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}values[index]=data_priv.get(elem,"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none"){elem.style.display=""}if(elem.style.display===""&&isHidden(elem)){values[index]=data_priv.access(elem,"olddisplay",defaultDisplay(elem.nodeName))}}else{if(!values[index]){hidden=isHidden(elem);if(display&&display!=="none"||!hidden){data_priv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))}}}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none"}}return elements}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{columnCount:true,fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{float:"cssFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return}var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type="number"}if(value==null||value!==value){return}if(type==="number"&&!jQuery.cssNumber[origName]){value+="px"}if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit"}if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){style[name]="";style[name]=value}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra)}if(val===undefined){val=curCSS(elem,name,styles)}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]}if(extra===""||extra){num=parseFloat(val);return extra===true||jQuery.isNumeric(num)?num||0:val}return val}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){return elem.offsetWidth===0&&rdisplayswap.test(jQuery.css(elem,"display"))?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)}},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles):0)}}});jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed){return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]}return expanded}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber}});jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles)}return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide()}return this.each(function(){if(isHidden(this)){jQuery(this).show()}else{jQuery(this).hide()}})}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||"swing";this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration)}else{this.pos=eased=percent}this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(hooks&&hooks.set){hooks.set(this)}else{Tween.propHooks._default.set(this)}return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem[tween.prop]!=null&&(!tween.elem.style||tween.elem.style[tween.prop]==null)){return tween.elem[tween.prop]}result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween)}else if(tween.elem.style&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}else{tween.elem[tween.prop]=tween.now}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now}}};jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||unit!=="px"&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3];parts=parts||[];start=+target||1;do{scale=scale||".5";start=start/scale;jQuery.style(tween.elem,prop,start+unit)}while(scale!==(scale=tween.cur()/target)&&scale!==1&&--maxIterations)}if(parts){start=tween.start=+start||+target||0;tween.unit=unit;tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]}return tween}]};function createFxNow(){setTimeout(function(){fxNow=undefined});return fxNow=jQuery.now()}function genFx(type,includeWidth){var which,i=0,attrs={height:type};includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth){attrs.opacity=attrs.width=type}return attrs}function createTween(value,prop,animation){var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if(tween=collection[index].call(animation,prop,value)){return tween}}}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=data_priv.get(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire()}}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire()}})})}if(elem.nodeType===1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];display=jQuery.css(elem,"display");if(display==="none"){display=defaultDisplay(elem.nodeName)}if(display==="inline"&&jQuery.css(elem,"float")==="none"){style.display="inline-block"}}if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}for(prop in props){value=props[prop];if(rfxtypes.exec(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true}else{continue}}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}}if(!jQuery.isEmptyObject(orig)){if(dataShow){if("hidden"in dataShow){hidden=dataShow.hidden}}else{dataShow=data_priv.access(elem,"fxshow",{})}if(toggle){dataShow.hidden=!hidden}if(hidden){jQuery(elem).show()}else{anim.done(function(){jQuery(elem).hide()})}anim.done(function(){var prop;data_priv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop])}});for(prop in orig){tween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0}}}}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}}else{specialEasing[name]=easing}}}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped){return false}var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent)}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining}else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this}stopped=true;for(;index<length;index++){animation.tweens[index].run(1)}if(gotoEnd){deferred.resolveWith(elem,[animation,gotoEnd])}else{deferred.rejectWith(elem,[animation,gotoEnd])}return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);if(result){return result}}jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation)}jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else{props=props.split(" ")}var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];tweeners[prop]=tweeners[prop]||[];tweeners[prop].unshift(callback)}},prefilter:function(callback,prepend){if(prepend){animationPrefilters.unshift(callback)}else{animationPrefilters.push(callback)}}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx"}opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this)}if(opt.queue){jQuery.dequeue(this,opt.queue)}};return opt};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||data_priv.get(this,"finish")){anim.stop(true)}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false){this.queue(type||"fx",[])}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=data_priv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index])}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index])}}}for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}}if(dequeue||!gotoEnd){jQuery.dequeue(this,type)}})},finish:function(type){if(type!==false){type=type||"fx"}return this.each(function(){var index,data=data_priv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true)}for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);
timers.splice(index,1)}}for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this)}}delete data.finish})}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.timers=[];jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1)}}if(!timers.length){jQuery.fx.stop()}fxNow=undefined};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);if(timer()){jQuery.fx.start()}else{jQuery.timers.pop()}};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId){timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval)}};jQuery.fx.stop=function(){clearInterval(timerId);timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;select.disabled=true;support.optDisabled=!opt.disabled;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t"})();var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}});jQuery.extend({attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}if(typeof elem.getAttribute===strundefined){return jQuery.prop(elem,name,value)}if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name)}else if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}else{elem.setAttribute(name,value+"");return value}}else if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}else{ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&elem.nodeType===1){while(name=attrNames[i++]){propName=jQuery.propFix[name]||name;if(jQuery.expr.match.bool.test(name)){elem[propName]=false}elem.removeAttribute(name)}}},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name)}else{elem.setAttribute(name,name)}return name}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle;if(!isXML){handle=attrHandle[name];attrHandle[name]=ret;ret=getter(elem,name,isXML)!=null?name.toLowerCase():null;attrHandle[name]=handle}return ret}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}});jQuery.extend({propFix:{for:"htmlFor",class:"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){return hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value}else{return hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null?ret:elem[name]}},propHooks:{tabIndex:{get:function(elem){return elem.hasAttribute("tabindex")||rfocusable.test(elem.nodeName)||elem.href?elem.tabIndex:-1}}}});if(!support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex}return null}}}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed=typeof value==="string"&&value,i=0,len=this.length;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))})}if(proceed){classes=(value||"").match(rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ");if(cur){j=0;while(clazz=classes[j++]){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" "}}finalValue=jQuery.trim(cur);if(elem.className!==finalValue){elem.className=finalValue}}}}return this},removeClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed=arguments.length===0||typeof value==="string"&&value,i=0,len=this.length;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))})}if(proceed){classes=(value||"").match(rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"");if(cur){j=0;while(clazz=classes[j++]){while(cur.indexOf(" "+clazz+" ")>=0){cur=cur.replace(" "+clazz+" "," ")}}finalValue=value?jQuery.trim(cur):"";if(elem.className!==finalValue){elem.className=finalValue}}}}return this},toggleClass:function(value,stateVal){var type=typeof value;if(typeof stateVal==="boolean"&&type==="string"){return stateVal?this.addClass(value):this.removeClass(value)}if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)})}return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];while(className=classNames[i++]){if(self.hasClass(className)){self.removeClass(className)}else{self.addClass(className)}}}else if(type===strundefined||type==="boolean"){if(this.className){data_priv.set(this,"__className__",this.className)}this.className=this.className||value===false?"":data_priv.get(this,"__className__")||""}})},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0){return true}}return false}});var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return}if(isFunction){val=value.call(this,i,jQuery(this).val())}else{val=value}if(val==null){val=""}else if(typeof val==="number"){val+=""}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""})}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});jQuery.extend({valHooks:{select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value}values.push(value)}}return values},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(option.selected=jQuery.inArray(jQuery(option).val(),values)>=0){optionSet=true}}if(!optionSet){elem.selectedIndex=-1}return values}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value)){return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value}}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var nonce=jQuery.now();var rquery=/\?/;jQuery.parseJSON=function(data){return JSON.parse(data+"")};jQuery.parseXML=function(data){var xml,tmp;if(!data||typeof data!=="string"){return null}try{tmp=new DOMParser;xml=tmp.parseFromString(data,"text/xml")}catch(e){xml=undefined}if(!xml||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data)}return xml};var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*"}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func)){while(dataType=dataTypes[i++]){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func)}else{(structure[dataType]=structure[dataType]||[]).push(func)}}}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false}else if(seekingTransport){return!(selected=dataTypeOrTransport)}});return selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:deep||(deep={}))[key]=src[key]}}if(deep){jQuery.extend(true,target,deep)}return target}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}}}if(dataTypes[0]in responses){finalDataType=dataTypes[0]}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType){firstDataType=type}}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType)}return responses[finalDataType]}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv]}}current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response}if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType)}prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev}else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2]}else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1])}break}}}}if(conv!==true){if(conv&&s["throws"]){response=conv(response)}else{try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}}}}return{state:"success",data:response}}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString)){responseHeaders[match[1].toLowerCase()]=match[2]}}match=responseHeaders[key.toLowerCase()]}return match==null?null:match},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},overrideMimeType:function(type){if(!state){s.mimeType=type}return this},statusCode:function(map){var code;if(map){if(state<2){for(code in map){statusCode[code]=[statusCode[code],map[code]]}}else{jqXHR.always(map[jqXHR.status])}}return this},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText)}done(0,finalText);return this}};deferred.promise(jqXHR).complete=completeDeferred.add;jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""];if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!==ajaxLocParts[1]||parts[2]!==ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?"80":"443"))!==(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443"))))}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional)}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return jqXHR}fireGlobals=s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart")}s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url;if(!s.hasContent){if(s.data){cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data;delete s.data}if(s.cache===false){s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++}}if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL])}if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType)}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i])}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort()}strAbort="abort";for(i in{success:1,error:1,complete:1}){jqXHR[i](s[i])}transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport")}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s])}if(s.async&&s.timeout>0){timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout)}try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2){done(-1,e)}else{throw e}}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2){return}state=2;if(timeoutTimer){clearTimeout(timeoutTimer)}transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses)}response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified}modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified}}if(status===204||s.type==="HEAD"){statusText="nocontent"}else if(status===304){statusText="notmodified"}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0}}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR])}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error])}jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error])}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!--jQuery.active){jQuery.event.trigger("ajaxStop")}}}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}});jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:false,global:false,throws:true})};jQuery.fn.extend({wrapAll:function(html){var wrap;if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))})}if(this[0]){wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild}return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes)}}).end()}});jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add)}})}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value==null?"":value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional}if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a)){jQuery.each(a,function(){add(this.name,this.value)})}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)}}return s.join("&").replace(r20,"+")};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();if(window.ActiveXObject){jQuery(window).on("unload",function(){for(var key in xhrCallbacks){xhrCallbacks[key]()}})}support.cors=!!xhrSupported&&"withCredentials"in xhrSupported;support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback;if(support.cors||xhrSupported&&!options.crossDomain){return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i]}}if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType)}if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest"}for(i in headers){xhr.setRequestHeader(i,headers[i])}callback=function(type){return function(){if(callback){delete xhrCallbacks[id];callback=xhr.onload=xhr.onerror=null;if(type==="abort"){xhr.abort()}else if(type==="error"){complete(xhr.status,xhr.statusText)}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,typeof xhr.responseText==="string"?{text:xhr.responseText}:undefined,xhr.getAllResponseHeaders())}}}};xhr.onload=callback();xhr.onerror=callback("error");callback=xhrCallbacks[id]=callback("abort");xhr.send(options.hasContent&&options.data||null)},abort:function(){if(callback){callback()}}}}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false}if(s.crossDomain){s.type="GET"}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({async:true,charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt){complete(evt.type==="error"?404:200,evt.type)}});document.head.appendChild(script[0])},abort:function(){if(callback){callback()}}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName)}else if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName}s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called")}return responseContainer[0]};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0])}responseContainer=overwritten=undefined});return"script"}});jQuery.parseHTML=function(data,context,keepScripts){if(!data||typeof data!=="string"){return null}if(typeof context==="boolean"){keepScripts=context;context=false}context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])]}parsed=jQuery.buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove()}return jQuery.merge([],parsed.childNodes)};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments)}var selector,type,response,self=this,off=url.indexOf(" ");if(off>=0){selector=url.slice(off);url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else if(params&&typeof params==="object"){type="POST"}if(self.length>0){jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])})}return this};jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var docElem=window.document.documentElement;function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView}jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative"}curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset)}if(options.top!=null){props.top=options.top-curOffset.top+curTop}if(options.left!=null){props.left=options.left-curOffset.left+curLeft}if("using"in options){options.using.call(elem,props)}else{curElem.css(props)}}};jQuery.fn.extend({offset:function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)})}var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(!doc){return}docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return box}if(typeof elem.getBoundingClientRect!==strundefined){box=elem.getBoundingClientRect()}win=getWindow(doc);return{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}},position:function(){if(!this[0]){return}var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect()}else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset()}parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",true)}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||docElem;while(offsetParent&&(!jQuery.nodeName(offsetParent,"html")&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent}return offsetParent||docElem})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?win[prop]:elem[method]}if(win){win.scrollTo(!top?val:window.pageXOffset,top?val:window.pageYOffset)}else{elem[method]=val}},method,val,arguments.length,null)}});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);
return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}})});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name]}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});jQuery.fn.size=function(){return this.length};jQuery.fn.andSelf=jQuery.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery})}var _jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery};if(typeof noGlobal===strundefined){window.jQuery=window.$=jQuery}return jQuery});(function(){"use strict";var Faye={VERSION:"1.0.0",BAYEUX_VERSION:"1.0",ID_LENGTH:160,JSONP_CALLBACK:"jsonpcallback",CONNECTION_TYPES:["long-polling","cross-origin-long-polling","callback-polling","websocket","eventsource","in-process"],MANDATORY_CONNECTION_TYPES:["long-polling","callback-polling","in-process"],ENV:typeof window!=="undefined"?window:global,extend:function(dest,source,overwrite){if(!source)return dest;for(var key in source){if(!source.hasOwnProperty(key))continue;if(dest.hasOwnProperty(key)&&overwrite===false)continue;if(dest[key]!==source[key])dest[key]=source[key]}return dest},random:function(bitlength){bitlength=bitlength||this.ID_LENGTH;return csprng(bitlength,36)},clientIdFromMessages:function(messages){var connect=this.filter([].concat(messages),function(message){return message.channel==="/meta/connect"});return connect[0]&&connect[0].clientId},copyObject:function(object){var clone,i,key;if(object instanceof Array){clone=[];i=object.length;while(i--)clone[i]=Faye.copyObject(object[i]);return clone}else if(typeof object==="object"){clone=object===null?null:{};for(key in object)clone[key]=Faye.copyObject(object[key]);return clone}else{return object}},commonElement:function(lista,listb){for(var i=0,n=lista.length;i<n;i++){if(this.indexOf(listb,lista[i])!==-1)return lista[i]}return null},indexOf:function(list,needle){if(list.indexOf)return list.indexOf(needle);for(var i=0,n=list.length;i<n;i++){if(list[i]===needle)return i}return-1},map:function(object,callback,context){if(object.map)return object.map(callback,context);var result=[];if(object instanceof Array){for(var i=0,n=object.length;i<n;i++){result.push(callback.call(context||null,object[i],i))}}else{for(var key in object){if(!object.hasOwnProperty(key))continue;result.push(callback.call(context||null,key,object[key]))}}return result},filter:function(array,callback,context){if(array.filter)return array.filter(callback,context);var result=[];for(var i=0,n=array.length;i<n;i++){if(callback.call(context||null,array[i],i))result.push(array[i])}return result},asyncEach:function(list,iterator,callback,context){var n=list.length,i=-1,calls=0,looping=false;var iterate=function(){calls-=1;i+=1;if(i===n)return callback&&callback.call(context);iterator(list[i],resume)};var loop=function(){if(looping)return;looping=true;while(calls>0)iterate();looping=false};var resume=function(){calls+=1;loop()};resume()},toJSON:function(object){if(!this.stringify)return JSON.stringify(object);return this.stringify(object,function(key,value){return this[key]instanceof Array?this[key]:value})}};if(typeof module!=="undefined")module.exports=Faye;else if(typeof window!=="undefined")window.Faye=Faye;Faye.Class=function(parent,methods){if(typeof parent!=="function"){methods=parent;parent=Object}var klass=function(){if(!this.initialize)return this;return this.initialize.apply(this,arguments)||this};var bridge=function(){};bridge.prototype=parent.prototype;klass.prototype=new bridge;Faye.extend(klass.prototype,methods);return klass};(function(){var EventEmitter=Faye.EventEmitter=function(){};var isArray=typeof Array.isArray==="function"?Array.isArray:function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function indexOf(xs,x){if(xs.indexOf)return xs.indexOf(x);for(var i=0;i<xs.length;i++){if(x===xs[i])return i}return-1}EventEmitter.prototype.emit=function(type){if(type==="error"){if(!this._events||!this._events.error||isArray(this._events.error)&&!this._events.error.length){if(arguments[1]instanceof Error){throw arguments[1]}else{throw new Error("Uncaught, unspecified 'error' event.")}return false}}if(!this._events)return false;var handler=this._events[type];if(!handler)return false;if(typeof handler=="function"){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:var args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}return true}else if(isArray(handler)){var args=Array.prototype.slice.call(arguments,1);var listeners=handler.slice();for(var i=0,l=listeners.length;i<l;i++){listeners[i].apply(this,args)}return true}else{return false}};EventEmitter.prototype.addListener=function(type,listener){if("function"!==typeof listener){throw new Error("addListener only takes instances of Function")}if(!this._events)this._events={};this.emit("newListener",type,listener);if(!this._events[type]){this._events[type]=listener}else if(isArray(this._events[type])){this._events[type].push(listener)}else{this._events[type]=[this._events[type],listener]}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){var self=this;self.on(type,function g(){self.removeListener(type,g);listener.apply(this,arguments)});return this};EventEmitter.prototype.removeListener=function(type,listener){if("function"!==typeof listener){throw new Error("removeListener only takes instances of Function")}if(!this._events||!this._events[type])return this;var list=this._events[type];if(isArray(list)){var i=indexOf(list,listener);if(i<0)return this;list.splice(i,1);if(list.length==0)delete this._events[type]}else if(this._events[type]===listener){delete this._events[type]}return this};EventEmitter.prototype.removeAllListeners=function(type){if(arguments.length===0){this._events={};return this}if(type&&this._events&&this._events[type])this._events[type]=null;return this};EventEmitter.prototype.listeners=function(type){if(!this._events)this._events={};if(!this._events[type])this._events[type]=[];if(!isArray(this._events[type])){this._events[type]=[this._events[type]]}return this._events[type]}})();Faye.Namespace=Faye.Class({initialize:function(){this._used={}},exists:function(id){return this._used.hasOwnProperty(id)},generate:function(){var name=Faye.random();while(this._used.hasOwnProperty(name))name=Faye.random();return this._used[name]=name},release:function(id){delete this._used[id]}});(function(){"use strict";var timeout=setTimeout;var defer;if(typeof setImmediate==="function")defer=function(fn){setImmediate(fn)};else if(typeof process==="object"&&process.nextTick)defer=function(fn){process.nextTick(fn)};else defer=function(fn){timeout(fn,0)};var PENDING=0,FULFILLED=1,REJECTED=2;var FORWARD=function(x){return x},BREAK=function(x){throw x};var Promise=function(task){this._state=PENDING;this._callbacks=[];this._errbacks=[];if(typeof task!=="function")return;var self=this;task(function(value){fulfill(self,value)},function(reason){reject(self,reason)})};Promise.prototype.then=function(callback,errback){var self=this;return new Promise(function(fulfill,reject){var next={fulfill:fulfill,reject:reject};registerCallback(self,callback,next);registerErrback(self,errback,next)})};var registerCallback=function(promise,callback,next){if(typeof callback!=="function")callback=FORWARD;var handler=function(value){invoke(callback,value,next)};if(promise._state===PENDING){promise._callbacks.push(handler)}else if(promise._state===FULFILLED){defer(function(){handler(promise._value)})}};var registerErrback=function(promise,errback,next){if(typeof errback!=="function")errback=BREAK;var handler=function(reason){invoke(errback,reason,next)};if(promise._state===PENDING){promise._errbacks.push(handler)}else if(promise._state===REJECTED){defer(function(){handler(promise._reason)})}};var invoke=function(fn,value,next){try{var outcome=fn(value);if(outcome&&typeof outcome.then==="function"){outcome.then(next.fulfill,next.reject)}else{next.fulfill(outcome)}}catch(error){next.reject(error)}};var fulfill=Promise.fulfill=function(promise,value){if(promise._state!==PENDING)return;promise._state=FULFILLED;promise._value=value;promise._errbacks=[];var callbacks=promise._callbacks,cb;while(cb=callbacks.shift())cb(value)};var reject=Promise.reject=function(promise,reason){if(promise._state!==PENDING)return;promise._state=REJECTED;promise._reason=reason;promise._callbacks=[];var errbacks=promise._errbacks,eb;while(eb=errbacks.shift())eb(reason)};Promise.defer=defer;Promise.pending=function(){var tuple={};tuple.promise=new Promise(function(fulfill,reject){tuple.fulfill=fulfill;tuple.reject=reject});return tuple};Promise.fulfilled=function(value){return new Promise(function(fulfill,reject){fulfill(value)})};Promise.rejected=function(reason){return new Promise(function(fulfill,reject){reject(reason)})};if(typeof Faye==="undefined")module.exports=Promise;else Faye.Promise=Promise})();Faye.Set=Faye.Class({initialize:function(){this._index={}},add:function(item){var key=item.id!==undefined?item.id:item;if(this._index.hasOwnProperty(key))return false;this._index[key]=item;return true},forEach:function(block,context){for(var key in this._index){if(this._index.hasOwnProperty(key))block.call(context,this._index[key])}},isEmpty:function(){for(var key in this._index){if(this._index.hasOwnProperty(key))return false}return true},member:function(item){for(var key in this._index){if(this._index[key]===item)return true}return false},remove:function(item){var key=item.id!==undefined?item.id:item;var removed=this._index[key];delete this._index[key];return removed},toArray:function(){var array=[];this.forEach(function(item){array.push(item)});return array}});Faye.URI={isURI:function(uri){return uri&&uri.protocol&&uri.host&&uri.path},isSameOrigin:function(uri){var location=Faye.ENV.location;return uri.protocol===location.protocol&&uri.hostname===location.hostname&&uri.port===location.port},parse:function(url){if(typeof url!=="string")return url;var uri={},parts,query,pairs,i,n,data;var consume=function(name,pattern){url=url.replace(pattern,function(match){uri[name]=match;return""});uri[name]=uri[name]||""};consume("protocol",/^[a-z]+\:/i);consume("host",/^\/\/[^\/\?#]+/);if(!/^\//.test(url)&&!uri.host)url=Faye.ENV.location.pathname.replace(/[^\/]*$/,"")+url;consume("pathname",/^[^\?#]*/);consume("search",/^\?[^#]*/);consume("hash",/^#.*/);uri.protocol=uri.protocol||Faye.ENV.location.protocol;if(uri.host){uri.host=uri.host.substr(2);parts=uri.host.split(":");uri.hostname=parts[0];uri.port=parts[1]||""}else{uri.host=Faye.ENV.location.host;uri.hostname=Faye.ENV.location.hostname;uri.port=Faye.ENV.location.port}uri.pathname=uri.pathname||"/";uri.path=uri.pathname+uri.search;query=uri.search.replace(/^\?/,"");pairs=query?query.split("&"):[];data={};for(i=0,n=pairs.length;i<n;i++){parts=pairs[i].split("=");data[decodeURIComponent(parts[0]||"")]=decodeURIComponent(parts[1]||"")}uri.query=data;uri.href=this.stringify(uri);return uri},stringify:function(uri){var string=uri.protocol+"//"+uri.hostname;if(uri.port)string+=":"+uri.port;string+=uri.pathname+this.queryString(uri.query)+(uri.hash||"");return string},queryString:function(query){var pairs=[];for(var key in query){if(!query.hasOwnProperty(key))continue;pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(query[key]))}if(pairs.length===0)return"";return"?"+pairs.join("&")}};Faye.Error=Faye.Class({initialize:function(code,params,message){this.code=code;this.params=Array.prototype.slice.call(params);this.message=message},toString:function(){return this.code+":"+this.params.join(",")+":"+this.message}});Faye.Error.parse=function(message){message=message||"";if(!Faye.Grammar.ERROR.test(message))return new this(null,[],message);var parts=message.split(":"),code=parseInt(parts[0]),params=parts[1].split(","),message=parts[2];return new this(code,params,message)};Faye.Error.versionMismatch=function(){return new this(300,arguments,"Version mismatch").toString()};Faye.Error.conntypeMismatch=function(){return new this(301,arguments,"Connection types not supported").toString()};Faye.Error.extMismatch=function(){return new this(302,arguments,"Extension mismatch").toString()};Faye.Error.badRequest=function(){return new this(400,arguments,"Bad request").toString()};Faye.Error.clientUnknown=function(){return new this(401,arguments,"Unknown client").toString()};Faye.Error.parameterMissing=function(){return new this(402,arguments,"Missing required parameter").toString()};Faye.Error.channelForbidden=function(){return new this(403,arguments,"Forbidden channel").toString()};Faye.Error.channelUnknown=function(){return new this(404,arguments,"Unknown channel").toString()};Faye.Error.channelInvalid=function(){return new this(405,arguments,"Invalid channel").toString()};Faye.Error.extUnknown=function(){return new this(406,arguments,"Unknown extension").toString()};Faye.Error.publishFailed=function(){return new this(407,arguments,"Failed to publish").toString()};Faye.Error.serverError=function(){return new this(500,arguments,"Internal server error").toString()};Faye.Deferrable={then:function(callback,errback){var self=this;if(!this._promise)this._promise=new Faye.Promise(function(fulfill,reject){self._fulfill=fulfill;self._reject=reject});if(arguments.length===0)return this._promise;else return this._promise.then(callback,errback)},callback:function(callback,context){return this.then(function(value){callback.call(context,value)})},errback:function(callback,context){return this.then(null,function(reason){callback.call(context,reason)})},timeout:function(seconds,message){this.then();var self=this;this._timer=Faye.ENV.setTimeout(function(){self._reject(message)},seconds*1e3)},setDeferredStatus:function(status,value){if(this._timer)Faye.ENV.clearTimeout(this._timer);var promise=this.then();if(status==="succeeded")this._fulfill(value);else if(status==="failed")this._reject(value);else delete this._promise}};Faye.Publisher={countListeners:function(eventType){return this.listeners(eventType).length},bind:function(eventType,listener,context){var slice=Array.prototype.slice,handler=function(){listener.apply(context,slice.call(arguments))};this._listeners=this._listeners||[];this._listeners.push([eventType,listener,context,handler]);return this.on(eventType,handler)},unbind:function(eventType,listener,context){this._listeners=this._listeners||[];var n=this._listeners.length,tuple;while(n--){tuple=this._listeners[n];if(tuple[0]!==eventType)continue;if(listener&&(tuple[1]!==listener||tuple[2]!==context))continue;this._listeners.splice(n,1);this.removeListener(eventType,tuple[3])}}};Faye.extend(Faye.Publisher,Faye.EventEmitter.prototype);Faye.Publisher.trigger=Faye.Publisher.emit;Faye.Timeouts={addTimeout:function(name,delay,callback,context){this._timeouts=this._timeouts||{};if(this._timeouts.hasOwnProperty(name))return;var self=this;this._timeouts[name]=Faye.ENV.setTimeout(function(){delete self._timeouts[name];callback.call(context)},1e3*delay)},removeTimeout:function(name){this._timeouts=this._timeouts||{};var timeout=this._timeouts[name];if(!timeout)return;clearTimeout(timeout);delete this._timeouts[name]}};Faye.Logging={LOG_LEVELS:{fatal:4,error:3,warn:2,info:1,debug:0},writeLog:function(messageArgs,level){if(!Faye.logger)return;var messageArgs=Array.prototype.slice.apply(messageArgs),banner="[Faye",klass=this.className,message=messageArgs.shift().replace(/\?/g,function(){try{return Faye.toJSON(messageArgs.shift())}catch(e){return"[Object]"}});for(var key in Faye){if(klass)continue;if(typeof Faye[key]!=="function")continue;if(this instanceof Faye[key])klass=key}if(klass)banner+="."+klass;banner+="] ";if(typeof Faye.logger[level]==="function")Faye.logger[level](banner+message);else if(typeof Faye.logger==="function")Faye.logger(banner+message)}};(function(){for(var key in Faye.Logging.LOG_LEVELS)(function(level,value){Faye.Logging[level]=function(){this.writeLog(arguments,level)}})(key,Faye.Logging.LOG_LEVELS[key])})();Faye.Grammar={CHANNEL_NAME:/^\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*$/,CHANNEL_PATTERN:/^(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*\/\*{1,2}$/,ERROR:/^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)$/,VERSION:/^([0-9])+(\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|\_))*)*$/};Faye.Extensible={addExtension:function(extension){this._extensions=this._extensions||[];this._extensions.push(extension);if(extension.added)extension.added(this)},removeExtension:function(extension){if(!this._extensions)return;var i=this._extensions.length;while(i--){if(this._extensions[i]!==extension)continue;this._extensions.splice(i,1);if(extension.removed)extension.removed(this)}},pipeThroughExtensions:function(stage,message,request,callback,context){this.debug("Passing through ? extensions: ?",stage,message);if(!this._extensions)return callback.call(context,message);var extensions=this._extensions.slice();var pipe=function(message){if(!message)return callback.call(context,message);var extension=extensions.shift();if(!extension)return callback.call(context,message);var fn=extension[stage];if(!fn)return pipe(message);if(fn.length>=3)extension[stage](message,request,pipe);else extension[stage](message,pipe)};pipe(message)}};Faye.extend(Faye.Extensible,Faye.Logging);Faye.Channel=Faye.Class({initialize:function(name){this.id=this.name=name},push:function(message){this.trigger("message",message)},isUnused:function(){return this.countListeners("message")===0}});Faye.extend(Faye.Channel.prototype,Faye.Publisher);Faye.extend(Faye.Channel,{HANDSHAKE:"/meta/handshake",CONNECT:"/meta/connect",SUBSCRIBE:"/meta/subscribe",UNSUBSCRIBE:"/meta/unsubscribe",DISCONNECT:"/meta/disconnect",META:"meta",SERVICE:"service",expand:function(name){var segments=this.parse(name),channels=["/**",name];var copy=segments.slice();copy[copy.length-1]="*";channels.push(this.unparse(copy));for(var i=1,n=segments.length;i<n;i++){copy=segments.slice(0,i);copy.push("**");channels.push(this.unparse(copy))}return channels},isValid:function(name){return Faye.Grammar.CHANNEL_NAME.test(name)||Faye.Grammar.CHANNEL_PATTERN.test(name)},parse:function(name){if(!this.isValid(name))return null;return name.split("/").slice(1)},unparse:function(segments){return"/"+segments.join("/")},isMeta:function(name){var segments=this.parse(name);return segments?segments[0]===this.META:null},isService:function(name){var segments=this.parse(name);return segments?segments[0]===this.SERVICE:null},isSubscribable:function(name){if(!this.isValid(name))return null;return!this.isMeta(name)&&!this.isService(name)},Set:Faye.Class({initialize:function(){this._channels={}},getKeys:function(){var keys=[];for(var key in this._channels)keys.push(key);return keys},remove:function(name){delete this._channels[name]},hasSubscription:function(name){return this._channels.hasOwnProperty(name)},subscribe:function(names,callback,context){if(!callback)return;var name;for(var i=0,n=names.length;i<n;i++){name=names[i];var channel=this._channels[name]=this._channels[name]||new Faye.Channel(name);channel.bind("message",callback,context)}},unsubscribe:function(name,callback,context){var channel=this._channels[name];if(!channel)return false;channel.unbind("message",callback,context);if(channel.isUnused()){this.remove(name);return true}else{return false}},distributeMessage:function(message){var channels=Faye.Channel.expand(message.channel);for(var i=0,n=channels.length;i<n;i++){var channel=this._channels[channels[i]];if(channel)channel.trigger("message",message.data)}}})});Faye.Envelope=Faye.Class({initialize:function(message,timeout){this.id=message.id;this.message=message;if(timeout!==undefined)this.timeout(timeout/1e3,false)}});Faye.extend(Faye.Envelope.prototype,Faye.Deferrable);Faye.Publication=Faye.Class(Faye.Deferrable);Faye.Subscription=Faye.Class({initialize:function(client,channels,callback,context){this._client=client;this._channels=channels;this._callback=callback;this._context=context;this._cancelled=false},cancel:function(){if(this._cancelled)return;this._client.unsubscribe(this._channels,this._callback,this._context);this._cancelled=true},unsubscribe:function(){this.cancel()}});Faye.extend(Faye.Subscription.prototype,Faye.Deferrable);Faye.Client=Faye.Class({UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:"handshake",RETRY:"retry",NONE:"none",CONNECTION_TIMEOUT:60,DEFAULT_RETRY:5,MAX_REQUEST_SIZE:2048,DEFAULT_ENDPOINT:"/bayeux",INTERVAL:0,initialize:function(endpoint,options){this.info("New client created for ?",endpoint);this._options=options||{};this.endpoint=Faye.URI.parse(endpoint||this.DEFAULT_ENDPOINT);this.endpoints=this._options.endpoints||{};this.transports={};this.cookies=Faye.CookieJar&&new Faye.CookieJar;this.headers={};this.ca=this._options.ca;this._disabled=[];this._retry=this._options.retry||this.DEFAULT_RETRY;for(var key in this.endpoints)this.endpoints[key]=Faye.URI.parse(this.endpoints[key]);this.maxRequestSize=this.MAX_REQUEST_SIZE;this._state=this.UNCONNECTED;this._channels=new Faye.Channel.Set;this._messageId=0;this._responseCallbacks={};this._advice={reconnect:this.RETRY,interval:1e3*(this._options.interval||this.INTERVAL),timeout:1e3*(this._options.timeout||this.CONNECTION_TIMEOUT)};if(Faye.Event&&Faye.ENV.onbeforeunload!==undefined)Faye.Event.on(Faye.ENV,"beforeunload",function(){if(Faye.indexOf(this._disabled,"autodisconnect")<0)this.disconnect()},this)},disable:function(feature){this._disabled.push(feature)},setHeader:function(name,value){this.headers[name]=value},handshake:function(callback,context){if(this._advice.reconnect===this.NONE)return;if(this._state!==this.UNCONNECTED)return;this._state=this.CONNECTING;var self=this;this.info("Initiating handshake with ?",Faye.URI.stringify(this.endpoint));this._selectTransport(Faye.MANDATORY_CONNECTION_TYPES);this._send({channel:Faye.Channel.HANDSHAKE,version:Faye.BAYEUX_VERSION,supportedConnectionTypes:[this._transport.connectionType]},function(response){if(response.successful){this._state=this.CONNECTED;this._clientId=response.clientId;this._selectTransport(response.supportedConnectionTypes);this.info("Handshake successful: ?",this._clientId);this.subscribe(this._channels.getKeys(),true);if(callback)Faye.Promise.defer(function(){callback.call(context)})}else{this.info("Handshake unsuccessful");Faye.ENV.setTimeout(function(){self.handshake(callback,context)},this._advice.interval);this._state=this.UNCONNECTED}},this)},connect:function(callback,context){if(this._advice.reconnect===this.NONE)return;if(this._state===this.DISCONNECTED)return;if(this._state===this.UNCONNECTED)return this.handshake(function(){this.connect(callback,context)},this);this.callback(callback,context);if(this._state!==this.CONNECTED)return;this.info("Calling deferred actions for ?",this._clientId);this.setDeferredStatus("succeeded");this.setDeferredStatus("unknown");if(this._connectRequest)return;this._connectRequest=true;this.info("Initiating connection for ?",this._clientId);this._send({channel:Faye.Channel.CONNECT,clientId:this._clientId,connectionType:this._transport.connectionType},this._cycleConnection,this)},disconnect:function(){if(this._state!==this.CONNECTED)return;this._state=this.DISCONNECTED;this.info("Disconnecting ?",this._clientId);this._send({channel:Faye.Channel.DISCONNECT,clientId:this._clientId},function(response){if(!response.successful)return;this._transport.close();delete this._transport},this);this.info("Clearing channel listeners for ?",this._clientId);this._channels=new Faye.Channel.Set},subscribe:function(channel,callback,context){if(channel instanceof Array)return Faye.map(channel,function(c){return this.subscribe(c,callback,context)},this);var subscription=new Faye.Subscription(this,channel,callback,context),force=callback===true,hasSubscribe=this._channels.hasSubscription(channel);if(hasSubscribe&&!force){this._channels.subscribe([channel],callback,context);subscription.setDeferredStatus("succeeded");return subscription}this.connect(function(){this.info("Client ? attempting to subscribe to ?",this._clientId,channel);if(!force)this._channels.subscribe([channel],callback,context);this._send({channel:Faye.Channel.SUBSCRIBE,clientId:this._clientId,subscription:channel},function(response){if(!response.successful){subscription.setDeferredStatus("failed",Faye.Error.parse(response.error));return this._channels.unsubscribe(channel,callback,context)}var channels=[].concat(response.subscription);this.info("Subscription acknowledged for ? to ?",this._clientId,channels);subscription.setDeferredStatus("succeeded")},this)},this);return subscription},unsubscribe:function(channel,callback,context){if(channel instanceof Array)return Faye.map(channel,function(c){return this.unsubscribe(c,callback,context)},this);var dead=this._channels.unsubscribe(channel,callback,context);if(!dead)return;this.connect(function(){this.info("Client ? attempting to unsubscribe from ?",this._clientId,channel);this._send({channel:Faye.Channel.UNSUBSCRIBE,clientId:this._clientId,subscription:channel},function(response){if(!response.successful)return;var channels=[].concat(response.subscription);this.info("Unsubscription acknowledged for ? from ?",this._clientId,channels)},this)},this)},publish:function(channel,data){var publication=new Faye.Publication;this.connect(function(){this.info("Client ? queueing published message to ?: ?",this._clientId,channel,data);this._send({channel:channel,data:data,clientId:this._clientId},function(response){if(response.successful)publication.setDeferredStatus("succeeded");else publication.setDeferredStatus("failed",Faye.Error.parse(response.error))},this)},this);return publication},receiveMessage:function(message){var id=message.id,timeout,callback;if(message.successful!==undefined){callback=this._responseCallbacks[id];delete this._responseCallbacks[id]}this.pipeThroughExtensions("incoming",message,null,function(message){if(!message)return;if(message.advice)this._handleAdvice(message.advice);this._deliverMessage(message);if(callback)callback[0].call(callback[1],message)},this);if(this._transportUp===true)return;this._transportUp=true;this.trigger("transport:up")},messageError:function(messages,immediate){var retry=this._retry,self=this,id,message,timeout;for(var i=0,n=messages.length;i<n;i++){message=messages[i];id=message.id;if(immediate)this._transportSend(message);else Faye.ENV.setTimeout(function(){self._transportSend(message)},retry*1e3)}if(immediate||this._transportUp===false)return;this._transportUp=false;this.trigger("transport:down")},_selectTransport:function(transportTypes){Faye.Transport.get(this,transportTypes,this._disabled,function(transport){this.debug("Selected ? transport for ?",transport.connectionType,Faye.URI.stringify(transport.endpoint));if(transport===this._transport)return;if(this._transport)this._transport.close();this._transport=transport},this)},_send:function(message,callback,context){if(!this._transport)return;message.id=message.id||this._generateMessageId();this.pipeThroughExtensions("outgoing",message,null,function(message){if(!message)return;if(callback)this._responseCallbacks[message.id]=[callback,context];this._transportSend(message)},this)},_transportSend:function(message){if(!this._transport)return;var timeout=1.2*(this._advice.timeout||this._retry*1e3),envelope=new Faye.Envelope(message,timeout);envelope.errback(function(immediate){this.messageError([message],immediate)},this);this._transport.send(envelope)},_generateMessageId:function(){this._messageId+=1;if(this._messageId>=Math.pow(2,32))this._messageId=0;return this._messageId.toString(36)},_handleAdvice:function(advice){Faye.extend(this._advice,advice);if(this._advice.reconnect===this.HANDSHAKE&&this._state!==this.DISCONNECTED){this._state=this.UNCONNECTED;this._clientId=null;this._cycleConnection()}},_deliverMessage:function(message){if(!message.channel||message.data===undefined)return;this.info("Client ? calling listeners for ? with ?",this._clientId,message.channel,message.data);this._channels.distributeMessage(message)},_cycleConnection:function(){if(this._connectRequest){this._connectRequest=null;this.info("Closed connection for ?",this._clientId)}var self=this;Faye.ENV.setTimeout(function(){self.connect()},this._advice.interval)}});Faye.extend(Faye.Client.prototype,Faye.Deferrable);Faye.extend(Faye.Client.prototype,Faye.Publisher);Faye.extend(Faye.Client.prototype,Faye.Logging);Faye.extend(Faye.Client.prototype,Faye.Extensible);Faye.Transport=Faye.extend(Faye.Class({MAX_DELAY:0,batching:true,initialize:function(client,endpoint){this._client=client;this.endpoint=endpoint;this._outbox=[]},close:function(){},encode:function(envelopes){return""},send:function(envelope){var message=envelope.message;this.debug("Client ? sending message to ?: ?",this._client._clientId,Faye.URI.stringify(this.endpoint),message);if(!this.batching)return this.request([envelope]);this._outbox.push(envelope);if(message.channel===Faye.Channel.HANDSHAKE)return this.addTimeout("publish",.01,this.flush,this);if(message.channel===Faye.Channel.CONNECT)this._connectMessage=message;this.flushLargeBatch();this.addTimeout("publish",this.MAX_DELAY,this.flush,this)},flush:function(){this.removeTimeout("publish");if(this._outbox.length>1&&this._connectMessage)this._connectMessage.advice={timeout:0};this.request(this._outbox);this._connectMessage=null;this._outbox=[]},flushLargeBatch:function(){var string=this.encode(this._outbox);if(string.length<this._client.maxRequestSize)return;var last=this._outbox.pop();this.flush();if(last)this._outbox.push(last)},receive:function(envelopes,responses){var n=envelopes.length;while(n--)envelopes[n].setDeferredStatus("succeeded");responses=[].concat(responses);this.debug("Client ? received from ?: ?",this._client._clientId,Faye.URI.stringify(this.endpoint),responses);for(var i=0,n=responses.length;i<n;i++)this._client.receiveMessage(responses[i])},handleError:function(envelopes,immediate){var n=envelopes.length;while(n--)envelopes[n].setDeferredStatus("failed",immediate)},_getCookies:function(){var cookies=this._client.cookies;if(!cookies)return"";return cookies.getCookies({domain:this.endpoint.hostname,path:this.endpoint.path,secure:this.endpoint.protocol==="https:"}).toValueString()},_storeCookies:function(setCookie){if(!setCookie||!this._client.cookies)return;setCookie=[].concat(setCookie);var cookie;for(var i=0,n=setCookie.length;i<n;i++){cookie=this._client.cookies.setCookie(setCookie[i]);cookie=cookie[0]||cookie;cookie.domain=cookie.domain||this.endpoint.hostname}}}),{get:function(client,allowed,disabled,callback,context){var endpoint=client.endpoint;Faye.asyncEach(this._transports,function(pair,resume){var connType=pair[0],klass=pair[1],connEndpoint=client.endpoints[connType]||endpoint;if(Faye.indexOf(disabled,connType)>=0)return resume();
if(Faye.indexOf(allowed,connType)<0){klass.isUsable(client,connEndpoint,function(){});return resume()}klass.isUsable(client,connEndpoint,function(isUsable){if(!isUsable)return resume();var transport=klass.hasOwnProperty("create")?klass.create(client,connEndpoint):new klass(client,connEndpoint);callback.call(context,transport)})},function(){throw new Error("Could not find a usable connection type for "+Faye.URI.stringify(endpoint))})},register:function(type,klass){this._transports.push([type,klass]);klass.prototype.connectionType=type},_transports:[]});Faye.extend(Faye.Transport.prototype,Faye.Logging);Faye.extend(Faye.Transport.prototype,Faye.Timeouts);Faye.Event={_registry:[],on:function(element,eventName,callback,context){var wrapped=function(){callback.call(context)};if(element.addEventListener)element.addEventListener(eventName,wrapped,false);else element.attachEvent("on"+eventName,wrapped);this._registry.push({_element:element,_type:eventName,_callback:callback,_context:context,_handler:wrapped})},detach:function(element,eventName,callback,context){var i=this._registry.length,register;while(i--){register=this._registry[i];if(element&&element!==register._element||eventName&&eventName!==register._type||callback&&callback!==register._callback||context&&context!==register._context)continue;if(register._element.removeEventListener)register._element.removeEventListener(register._type,register._handler,false);else register._element.detachEvent("on"+register._type,register._handler);this._registry.splice(i,1);register=null}}};if(Faye.ENV.onunload!==undefined)Faye.Event.on(Faye.ENV,"unload",Faye.Event.detach,Faye.Event);if(typeof JSON!=="object"){JSON={}}(function(){"use strict";function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}Faye.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})};if(typeof JSON.stringify!=="function"){JSON.stringify=Faye.stringify}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();Faye.Transport.WebSocket=Faye.extend(Faye.Class(Faye.Transport,{UNCONNECTED:1,CONNECTING:2,CONNECTED:3,batching:false,isUsable:function(callback,context){this.callback(function(){callback.call(context,true)});this.errback(function(){callback.call(context,false)});this.connect()},request:function(envelopes){this.callback(function(socket){if(!socket)return;for(var i=0,n=envelopes.length;i<n;i++)this._pending.add(envelopes[i]);var messages=Faye.map(envelopes,function(e){return e.message});socket.send(Faye.toJSON(messages))},this);this.connect()},connect:function(){if(Faye.Transport.WebSocket._unloaded)return;this._state=this._state||this.UNCONNECTED;if(this._state!==this.UNCONNECTED)return;this._state=this.CONNECTING;var socket=this._createSocket();if(!socket)return this.setDeferredStatus("failed");var self=this;socket.onopen=function(){if(socket.headers)self._storeCookies(socket.headers["set-cookie"]);self._socket=socket;self._pending=new Faye.Set;self._state=self.CONNECTED;self._everConnected=true;self._ping();self.setDeferredStatus("succeeded",socket)};var closed=false;socket.onclose=socket.onerror=function(){if(closed)return;closed=true;var wasConnected=self._state===self.CONNECTED;socket.onopen=socket.onclose=socket.onerror=socket.onmessage=null;delete self._socket;self._state=self.UNCONNECTED;self.removeTimeout("ping");self.setDeferredStatus("unknown");var pending=self._pending?self._pending.toArray():[];delete self._pending;if(wasConnected){self.handleError(pending,true)}else if(self._everConnected){self.handleError(pending)}else{self.setDeferredStatus("failed")}};socket.onmessage=function(event){var messages=JSON.parse(event.data),envelopes=[],envelope;if(!messages)return;messages=[].concat(messages);for(var i=0,n=messages.length;i<n;i++){if(messages[i].successful===undefined)continue;envelope=self._pending.remove(messages[i]);if(envelope)envelopes.push(envelope)}self.receive(envelopes,messages)}},close:function(){if(!this._socket)return;this._socket.close()},_createSocket:function(){var url=Faye.Transport.WebSocket.getSocketUrl(this.endpoint),options={headers:Faye.copyObject(this._client.headers),ca:this._client.ca};options.headers["Cookie"]=this._getCookies();if(Faye.WebSocket)return new Faye.WebSocket.Client(url,[],options);if(Faye.ENV.MozWebSocket)return new MozWebSocket(url);if(Faye.ENV.WebSocket)return new WebSocket(url)},_ping:function(){if(!this._socket)return;this._socket.send("[]");this.addTimeout("ping",this._client._advice.timeout/2e3,this._ping,this)}}),{PROTOCOLS:{"http:":"ws:","https:":"wss:"},create:function(client,endpoint){var sockets=client.transports.websocket=client.transports.websocket||{};sockets[endpoint.href]=sockets[endpoint.href]||new this(client,endpoint);return sockets[endpoint.href]},getSocketUrl:function(endpoint){endpoint=Faye.copyObject(endpoint);endpoint.protocol=this.PROTOCOLS[endpoint.protocol];return Faye.URI.stringify(endpoint)},isUsable:function(client,endpoint,callback,context){this.create(client,endpoint).isUsable(callback,context)}});Faye.extend(Faye.Transport.WebSocket.prototype,Faye.Deferrable);Faye.Transport.register("websocket",Faye.Transport.WebSocket);if(Faye.Event)Faye.Event.on(Faye.ENV,"beforeunload",function(){Faye.Transport.WebSocket._unloaded=true});Faye.Transport.EventSource=Faye.extend(Faye.Class(Faye.Transport,{initialize:function(client,endpoint){Faye.Transport.prototype.initialize.call(this,client,endpoint);if(!Faye.ENV.EventSource)return this.setDeferredStatus("failed");this._xhr=new Faye.Transport.XHR(client,endpoint);endpoint=Faye.copyObject(endpoint);endpoint.pathname+="/"+client._clientId;var socket=new EventSource(Faye.URI.stringify(endpoint)),self=this;socket.onopen=function(){self._everConnected=true;self.setDeferredStatus("succeeded")};socket.onerror=function(){if(self._everConnected){self._client.messageError([])}else{self.setDeferredStatus("failed");socket.close()}};socket.onmessage=function(event){self.receive([],JSON.parse(event.data))};this._socket=socket},close:function(){if(!this._socket)return;this._socket.onopen=this._socket.onerror=this._socket.onmessage=null;this._socket.close();delete this._socket},isUsable:function(callback,context){this.callback(function(){callback.call(context,true)});this.errback(function(){callback.call(context,false)})},encode:function(envelopes){return this._xhr.encode(envelopes)},request:function(envelopes){this._xhr.request(envelopes)}}),{isUsable:function(client,endpoint,callback,context){var id=client._clientId;if(!id)return callback.call(context,false);Faye.Transport.XHR.isUsable(client,endpoint,function(usable){if(!usable)return callback.call(context,false);this.create(client,endpoint).isUsable(callback,context)},this)},create:function(client,endpoint){var sockets=client.transports.eventsource=client.transports.eventsource||{},id=client._clientId;endpoint=Faye.copyObject(endpoint);endpoint.pathname+="/"+(id||"");var url=Faye.URI.stringify(endpoint);sockets[url]=sockets[url]||new this(client,endpoint);return sockets[url]}});Faye.extend(Faye.Transport.EventSource.prototype,Faye.Deferrable);Faye.Transport.register("eventsource",Faye.Transport.EventSource);Faye.Transport.XHR=Faye.extend(Faye.Class(Faye.Transport,{encode:function(envelopes){var messages=Faye.map(envelopes,function(e){return e.message});return Faye.toJSON(messages)},request:function(envelopes){var path=this.endpoint.path,xhr=Faye.ENV.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,self=this;xhr.open("POST",path,true);xhr.setRequestHeader("Content-Type","application/json");xhr.setRequestHeader("Pragma","no-cache");xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");var headers=this._client.headers;for(var key in headers){if(!headers.hasOwnProperty(key))continue;xhr.setRequestHeader(key,headers[key])}var abort=function(){xhr.abort()};Faye.Event.on(Faye.ENV,"beforeunload",abort);xhr.onreadystatechange=function(){if(!xhr||xhr.readyState!==4)return;var parsedMessage=null,status=xhr.status,text=xhr.responseText,successful=status>=200&&status<300||status===304||status===1223;Faye.Event.detach(Faye.ENV,"beforeunload",abort);xhr.onreadystatechange=function(){};xhr=null;if(!successful)return self.handleError(envelopes);try{parsedMessage=JSON.parse(text)}catch(e){}if(parsedMessage)self.receive(envelopes,parsedMessage);else self.handleError(envelopes)};xhr.send(this.encode(envelopes))}}),{isUsable:function(client,endpoint,callback,context){callback.call(context,Faye.URI.isSameOrigin(endpoint))}});Faye.Transport.register("long-polling",Faye.Transport.XHR);Faye.Transport.CORS=Faye.extend(Faye.Class(Faye.Transport,{encode:function(envelopes){var messages=Faye.map(envelopes,function(e){return e.message});return"message="+encodeURIComponent(Faye.toJSON(messages))},request:function(envelopes){var xhrClass=Faye.ENV.XDomainRequest?XDomainRequest:XMLHttpRequest,xhr=new xhrClass,headers=this._client.headers,self=this,key;xhr.open("POST",Faye.URI.stringify(this.endpoint),true);if(xhr.setRequestHeader){xhr.setRequestHeader("Pragma","no-cache");for(key in headers){if(!headers.hasOwnProperty(key))continue;xhr.setRequestHeader(key,headers[key])}}var cleanUp=function(){if(!xhr)return false;xhr.onload=xhr.onerror=xhr.ontimeout=xhr.onprogress=null;xhr=null};xhr.onload=function(){var parsedMessage=null;try{parsedMessage=JSON.parse(xhr.responseText)}catch(e){}cleanUp();if(parsedMessage)self.receive(envelopes,parsedMessage);else self.handleError(envelopes)};xhr.onerror=xhr.ontimeout=function(){cleanUp();self.handleError(envelopes)};xhr.onprogress=function(){};xhr.send(this.encode(envelopes))}}),{isUsable:function(client,endpoint,callback,context){if(Faye.URI.isSameOrigin(endpoint))return callback.call(context,false);if(Faye.ENV.XDomainRequest)return callback.call(context,endpoint.protocol===Faye.ENV.location.protocol);if(Faye.ENV.XMLHttpRequest){var xhr=new Faye.ENV.XMLHttpRequest;return callback.call(context,xhr.withCredentials!==undefined)}return callback.call(context,false)}});Faye.Transport.register("cross-origin-long-polling",Faye.Transport.CORS);Faye.Transport.JSONP=Faye.extend(Faye.Class(Faye.Transport,{encode:function(envelopes){var messages=Faye.map(envelopes,function(e){return e.message});var url=Faye.copyObject(this.endpoint);url.query.message=Faye.toJSON(messages);url.query.jsonp="__jsonp"+Faye.Transport.JSONP._cbCount+"__";return Faye.URI.stringify(url)},request:function(envelopes){var messages=Faye.map(envelopes,function(e){return e.message}),head=document.getElementsByTagName("head")[0],script=document.createElement("script"),callbackName=Faye.Transport.JSONP.getCallbackName(),endpoint=Faye.copyObject(this.endpoint),self=this;endpoint.query.message=Faye.toJSON(messages);endpoint.query.jsonp=callbackName;Faye.ENV[callbackName]=function(data){if(!Faye.ENV[callbackName])return false;Faye.ENV[callbackName]=undefined;try{delete Faye.ENV[callbackName]}catch(e){}script.parentNode.removeChild(script);self.receive(envelopes,data)};script.type="text/javascript";script.src=Faye.URI.stringify(endpoint);head.appendChild(script)}}),{_cbCount:0,getCallbackName:function(){this._cbCount+=1;return"__jsonp"+this._cbCount+"__"},isUsable:function(client,endpoint,callback,context){callback.call(context,true)}});Faye.Transport.register("callback-polling",Faye.Transport.JSONP)})();(function(factory){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else if(typeof exports==="object"){factory(require("jquery"))}else{factory(jQuery)}})(function($,undefined){"use strict";if($.jstree){return}var instance_counter=0,ccp_node=false,ccp_mode=false,ccp_inst=false,themes_loaded=[],src=$("script:last").attr("src"),_d=document,_node=_d.createElement("LI"),_temp1,_temp2;_node.setAttribute("role","treeitem");_temp1=_d.createElement("I");_temp1.className="jstree-icon jstree-ocl";_node.appendChild(_temp1);_temp1=_d.createElement("A");_temp1.className="jstree-anchor";_temp1.setAttribute("href","#");_temp2=_d.createElement("I");_temp2.className="jstree-icon jstree-themeicon";_temp1.appendChild(_temp2);_node.appendChild(_temp1);_temp1=_temp2=null;$.jstree={version:"3.0.0-beta9",defaults:{plugins:[]},plugins:{},path:src&&src.indexOf("/")!==-1?src.replace(/\/[^\/]+$/,""):""};$.jstree.create=function(el,options){var tmp=new $.jstree.core(++instance_counter),opt=options;options=$.extend(true,{},$.jstree.defaults,options);if(opt&&opt.plugins){options.plugins=opt.plugins}$.each(options.plugins,function(i,k){if(i!=="core"){tmp=tmp.plugin(k,options[k])}});tmp.init(el,options);return tmp};$.jstree.core=function(id){this._id=id;this._cnt=0;this._data={core:{themes:{name:false,dots:false,icons:false},selected:[],last_error:{}}}};$.jstree.reference=function(needle){if(needle&&!$(needle).length){if(needle.id){needle=needle.id}var tmp=null;$(".jstree").each(function(){var inst=$(this).data("jstree");if(inst&&inst._model.data[needle]){tmp=inst;return false}});return tmp}return $(needle).closest(".jstree").data("jstree")};$.fn.jstree=function(arg){var is_method=typeof arg==="string",args=Array.prototype.slice.call(arguments,1),result=null;this.each(function(){var instance=$.jstree.reference(this),method=is_method&&instance?instance[arg]:null;result=is_method&&method?method.apply(instance,args):null;if(!instance&&!is_method&&(arg===undefined||$.isPlainObject(arg))){$(this).data("jstree",new $.jstree.create(this,arg))}if(instance&&!is_method){result=instance}if(result!==null&&result!==undefined){return false}});return result!==null&&result!==undefined?result:this};$.expr[":"].jstree=$.expr.createPseudo(function(search){return function(a){return $(a).hasClass("jstree")&&$(a).data("jstree")!==undefined}});$.jstree.defaults.core={data:false,strings:false,check_callback:false,error:$.noop,animation:200,multiple:true,themes:{name:false,url:false,dir:false,dots:true,icons:true,stripes:false,variant:false,responsive:true},expand_selected_onload:true};$.jstree.core.prototype={plugin:function(deco,opts){var Child=$.jstree.plugins[deco];if(Child){this._data[deco]={};Child.prototype=this;return new Child(opts,this)}return this},init:function(el,options){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:false}}},changed:[],force_full_redraw:false,redraw_timeout:false,default_state:{loaded:true,opened:false,selected:false,disabled:false}};this.element=$(el).addClass("jstree jstree-"+this._id);this.settings=options;this.element.bind("destroyed",$.proxy(this.teardown,this));this._data.core.ready=false;this._data.core.loaded=false;this._data.core.rtl=this.element.css("direction")==="rtl";this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl");this.element.attr("role","tree");this.bind();this.trigger("init");this._data.core.original_container_html=this.element.find(" > ul > li").clone(true);this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return this.nodeType===3&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove();this.element.html("<"+"ul class='jstree-container-ul'><"+"li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'></i><"+"a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>");this._data.core.li_height=this.get_container_ul().children("li:eq(0)").height()||18;this.trigger("loading");this.load_node("#")},destroy:function(){this.element.unbind("destroyed",this.teardown);this.teardown()},teardown:function(){this.unbind();this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")});this.element=null},bind:function(){this.element.on("dblclick.jstree",function(){if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){var sel=window.getSelection();try{sel.removeAllRanges();sel.collapse()}catch(ignore){}}}}).on("click.jstree",".jstree-ocl",$.proxy(function(e){this.toggle_node(e.target)},this)).on("click.jstree",".jstree-anchor",$.proxy(function(e){e.preventDefault();$(e.currentTarget).focus();this.activate_node(e.currentTarget,e)},this)).on("keydown.jstree",".jstree-anchor",$.proxy(function(e){var o=null;switch(e.which){case 13:case 32:e.type="click";$(e.currentTarget).trigger(e);break;case 37:e.preventDefault();if(this.is_open(e.currentTarget)){this.close_node(e.currentTarget)}else{o=this.get_prev_dom(e.currentTarget);if(o&&o.length){o.children(".jstree-anchor").focus()}}break;case 38:e.preventDefault();o=this.get_prev_dom(e.currentTarget);if(o&&o.length){o.children(".jstree-anchor").focus()}break;case 39:e.preventDefault();if(this.is_closed(e.currentTarget)){this.open_node(e.currentTarget,function(o){this.get_node(o,true).children(".jstree-anchor").focus()})}else{o=this.get_next_dom(e.currentTarget);if(o&&o.length){o.children(".jstree-anchor").focus()}}break;case 40:e.preventDefault();o=this.get_next_dom(e.currentTarget);if(o&&o.length){o.children(".jstree-anchor").focus()}break;case 46:e.preventDefault();o=this.get_node(e.currentTarget);if(o&&o.id&&o.id!=="#"){o=this.is_selected(o)?this.get_selected():o}break;case 113:e.preventDefault();o=this.get_node(e.currentTarget);break;default:break}},this)).on("load_node.jstree",$.proxy(function(e,data){if(data.status){if(data.node.id==="#"&&!this._data.core.loaded){this._data.core.loaded=true;this.trigger("loaded")}if(!this._data.core.ready&&!this.get_container_ul().find(".jstree-loading:eq(0)").length){this._data.core.ready=true;if(this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var tmp=[],i,j;for(i=0,j=this._data.core.selected.length;i<j;i++){tmp=tmp.concat(this._model.data[this._data.core.selected[i]].parents)}tmp=$.vakata.array_unique(tmp);for(i=0,j=tmp.length;i<j;i++){this.open_node(tmp[i],false,0)}}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}setTimeout($.proxy(function(){this.trigger("ready")},this),0)}}},this)).on("init.jstree",$.proxy(function(){var s=this.settings.core.themes;this._data.core.themes.dots=s.dots;this._data.core.themes.stripes=s.stripes;this._data.core.themes.icons=s.icons;this.set_theme(s.name||"default",s.url);this.set_theme_variant(s.variant)},this)).on("loading.jstree",$.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"]();this[this._data.core.themes.icons?"show_icons":"hide_icons"]();this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("focus.jstree",".jstree-anchor",$.proxy(function(e){this.element.find(".jstree-hovered").not(e.currentTarget).mouseleave();$(e.currentTarget).mouseenter()},this)).on("mouseenter.jstree",".jstree-anchor",$.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",$.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree");$(document).off(".jstree-"+this._id)},trigger:function(ev,data){if(!data){data={}}data.instance=this;this.element.triggerHandler(ev.replace(".jstree","")+".jstree",data)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children("ul:eq(0)")},get_string:function(key){var a=this.settings.core.strings;if($.isFunction(a)){return a.call(this,key)}if(a&&a[key]){return a[key]}return key},_firstChild:function(dom){dom=dom?dom.firstChild:null;while(dom!==null&&dom.nodeType!==1){dom=dom.nextSibling}return dom},_nextSibling:function(dom){dom=dom?dom.nextSibling:null;while(dom!==null&&dom.nodeType!==1){dom=dom.nextSibling}return dom},_previousSibling:function(dom){dom=dom?dom.previousSibling:null;while(dom!==null&&dom.nodeType!==1){dom=dom.previousSibling}return dom},get_node:function(obj,as_dom){if(obj&&obj.id){obj=obj.id}var dom;try{if(this._model.data[obj]){obj=this._model.data[obj]}else if(((dom=$(obj,this.element)).length||(dom=$("#"+obj,this.element)).length)&&this._model.data[dom.closest("li").attr("id")]){obj=this._model.data[dom.closest("li").attr("id")]}else if((dom=$(obj,this.element)).length&&dom.hasClass("jstree")){obj=this._model.data["#"]}else{return false}if(as_dom){obj=obj.id==="#"?this.element:$(document.getElementById(obj.id))}return obj}catch(ex){return false}},get_path:function(obj,glue,ids){obj=obj.parents?obj:this.get_node(obj);if(!obj||obj.id==="#"||!obj.parents){return false}var i,j,p=[];p.push(ids?obj.id:obj.text);for(i=0,j=obj.parents.length;i<j;i++){p.push(ids?obj.parents[i]:this.get_text(obj.parents[i]))}p=p.reverse().slice(1);return glue?p.join(glue):p},get_next_dom:function(obj,strict){var tmp;obj=this.get_node(obj,true);if(obj[0]===this.element[0]){tmp=this._firstChild(this.get_container_ul()[0]);return tmp?$(tmp):false}if(!obj||!obj.length){return false}if(strict){tmp=this._nextSibling(obj[0]);return tmp?$(tmp):false}if(obj.hasClass("jstree-open")){tmp=this._firstChild(obj.children("ul")[0]);return tmp?$(tmp):false}if((tmp=this._nextSibling(obj[0]))!==null){return $(tmp)}return obj.parentsUntil(".jstree","li").next("li").eq(0)},get_prev_dom:function(obj,strict){var tmp;obj=this.get_node(obj,true);if(obj[0]===this.element[0]){tmp=this.get_container_ul()[0].lastChild;return tmp?$(tmp):false}if(!obj||!obj.length){return false}if(strict){tmp=this._previousSibling(obj[0]);return tmp?$(tmp):false}if((tmp=this._previousSibling(obj[0]))!==null){obj=$(tmp);while(obj.hasClass("jstree-open")){obj=obj.children("ul:eq(0)").children("li:last")}return obj}tmp=obj[0].parentNode.parentNode;return tmp&&tmp.tagName==="LI"?$(tmp):false},get_parent:function(obj){obj=this.get_node(obj);if(!obj||obj.id==="#"){return false}return obj.parent},get_children_dom:function(obj){obj=this.get_node(obj,true);if(obj[0]===this.element[0]){return this.get_container_ul().children("li")}if(!obj||!obj.length){return false}return obj.children("ul").children("li")},is_parent:function(obj){obj=this.get_node(obj);return obj&&(obj.state.loaded===false||obj.children.length>0)},is_loaded:function(obj){obj=this.get_node(obj);return obj&&obj.state.loaded},is_loading:function(obj){obj=this.get_node(obj,true);return obj&&obj.hasClass("jstree-loading")},is_open:function(obj){obj=this.get_node(obj);return obj&&obj.state.opened},is_closed:function(obj){obj=this.get_node(obj);return obj&&this.is_parent(obj)&&!obj.state.opened},is_leaf:function(obj){return!this.is_parent(obj)},load_node:function(obj,callback){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.load_node(obj[t1],callback)}return true}obj=this.get_node(obj);if(!obj){callback.call(this,obj,false);return false}this.get_node(obj,true).addClass("jstree-loading");this._load_node(obj,$.proxy(function(status){obj.state.loaded=status;this.get_node(obj,true).removeClass("jstree-loading");this.trigger("load_node",{node:obj,status:status});if(callback){callback.call(this,obj,status)}},this));return true},_load_node:function(obj,callback){var s=this.settings.core.data,t;if(!s){return callback.call(this,obj.id==="#"?this._append_html_data(obj,this._data.core.original_container_html.clone(true)):false)}if($.isFunction(s)){return s.call(this,obj,$.proxy(function(d){return d===false?callback.call(this,false):callback.call(this,this[typeof d==="string"?"_append_html_data":"_append_json_data"](obj,typeof d==="string"?$(d):d))},this))}if(typeof s==="object"){if(s.url){s=$.extend(true,{},s);if($.isFunction(s.url)){s.url=s.url.call(this,obj)}if($.isFunction(s.data)){s.data=s.data.call(this,obj)}return $.ajax(s).done($.proxy(function(d,t,x){var type=x.getResponseHeader("Content-Type");if(type.indexOf("json")!==-1){return callback.call(this,this._append_json_data(obj,d))}if(type.indexOf("html")!==-1){return callback.call(this,this._append_html_data(obj,$(d)))}},this)).fail($.proxy(function(){callback.call(this,false);this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify(s)};this.settings.core.error.call(this,this._data.core.last_error)},this))}t=$.isArray(s)||$.isPlainObject(s)?JSON.parse(JSON.stringify(s)):s;return callback.call(this,this._append_json_data(obj,t))}if(typeof s==="string"){return callback.call(this,this._append_html_data(obj,s))}return callback.call(this,false)},_node_changed:function(obj){obj=this.get_node(obj);if(obj){this._model.changed.push(obj.id)}},_append_html_data:function(dom,data){dom=this.get_node(dom);dom.children=[];dom.children_d=[];var dat=data.is("ul")?data.children():data,par=dom.id,chd=[],dpc=[],m=this._model.data,p=m[par],s=this._data.core.selected.length,tmp,i,j;dat.each($.proxy(function(i,v){tmp=this._parse_model_from_html($(v),par,p.parents.concat());if(tmp){chd.push(tmp);dpc.push(tmp);if(m[tmp].children_d.length){dpc=dpc.concat(m[tmp].children_d)}}},this));p.children=chd;p.children_d=dpc;for(i=0,j=p.parents.length;i<j;i++){m[p.parents[i]].children_d=m[p.parents[i]].children_d.concat(dpc)}this.trigger("model",{nodes:dpc,parent:par});if(par!=="#"){this._node_changed(par);this.redraw()}else{this.get_container_ul().children(".jstree-initial-node").remove();this.redraw(true)}if(this._data.core.selected.length!==s){this.trigger("changed",{action:"model",selected:this._data.core.selected})}return true},_append_json_data:function(dom,data){dom=this.get_node(dom);dom.children=[];dom.children_d=[];var dat=data,par=dom.id,chd=[],dpc=[],m=this._model.data,p=m[par],s=this._data.core.selected.length,tmp,i,j;if(dat.d){dat=dat.d;if(typeof dat==="string"){dat=JSON.parse(dat)}}if(!$.isArray(dat)){dat=[dat]}if(dat.length&&dat[0].id!==undefined&&dat[0].parent!==undefined){for(i=0,j=dat.length;i<j;i++){if(!dat[i].children){dat[i].children=[]}m[dat[i].id]=dat[i]}for(i=0,j=dat.length;i<j;i++){m[dat[i].parent].children.push(dat[i].id);p.children_d.push(dat[i].id)}for(i=0,j=p.children.length;i<j;i++){tmp=this._parse_model_from_flat_json(m[p.children[i]],par,p.parents.concat());dpc.push(tmp);if(m[tmp].children_d.length){dpc=dpc.concat(m[tmp].children_d)}}}else{for(i=0,j=dat.length;i<j;i++){tmp=this._parse_model_from_json(dat[i],par,p.parents.concat());if(tmp){chd.push(tmp);dpc.push(tmp);if(m[tmp].children_d.length){dpc=dpc.concat(m[tmp].children_d)}}}p.children=chd;p.children_d=dpc;for(i=0,j=p.parents.length;i<j;i++){m[p.parents[i]].children_d=m[p.parents[i]].children_d.concat(dpc)}}this.trigger("model",{nodes:dpc,parent:par});if(par!=="#"){this._node_changed(par);this.redraw()}else{this.redraw(true)}if(this._data.core.selected.length!==s){this.trigger("changed",{action:"model",selected:this._data.core.selected})}return true},_parse_model_from_html:function(d,p,ps){if(!ps){ps=[]}else{ps=[].concat(ps)}if(p){ps.unshift(p)}var c,e,m=this._model.data,data={id:false,text:false,icon:true,parent:p,parents:ps,children:[],children_d:[],data:null,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false},i,tmp,tid;for(i in this._model.default_state){if(this._model.default_state.hasOwnProperty(i)){data.state[i]=this._model.default_state[i]}}tmp=$.vakata.attributes(d,true);$.each(tmp,function(i,v){v=$.trim(v);if(!v.length){return true}data.li_attr[i]=v;if(i==="id"){data.id=v}});tmp=d.children("a").eq(0);if(tmp.length){tmp=$.vakata.attributes(tmp,true);$.each(tmp,function(i,v){v=$.trim(v);if(v.length){data.a_attr[i]=v}})}tmp=d.children("a:eq(0)").length?d.children("a:eq(0)").clone():d.clone();tmp.children("ins, i, ul").remove();tmp=tmp.html();tmp=$("<div />").html(tmp);data.text=tmp.html();tmp=d.data();data.data=tmp?$.extend(true,{},tmp):null;data.state.opened=d.hasClass("jstree-open");data.state.selected=d.children("a").hasClass("jstree-clicked");data.state.disabled=d.children("a").hasClass("jstree-disabled");if(data.data&&data.data.jstree){for(i in data.data.jstree){if(data.data.jstree.hasOwnProperty(i)){data.state[i]=data.data.jstree[i]}}}tmp=d.children("a").children(".jstree-themeicon");if(tmp.length){data.icon=tmp.hasClass("jstree-themeicon-hidden")?false:tmp.attr("rel")}if(data.state.icon){data.icon=data.state.icon}tmp=d.children("ul").children("li");do{tid="j"+this._id+"_"+ ++this._cnt}while(m[tid]);data.id=data.li_attr.id||tid;if(tmp.length){tmp.each($.proxy(function(i,v){c=this._parse_model_from_html($(v),data.id,ps);e=this._model.data[c];data.children.push(c);if(e.children_d.length){data.children_d=data.children_d.concat(e.children_d)}},this));data.children_d=data.children_d.concat(data.children)}else{if(d.hasClass("jstree-closed")){data.state.loaded=false}}if(data.li_attr["class"]){data.li_attr["class"]=data.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")}if(data.a_attr["class"]){data.a_attr["class"]=data.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")}m[data.id]=data;if(data.state.selected){this._data.core.selected.push(data.id)}return data.id},_parse_model_from_flat_json:function(d,p,ps){if(!ps){ps=[]}else{ps=ps.concat()}if(p){ps.unshift(p)}var tid=d.id,m=this._model.data,df=this._model.default_state,i,j,c,e,tmp={id:tid,text:d.text||"",icon:d.icon!==undefined?d.icon:true,parent:p,parents:ps,children:d.children||[],children_d:d.children_d||[],data:d.data,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false};
for(i in df){if(df.hasOwnProperty(i)){tmp.state[i]=df[i]}}if(d&&d.data&&d.data.jstree&&d.data.jstree.icon){tmp.icon=d.data.jstree.icon}if(d&&d.data){tmp.data=d.data;if(d.data.jstree){for(i in d.data.jstree){if(d.data.jstree.hasOwnProperty(i)){tmp.state[i]=d.data.jstree[i]}}}}if(d&&typeof d.state==="object"){for(i in d.state){if(d.state.hasOwnProperty(i)){tmp.state[i]=d.state[i]}}}if(d&&typeof d.li_attr==="object"){for(i in d.li_attr){if(d.li_attr.hasOwnProperty(i)){tmp.li_attr[i]=d.li_attr[i]}}}if(!tmp.li_attr.id){tmp.li_attr.id=tid}if(d&&typeof d.a_attr==="object"){for(i in d.a_attr){if(d.a_attr.hasOwnProperty(i)){tmp.a_attr[i]=d.a_attr[i]}}}if(d&&d.children&&d.children===true){tmp.state.loaded=false;tmp.children=[];tmp.children_d=[]}m[tmp.id]=tmp;for(i=0,j=tmp.children.length;i<j;i++){c=this._parse_model_from_flat_json(m[tmp.children[i]],tmp.id,ps);e=m[c];tmp.children_d.push(c);if(e.children_d.length){tmp.children_d=tmp.children_d.concat(e.children_d)}}delete d.data;delete d.children;m[tmp.id].original=d;if(tmp.state.selected){this._data.core.selected.push(tmp.id)}return tmp.id},_parse_model_from_json:function(d,p,ps){if(!ps){ps=[]}else{ps=ps.concat()}if(p){ps.unshift(p)}var tid=false,i,j,c,e,m=this._model.data,df=this._model.default_state,tmp;do{tid="j"+this._id+"_"+ ++this._cnt}while(m[tid]);tmp={id:false,text:typeof d==="string"?d:"",icon:typeof d==="object"&&d.icon!==undefined?d.icon:true,parent:p,parents:ps,children:[],children_d:[],data:null,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false};for(i in df){if(df.hasOwnProperty(i)){tmp.state[i]=df[i]}}if(d&&d.id){tmp.id=d.id}if(d&&d.text){tmp.text=d.text}if(d&&d.data&&d.data.jstree&&d.data.jstree.icon){tmp.icon=d.data.jstree.icon}if(d&&d.data){tmp.data=d.data;if(d.data.jstree){for(i in d.data.jstree){if(d.data.jstree.hasOwnProperty(i)){tmp.state[i]=d.data.jstree[i]}}}}if(d&&typeof d.state==="object"){for(i in d.state){if(d.state.hasOwnProperty(i)){tmp.state[i]=d.state[i]}}}if(d&&typeof d.li_attr==="object"){for(i in d.li_attr){if(d.li_attr.hasOwnProperty(i)){tmp.li_attr[i]=d.li_attr[i]}}}if(tmp.li_attr.id&&!tmp.id){tmp.id=tmp.li_attr.id}if(!tmp.id){tmp.id=tid}if(!tmp.li_attr.id){tmp.li_attr.id=tmp.id}if(d&&typeof d.a_attr==="object"){for(i in d.a_attr){if(d.a_attr.hasOwnProperty(i)){tmp.a_attr[i]=d.a_attr[i]}}}if(d&&d.children&&d.children.length){for(i=0,j=d.children.length;i<j;i++){c=this._parse_model_from_json(d.children[i],tmp.id,ps);e=m[c];tmp.children.push(c);if(e.children_d.length){tmp.children_d=tmp.children_d.concat(e.children_d)}}tmp.children_d=tmp.children_d.concat(tmp.children)}if(d&&d.children&&d.children===true){tmp.state.loaded=false;tmp.children=[];tmp.children_d=[]}delete d.data;delete d.children;tmp.original=d;m[tmp.id]=tmp;if(tmp.state.selected){this._data.core.selected.push(tmp.id)}return tmp.id},_redraw:function(){var nodes=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),f=document.createElement("UL"),tmp,i,j;for(i=0,j=nodes.length;i<j;i++){tmp=this.redraw_node(nodes[i],true,this._model.force_full_redraw);if(tmp&&this._model.force_full_redraw){f.appendChild(tmp)}}if(this._model.force_full_redraw){f.className=this.get_container_ul()[0].className;this.element.empty().append(f)}this._model.force_full_redraw=false;this._model.changed=[];this.trigger("redraw",{nodes:nodes})},redraw:function(full){if(full){this._model.force_full_redraw=true}this._redraw()},redraw_node:function(node,deep,is_callback){var obj=this.get_node(node),par=false,ind=false,old=false,i=false,j=false,k=false,c="",d=document,m=this._model.data,f=false,s=false;if(!obj){return false}if(obj.id==="#"){return this.redraw(true)}deep=deep||obj.children.length===0;node=d.getElementById(obj.id);if(!node){deep=true;if(!is_callback){par=obj.parent!=="#"?$("#"+obj.parent,this.element)[0]:null;if(par!==null&&(!par||!m[obj.parent].state.opened)){return false}ind=$.inArray(obj.id,par===null?m["#"].children:m[obj.parent].children)}}else{node=$(node);if(!is_callback){par=node.parent().parent()[0];if(par===this.element[0]){par=null}ind=node.index()}if(!deep&&obj.children.length&&!node.children("ul").length){deep=true}if(!deep){old=node.children("UL")[0]}s=node.attr("aria-selected");f=node.children(".jstree-anchor")[0]===document.activeElement;node.remove()}node=_node.cloneNode(true);c="jstree-node ";for(i in obj.li_attr){if(obj.li_attr.hasOwnProperty(i)){if(i==="id"){continue}if(i!=="class"){node.setAttribute(i,obj.li_attr[i])}else{c+=obj.li_attr[i]}}}if(s&&s!=="false"){node.setAttribute("aria-selected",true)}if(!obj.children.length&&obj.state.loaded){c+=" jstree-leaf"}else{c+=obj.state.opened?" jstree-open":" jstree-closed";node.setAttribute("aria-expanded",obj.state.opened)}if(obj.parent!==null&&m[obj.parent].children[m[obj.parent].children.length-1]===obj.id){c+=" jstree-last"}node.id=obj.id;node.className=c;c=(obj.state.selected?" jstree-clicked":"")+(obj.state.disabled?" jstree-disabled":"");for(j in obj.a_attr){if(obj.a_attr.hasOwnProperty(j)){if(j==="href"&&obj.a_attr[j]==="#"){continue}if(j!=="class"){node.childNodes[1].setAttribute(j,obj.a_attr[j])}else{c+=" "+obj.a_attr[j]}}}if(c.length){node.childNodes[1].className="jstree-anchor "+c}if(obj.icon&&obj.icon!==true||obj.icon===false){if(obj.icon===false){node.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden"}else if(obj.icon.indexOf("/")===-1&&obj.icon.indexOf(".")===-1){node.childNodes[1].childNodes[0].className+=" "+obj.icon+" jstree-themeicon-custom"}else{node.childNodes[1].childNodes[0].style.backgroundImage="url("+obj.icon+")";node.childNodes[1].childNodes[0].style.backgroundPosition="center center";node.childNodes[1].childNodes[0].style.backgroundSize="auto";node.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom"}}node.childNodes[1].innerHTML+=obj.text;if(deep&&obj.children.length&&obj.state.opened){k=d.createElement("UL");k.setAttribute("role","group");k.className="jstree-children";for(i=0,j=obj.children.length;i<j;i++){k.appendChild(this.redraw_node(obj.children[i],deep,true))}node.appendChild(k)}if(old){node.appendChild(old)}if(!is_callback){if(!par){par=this.element[0]}if(!par.getElementsByTagName("UL").length){i=d.createElement("UL");i.setAttribute("role","group");i.className="jstree-children";par.appendChild(i);par=i}else{par=par.getElementsByTagName("UL")[0]}if(ind<par.childNodes.length){par.insertBefore(node,par.childNodes[ind])}else{par.appendChild(node)}if(f){node.childNodes[1].focus()}}return node},open_node:function(obj,callback,animation){var t1,t2,d,t;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.open_node(obj[t1],callback,animation)}return true}obj=this.get_node(obj);if(!obj||obj.id==="#"){return false}animation=animation===undefined?this.settings.core.animation:animation;if(!this.is_closed(obj)){if(callback){callback.call(this,obj,false)}return false}if(!this.is_loaded(obj)){if(this.is_loading(obj)){return setTimeout($.proxy(function(){this.open_node(obj,callback,animation)},this),500)}this.load_node(obj,function(o,ok){return ok?this.open_node(o,callback,animation):callback?callback.call(this,o,false):false})}else{d=this.get_node(obj,true);t=this;if(d.length){if(obj.children.length&&!this._firstChild(d.children("ul")[0])){obj.state.opened=true;this.redraw_node(obj,true);d=this.get_node(obj,true)}if(!animation){d[0].className=d[0].className.replace("jstree-closed","jstree-open");d[0].setAttribute("aria-expanded",true)}else{d.children("ul").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",true).children("ul").stop(true,true).slideDown(animation,function(){this.style.display="";t.trigger("after_open",{node:obj})})}}obj.state.opened=true;if(callback){callback.call(this,obj,true)}this.trigger("open_node",{node:obj});if(!animation||!d.length){this.trigger("after_open",{node:obj})}}},_open_to:function(obj){obj=this.get_node(obj);if(!obj||obj.id==="#"){return false}var i,j,p=obj.parents;for(i=0,j=p.length;i<j;i+=1){if(i!=="#"){this.open_node(p[i],false,0)}}return $(document.getElementById(obj.id))},close_node:function(obj,animation){var t1,t2,t,d;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.close_node(obj[t1],animation)}return true}obj=this.get_node(obj);if(!obj||obj.id==="#"){return false}animation=animation===undefined?this.settings.core.animation:animation;t=this;d=this.get_node(obj,true);if(d.length){if(!animation){d[0].className=d[0].className.replace("jstree-open","jstree-closed");d.attr("aria-expanded",false).children("ul").remove()}else{d.children("ul").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",false).children("ul").stop(true,true).slideUp(animation,function(){this.style.display="";d.children("ul").remove();t.trigger("after_close",{node:obj})})}}obj.state.opened=false;this.trigger("close_node",{node:obj});if(!animation||!d.length){this.trigger("after_close",{node:obj})}},toggle_node:function(obj){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.toggle_node(obj[t1])}return true}if(this.is_closed(obj)){return this.open_node(obj)}if(this.is_open(obj)){return this.close_node(obj)}},open_all:function(obj,animation,original_obj){if(!obj){obj="#"}obj=this.get_node(obj);if(!obj){return false}var dom=obj.id==="#"?this.get_container_ul():this.get_node(obj,true),i,j,_this;if(!dom.length){for(i=0,j=obj.children_d.length;i<j;i++){if(this.is_closed(this._model.data[obj.children_d[i]])){this._model.data[obj.children_d[i]].state.opened=true}}return this.trigger("open_all",{node:obj})}original_obj=original_obj||dom;_this=this;dom=this.is_closed(obj)?dom.find("li.jstree-closed").addBack():dom.find("li.jstree-closed");dom.each(function(){_this.open_node(this,function(node,status){if(status&&this.is_parent(node)){this.open_all(node,animation,original_obj)}},animation||0)});if(original_obj.find("li.jstree-closed").length===0){this.trigger("open_all",{node:this.get_node(original_obj)})}},close_all:function(obj,animation){if(!obj){obj="#"}obj=this.get_node(obj);if(!obj){return false}var dom=obj.id==="#"?this.get_container_ul():this.get_node(obj,true),_this=this,i,j;if(!dom.length){for(i=0,j=obj.children_d.length;i<j;i++){this._model.data[obj.children_d[i]].state.opened=false}return this.trigger("close_all",{node:obj})}dom=this.is_open(obj)?dom.find("li.jstree-open").addBack():dom.find("li.jstree-open");dom.vakata_reverse().each(function(){_this.close_node(this,animation||0)});this.trigger("close_all",{node:obj})},is_disabled:function(obj){obj=this.get_node(obj);return obj&&obj.state&&obj.state.disabled},enable_node:function(obj){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.enable_node(obj[t1])}return true}obj=this.get_node(obj);if(!obj||obj.id==="#"){return false}obj.state.disabled=false;this.get_node(obj,true).children(".jstree-anchor").removeClass("jstree-disabled");this.trigger("enable_node",{node:obj})},disable_node:function(obj){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.disable_node(obj[t1])}return true}obj=this.get_node(obj);if(!obj||obj.id==="#"){return false}obj.state.disabled=true;this.get_node(obj,true).children(".jstree-anchor").addClass("jstree-disabled");this.trigger("disable_node",{node:obj})},activate_node:function(obj,e){if(this.is_disabled(obj)){return false}if(!this.settings.core.multiple||!e.metaKey&&!e.ctrlKey&&!e.shiftKey||e.shiftKey&&(!this._data.core.last_clicked||!this.get_parent(obj)||this.get_parent(obj)!==this._data.core.last_clicked.parent)){if(!this.settings.core.multiple&&(e.metaKey||e.ctrlKey||e.shiftKey)&&this.is_selected(obj)){this.deselect_node(obj,false,false,e)}else{this.deselect_all(true);this.select_node(obj,false,false,e);this._data.core.last_clicked=this.get_node(obj)}}else{if(e.shiftKey){var o=this.get_node(obj).id,l=this._data.core.last_clicked.id,p=this.get_node(this._data.core.last_clicked.parent).children,c=false,i,j;for(i=0,j=p.length;i<j;i+=1){if(p[i]===o){c=!c}if(p[i]===l){c=!c}if(c||p[i]===o||p[i]===l){this.select_node(p[i],false,false,e)}else{this.deselect_node(p[i],false,false,e)}}}else{if(!this.is_selected(obj)){this.select_node(obj,false,false,e)}else{this.deselect_node(obj,false,false,e)}}}this.trigger("activate_node",{node:this.get_node(obj)})},hover_node:function(obj){obj=this.get_node(obj,true);if(!obj||!obj.length||obj.children(".jstree-hovered").length){return false}var o=this.element.find(".jstree-hovered"),t=this.element;if(o&&o.length){this.dehover_node(o)}obj.children(".jstree-anchor").addClass("jstree-hovered");this.trigger("hover_node",{node:this.get_node(obj)});setTimeout(function(){t.attr("aria-activedescendant",obj[0].id);obj.attr("aria-selected",true)},0)},dehover_node:function(obj){obj=this.get_node(obj,true);if(!obj||!obj.length||!obj.children(".jstree-hovered").length){return false}obj.attr("aria-selected",false).children(".jstree-anchor").removeClass("jstree-hovered");this.trigger("dehover_node",{node:this.get_node(obj)})},select_node:function(obj,supress_event,prevent_open,e){var dom,t1,t2,th;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.select_node(obj[t1],supress_event,prevent_open,e)}return true}obj=this.get_node(obj);if(!obj||obj.id==="#"){return false}dom=this.get_node(obj,true);if(!obj.state.selected){obj.state.selected=true;this._data.core.selected.push(obj.id);if(!prevent_open){dom=this._open_to(obj)}if(dom&&dom.length){dom.children(".jstree-anchor").addClass("jstree-clicked")}this.trigger("select_node",{node:obj,selected:this._data.core.selected,event:e});if(!supress_event){this.trigger("changed",{action:"select_node",node:obj,selected:this._data.core.selected,event:e})}}},deselect_node:function(obj,supress_event,e){var t1,t2,dom;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.deselect_node(obj[t1],supress_event,e)}return true}obj=this.get_node(obj);if(!obj||obj.id==="#"){return false}dom=this.get_node(obj,true);if(obj.state.selected){obj.state.selected=false;this._data.core.selected=$.vakata.array_remove_item(this._data.core.selected,obj.id);if(dom.length){dom.children(".jstree-anchor").removeClass("jstree-clicked")}this.trigger("deselect_node",{node:obj,selected:this._data.core.selected,event:e});if(!supress_event){this.trigger("changed",{action:"deselect_node",node:obj,selected:this._data.core.selected,event:e})}}},select_all:function(supress_event){var tmp=this._data.core.selected.concat([]),i,j;this._data.core.selected=this._model.data["#"].children_d.concat();for(i=0,j=this._data.core.selected.length;i<j;i++){if(this._model.data[this._data.core.selected[i]]){this._model.data[this._data.core.selected[i]].state.selected=true}}this.redraw(true);this.trigger("select_all",{selected:this._data.core.selected});if(!supress_event){this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:tmp})}},deselect_all:function(supress_event){var tmp=this._data.core.selected.concat([]),i,j;for(i=0,j=this._data.core.selected.length;i<j;i++){if(this._model.data[this._data.core.selected[i]]){this._model.data[this._data.core.selected[i]].state.selected=false}}this._data.core.selected=[];this.element.find(".jstree-clicked").removeClass("jstree-clicked");this.trigger("deselect_all",{selected:this._data.core.selected,node:tmp});if(!supress_event){this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:tmp})}},is_selected:function(obj){obj=this.get_node(obj);if(!obj||obj.id==="#"){return false}return obj.state.selected},get_selected:function(full){return full?$.map(this._data.core.selected,$.proxy(function(i){return this.get_node(i)},this)):this._data.core.selected},get_state:function(){var state={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}},i;for(i in this._model.data){if(this._model.data.hasOwnProperty(i)){if(i!=="#"){if(this._model.data[i].state.opened){state.core.open.push(i)}if(this._model.data[i].state.selected){state.core.selected.push(i)}}}}return state},set_state:function(state,callback){if(state){if(state.core){var res,n,t,_this;if(state.core.open){if(!$.isArray(state.core.open)){delete state.core.open;this.set_state(state,callback);return false}res=true;n=false;t=this;$.each(state.core.open.concat([]),function(i,v){n=t.get_node(v);if(n){if(t.is_loaded(v)){if(t.is_closed(v)){t.open_node(v,false,0)}if(state&&state.core&&state.core.open){$.vakata.array_remove_item(state.core.open,v)}}else{if(!t.is_loading(v)){t.open_node(v,$.proxy(function(){this.set_state(state,callback)},t),0)}res=false}}});if(res){delete state.core.open;this.set_state(state,callback)}return false}if(state.core.scroll){if(state.core.scroll&&state.core.scroll.left!==undefined){this.element.scrollLeft(state.core.scroll.left)}if(state.core.scroll&&state.core.scroll.top!==undefined){this.element.scrollTop(state.core.scroll.top)}delete state.core.scroll;this.set_state(state,callback);return false}if(state.core.selected){_this=this;this.deselect_all();$.each(state.core.selected,function(i,v){_this.select_node(v)});delete state.core.selected;this.set_state(state,callback);return false}if($.isEmptyObject(state.core)){delete state.core;this.set_state(state,callback);return false}}if($.isEmptyObject(state)){state=null;if(callback){callback.call(this)}this.trigger("set_state");return false}return true}return false},refresh:function(skip_loading){this._data.core.state=this.get_state();this._cnt=0;this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:false}}};var c=this.get_container_ul()[0].className;if(!skip_loading){this.element.html("<"+"ul class='jstree-container-ul'><"+"li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'></i><"+"a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>")}this.load_node("#",function(o,s){if(s){this.get_container_ul()[0].className=c;this.set_state($.extend(true,{},this._data.core.state),function(){this.trigger("refresh")})}this._data.core.state=null})},set_id:function(obj,id){obj=this.get_node(obj);if(!obj||obj.id==="#"){return false}var i,j,m=this._model.data;m[obj.parent].children[$.inArray(obj.id,m[obj.parent].children)]=id;for(i=0,j=obj.parents.length;i<j;i++){m[obj.parents[i]].children_d[$.inArray(obj.id,m[obj.parents[i]].children_d)]=id}for(i=0,j=obj.children.length;i<j;i++){m[obj.children[i]].parent=id}for(i=0,j=obj.children_d.length;i<j;i++){m[obj.children_d[i]].parents[$.inArray(obj.id,m[obj.children_d[i]].parents)]=id}i=$.inArray(obj.id,this._data.core.selected);if(i!==-1){this._data.core.selected[i]=id}i=this.get_node(obj.id,true);if(i){i.attr("id",id)}delete m[obj.id];obj.id=id;m[id]=obj;return true},get_text:function(obj){obj=this.get_node(obj);return!obj||obj.id==="#"?false:obj.text},set_text:function(obj,val){var t1,t2,dom,tmp;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.set_text(obj[t1],val)}return true}obj=this.get_node(obj);if(!obj||obj.id==="#"){return false}obj.text=val;dom=this.get_node(obj,true);if(dom.length){dom=dom.children(".jstree-anchor:eq(0)");tmp=dom.children("I").clone();dom.html(val).prepend(tmp);this.trigger("set_text",{obj:obj,text:val})}return true},get_json:function(obj,options,flat){obj=this.get_node(obj||"#");if(!obj){return false}if(options&&options.flat&&!flat){flat=[]}var tmp={id:obj.id,text:obj.text,icon:this.get_icon(obj),li_attr:obj.li_attr,a_attr:obj.a_attr,state:{},data:options&&options.no_data?false:obj.data},i,j;if(options&&options.flat){tmp.parent=obj.parent}else{tmp.children=[]}if(!options||!options.no_state){for(i in obj.state){if(obj.state.hasOwnProperty(i)){tmp.state[i]=obj.state[i]}}}if(options&&options.no_id){delete tmp.id;if(tmp.li_attr&&tmp.li_attr.id){delete tmp.li_attr.id}}if(options&&options.flat&&obj.id!=="#"){flat.push(tmp)}if(!options||!options.no_children){for(i=0,j=obj.children.length;i<j;i++){if(options&&options.flat){this.get_json(obj.children[i],options,flat)}else{tmp.children.push(this.get_json(obj.children[i],options))}}}return options&&options.flat?flat:obj.id==="#"?tmp.children:tmp},create_node:function(par,node,pos,callback,is_loaded){par=this.get_node(par);if(!par){return false}pos=pos===undefined?"last":pos;if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par)){return this.load_node(par,function(){this.create_node(par,node,pos,callback,true)})}if(!node){node={text:this.get_string("New node")}}if(node.text===undefined){node.text=this.get_string("New node")}var tmp,dpc,i,j;if(par.id==="#"){if(pos==="before"){pos="first"}if(pos==="after"){pos="last"}}switch(pos){case"before":tmp=this.get_node(par.parent);pos=$.inArray(par.id,tmp.children);par=tmp;break;case"after":tmp=this.get_node(par.parent);pos=$.inArray(par.id,tmp.children)+1;par=tmp;break;case"inside":case"first":pos=0;break;case"last":pos=par.children.length;break;default:if(!pos){pos=0}break}if(pos>par.children.length){pos=par.children.length}if(!node.id){node.id=true}if(!this.check("create_node",node,par,pos)){this.settings.core.error.call(this,this._data.core.last_error);return false}if(node.id===true){delete node.id}node=this._parse_model_from_json(node,par.id,par.parents.concat());if(!node){return false}tmp=this.get_node(node);dpc=[];dpc.push(node);dpc=dpc.concat(tmp.children_d);this.trigger("model",{nodes:dpc,parent:par.id});par.children_d=par.children_d.concat(dpc);for(i=0,j=par.parents.length;i<j;i++){this._model.data[par.parents[i]].children_d=this._model.data[par.parents[i]].children_d.concat(dpc)}node=tmp;tmp=[];for(i=0,j=par.children.length;i<j;i++){tmp[i>=pos?i+1:i]=par.children[i]}tmp[pos]=node.id;par.children=tmp;this.redraw_node(par,true);if(callback){callback.call(this,this.get_node(node))}this.trigger("create_node",{node:this.get_node(node),parent:par.id,position:pos});return node.id},rename_node:function(obj,val){var t1,t2,old;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.rename_node(obj[t1],val)}return true}obj=this.get_node(obj);if(!obj||obj.id==="#"){return false}old=obj.text;if(!this.check("rename_node",obj,this.get_parent(obj),val)){this.settings.core.error.call(this,this._data.core.last_error);return false}this.set_text(obj,val);this.trigger("rename_node",{node:obj,text:val,old:old});return true},delete_node:function(obj){var t1,t2,par,pos,tmp,i,j,k,l,c;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.delete_node(obj[t1])}return true}obj=this.get_node(obj);if(!obj||obj.id==="#"){return false}par=this.get_node(obj.parent);pos=$.inArray(obj.id,par.children);c=false;if(!this.check("delete_node",obj,par,pos)){this.settings.core.error.call(this,this._data.core.last_error);return false}if(pos!==-1){par.children=$.vakata.array_remove(par.children,pos)}tmp=obj.children_d.concat([]);tmp.push(obj.id);for(k=0,l=tmp.length;k<l;k++){for(i=0,j=obj.parents.length;i<j;i++){pos=$.inArray(tmp[k],this._model.data[obj.parents[i]].children_d);if(pos!==-1){this._model.data[obj.parents[i]].children_d=$.vakata.array_remove(this._model.data[obj.parents[i]].children_d,pos)}}if(this._model.data[tmp[k]].state.selected){c=true;pos=$.inArray(tmp[k],this._data.core.selected);if(pos!==-1){this._data.core.selected=$.vakata.array_remove(this._data.core.selected,pos)}}}this.trigger("delete_node",{node:obj,parent:par.id});if(c){this.trigger("changed",{action:"delete_node",node:obj,selected:this._data.core.selected,parent:par.id})}for(k=0,l=tmp.length;k<l;k++){delete this._model.data[tmp[k]]}this.redraw_node(par,true);return true},check:function(chk,obj,par,pos){obj=obj&&obj.id?obj:this.get_node(obj);par=par&&par.id?par:this.get_node(par);var tmp=chk.match(/^move_node|copy_node|create_node$/i)?par:obj,chc=this.settings.core.check_callback;if(chk==="move_node"){if(obj.id===par.id||$.inArray(obj.id,par.children)===pos||$.inArray(par.id,obj.children_d)!==-1){this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})};return false}}tmp=this.get_node(tmp,true);if(tmp.length){tmp=tmp.data("jstree")}if(tmp&&tmp.functions&&(tmp.functions[chk]===false||tmp.functions[chk]===true)){if(tmp.functions[chk]===false){this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})}}return tmp.functions[chk]}if(chc===false||$.isFunction(chc)&&chc.call(this,chk,obj,par,pos)===false||chc&&chc[chk]===false){this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})};return false}return true},last_error:function(){return this._data.core.last_error},move_node:function(obj,par,pos,callback,is_loaded){var t1,t2,old_par,new_par,old_ins,is_multi,dpc,tmp,i,j,k,l,p;if($.isArray(obj)){obj=obj.reverse().slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.move_node(obj[t1],par,pos,callback,is_loaded)}return true}obj=obj&&obj.id?obj:this.get_node(obj);par=this.get_node(par);pos=pos===undefined?0:pos;if(!par||!obj||obj.id==="#"){return false}if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par)){return this.load_node(par,function(){this.move_node(obj,par,pos,callback,true)})}old_par=(obj.parent||"#").toString();new_par=!pos.toString().match(/^(before|after)$/)||par.id==="#"?par:this.get_node(par.parent);old_ins=this._model.data[obj.id]?this:$.jstree.reference(obj.id);is_multi=!old_ins||!old_ins._id||this._id!==old_ins._id;if(is_multi){if(this.copy_node(obj,par,pos,callback,is_loaded)){if(old_ins){old_ins.delete_node(obj)}return true}return false}if(new_par.id==="#"){if(pos==="before"){pos="first"}if(pos==="after"){pos="last"}}switch(pos){case"before":pos=$.inArray(par.id,new_par.children);break;case"after":pos=$.inArray(par.id,new_par.children)+1;break;case"inside":case"first":pos=0;break;case"last":pos=new_par.children.length;break;default:if(!pos){pos=0}break}if(pos>new_par.children.length){pos=new_par.children.length}if(!this.check("move_node",obj,new_par,pos)){this.settings.core.error.call(this,this._data.core.last_error);return false}if(obj.parent===new_par.id){dpc=new_par.children.concat();tmp=$.inArray(obj.id,dpc);if(tmp!==-1){dpc=$.vakata.array_remove(dpc,tmp);if(pos>tmp){pos--}}tmp=[];for(i=0,j=dpc.length;i<j;i++){tmp[i>=pos?i+1:i]=dpc[i]}tmp[pos]=obj.id;new_par.children=tmp;this._node_changed(new_par.id);this.redraw(new_par.id==="#")}else{tmp=obj.children_d.concat();tmp.push(obj.id);for(i=0,j=obj.parents.length;i<j;i++){dpc=[];p=old_ins._model.data[obj.parents[i]].children_d;for(k=0,l=p.length;k<l;k++){if($.inArray(p[k],tmp)===-1){dpc.push(p[k])}}old_ins._model.data[obj.parents[i]].children_d=dpc}old_ins._model.data[old_par].children=$.vakata.array_remove_item(old_ins._model.data[old_par].children,obj.id);for(i=0,j=new_par.parents.length;i<j;i++){this._model.data[new_par.parents[i]].children_d=this._model.data[new_par.parents[i]].children_d.concat(tmp)}dpc=[];for(i=0,j=new_par.children.length;i<j;i++){dpc[i>=pos?i+1:i]=new_par.children[i]}dpc[pos]=obj.id;new_par.children=dpc;new_par.children_d.push(obj.id);new_par.children_d=new_par.children_d.concat(obj.children_d);obj.parent=new_par.id;tmp=new_par.parents.concat();tmp.unshift(new_par.id);p=obj.parents.length;obj.parents=tmp;tmp=tmp.concat();for(i=0,j=obj.children_d.length;i<j;i++){this._model.data[obj.children_d[i]].parents=this._model.data[obj.children_d[i]].parents.slice(0,p*-1);Array.prototype.push.apply(this._model.data[obj.children_d[i]].parents,tmp)}this._node_changed(old_par);this._node_changed(new_par.id);this.redraw(old_par==="#"||new_par.id==="#")}if(callback){callback.call(this,obj,new_par,pos)}this.trigger("move_node",{node:obj,parent:new_par.id,position:pos,old_parent:old_par,is_multi:is_multi,old_instance:old_ins,new_instance:this});return true},copy_node:function(obj,par,pos,callback,is_loaded){var t1,t2,dpc,tmp,i,j,node,old_par,new_par,old_ins,is_multi;if($.isArray(obj)){obj=obj.reverse().slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.copy_node(obj[t1],par,pos,callback,is_loaded)}return true}obj=obj&&obj.id?obj:this.get_node(obj);par=this.get_node(par);pos=pos===undefined?0:pos;if(!par||!obj||obj.id==="#"){return false}if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par)){return this.load_node(par,function(){this.copy_node(obj,par,pos,callback,true)})}old_par=(obj.parent||"#").toString();new_par=!pos.toString().match(/^(before|after)$/)||par.id==="#"?par:this.get_node(par.parent);old_ins=this._model.data[obj.id]?this:$.jstree.reference(obj.id);is_multi=!old_ins||!old_ins._id||this._id!==old_ins._id;if(new_par.id==="#"){if(pos==="before"){pos="first"}if(pos==="after"){pos="last"}}switch(pos){case"before":pos=$.inArray(par.id,new_par.children);break;case"after":pos=$.inArray(par.id,new_par.children)+1;break;case"inside":case"first":pos=0;break;case"last":pos=new_par.children.length;break;default:if(!pos){pos=0}break}if(pos>new_par.children.length){pos=new_par.children.length}if(!this.check("copy_node",obj,new_par,pos)){this.settings.core.error.call(this,this._data.core.last_error);return false}node=old_ins?old_ins.get_json(obj,{no_id:true,no_data:true,no_state:true}):obj;if(!node){return false}if(node.id===true){delete node.id}node=this._parse_model_from_json(node,new_par.id,new_par.parents.concat());if(!node){return false}tmp=this.get_node(node);dpc=[];dpc.push(node);dpc=dpc.concat(tmp.children_d);this.trigger("model",{nodes:dpc,parent:new_par.id});for(i=0,j=new_par.parents.length;i<j;i++){this._model.data[new_par.parents[i]].children_d=this._model.data[new_par.parents[i]].children_d.concat(dpc)}dpc=[];for(i=0,j=new_par.children.length;i<j;i++){dpc[i>=pos?i+1:i]=new_par.children[i]}dpc[pos]=tmp.id;new_par.children=dpc;new_par.children_d.push(tmp.id);new_par.children_d=new_par.children_d.concat(tmp.children_d);this._node_changed(new_par.id);this.redraw(new_par.id==="#");if(callback){callback.call(this,tmp,new_par,pos)}this.trigger("copy_node",{node:tmp,original:obj,parent:new_par.id,position:pos,old_parent:old_par,is_multi:is_multi,old_instance:old_ins,new_instance:this});return tmp.id},cut:function(obj){if(!obj){obj=this._data.core.selected.concat()}if(!$.isArray(obj)){obj=[obj]}if(!obj.length){return false}var tmp=[],o,t1,t2;for(t1=0,t2=obj.length;t1<t2;t1++){o=this.get_node(obj[t1]);if(o&&o.id&&o.id!=="#"){tmp.push(o)}}if(!tmp.length){return false}ccp_node=tmp;ccp_inst=this;ccp_mode="move_node";this.trigger("cut",{node:obj})},copy:function(obj){if(!obj){obj=this._data.core.selected.concat()}if(!$.isArray(obj)){obj=[obj]}if(!obj.length){return false}var tmp=[],o,t1,t2;for(t1=0,t2=obj.length;t1<t2;t1++){o=this.get_node(obj[t1]);if(o&&o.id&&o.id!=="#"){tmp.push(o)}}if(!tmp.length){return false}ccp_node=tmp;ccp_inst=this;ccp_mode="copy_node";this.trigger("copy",{node:obj})},get_buffer:function(){return{mode:ccp_mode,node:ccp_node,inst:ccp_inst}},can_paste:function(){return ccp_mode!==false&&ccp_node!==false},paste:function(obj){obj=this.get_node(obj);if(!obj||!ccp_mode||!ccp_mode.match(/^(copy_node|move_node)$/)||!ccp_node){return false}if(this[ccp_mode](ccp_node,obj)){this.trigger("paste",{parent:obj.id,node:ccp_node,mode:ccp_mode})}ccp_node=false;ccp_mode=false;ccp_inst=false},edit:function(obj,default_text){obj=this._open_to(obj);if(!obj||!obj.length){return false}var rtl=this._data.core.rtl,w=this.element.width(),a=obj.children(".jstree-anchor"),s=$("<span>"),t=typeof default_text==="string"?default_text:this.get_text(obj),h1=$("<"+"div />",{css:{position:"absolute",top:"-200px",left:rtl?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),h2=$("<"+"input />",{value:t,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:$.proxy(function(){var i=s.children(".jstree-rename-input"),v=i.val();
if(v===""){v=t}h1.remove();s.replaceWith(a);s.remove();this.set_text(obj,t);if(this.rename_node(obj,v)===false){this.set_text(obj,t)}},this),keydown:function(event){var key=event.which;if(key===27){this.value=t}if(key===27||key===13||key===37||key===38||key===39||key===40||key===32){event.stopImmediatePropagation()}if(key===27||key===13){event.preventDefault();this.blur()}},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(event){h2.width(Math.min(h1.text("pW"+this.value).width(),w))},keypress:function(event){if(event.which===13){return false}}}),fn={fontFamily:a.css("fontFamily")||"",fontSize:a.css("fontSize")||"",fontWeight:a.css("fontWeight")||"",fontStyle:a.css("fontStyle")||"",fontStretch:a.css("fontStretch")||"",fontVariant:a.css("fontVariant")||"",letterSpacing:a.css("letterSpacing")||"",wordSpacing:a.css("wordSpacing")||""};this.set_text(obj,"");s.attr("class",a.attr("class")).append(a.contents().clone()).append(h2);a.replaceWith(s);h1.css(fn);h2.css(fn).width(Math.min(h1.text("pW"+h2[0].value).width(),w))[0].select()},set_theme:function(theme_name,theme_url){if(!theme_name){return false}if(theme_url===true){var dir=this.settings.core.themes.dir;if(!dir){dir=$.jstree.path+"/themes"}theme_url=dir+"/"+theme_name+"/style.css"}if(theme_url&&$.inArray(theme_url,themes_loaded)===-1){$("head").append("<"+'link rel="stylesheet" href="'+theme_url+'" type="text/css" />');themes_loaded.push(theme_url)}if(this._data.core.themes.name){this.element.removeClass("jstree-"+this._data.core.themes.name)}this._data.core.themes.name=theme_name;this.element.addClass("jstree-"+theme_name);this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+theme_name+"-responsive");this.trigger("set_theme",{theme:theme_name})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(variant_name){if(this._data.core.themes.variant){this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)}this._data.core.themes.variant=variant_name;if(variant_name){this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)}},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=true;this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=false;this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){if(this._data.core.themes.stripes){this.hide_stripes()}else{this.show_stripes()}},show_dots:function(){this._data.core.themes.dots=true;this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=false;this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){if(this._data.core.themes.dots){this.hide_dots()}else{this.show_dots()}},show_icons:function(){this._data.core.themes.icons=true;this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=false;this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){if(this._data.core.themes.icons){this.hide_icons()}else{this.show_icons()}},set_icon:function(obj,icon){var t1,t2,dom,old;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.set_icon(obj[t1],icon)}return true}obj=this.get_node(obj);if(!obj||obj.id==="#"){return false}old=obj.icon;obj.icon=icon;dom=this.get_node(obj,true).children(".jstree-anchor").children(".jstree-themeicon");if(icon===false){this.hide_icon(obj)}else if(icon===true){dom.removeClass("jstree-themeicon-custom "+old).css("background","").removeAttr("rel")}else if(icon.indexOf("/")===-1&&icon.indexOf(".")===-1){dom.removeClass(old).css("background","");dom.addClass(icon+" jstree-themeicon-custom").attr("rel",icon)}else{dom.removeClass(old).css("background","");dom.addClass("jstree-themeicon-custom").css("background","url('"+icon+"') center center no-repeat").attr("rel",icon)}return true},get_icon:function(obj){obj=this.get_node(obj);return!obj||obj.id==="#"?false:obj.icon},hide_icon:function(obj){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.hide_icon(obj[t1])}return true}obj=this.get_node(obj);if(!obj||obj==="#"){return false}obj.icon=false;this.get_node(obj,true).children("a").children(".jstree-themeicon").addClass("jstree-themeicon-hidden");return true},show_icon:function(obj){var t1,t2,dom;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.show_icon(obj[t1])}return true}obj=this.get_node(obj);if(!obj||obj==="#"){return false}dom=this.get_node(obj,true);obj.icon=dom.length?dom.children("a").children(".jstree-themeicon").attr("rel"):true;if(!obj.icon){obj.icon=true}dom.children("a").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden");return true}};$.vakata={};$.fn.vakata_reverse=[].reverse;$.vakata.attributes=function(node,with_values){node=$(node)[0];var attr=with_values?{}:[];if(node&&node.attributes){$.each(node.attributes,function(i,v){if($.inArray(v.nodeName.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])!==-1){return}if(v.nodeValue!==null&&$.trim(v.nodeValue)!==""){if(with_values){attr[v.nodeName]=v.nodeValue}else{attr.push(v.nodeName)}}})}return attr};$.vakata.array_unique=function(array){var a=[],i,j,l;for(i=0,l=array.length;i<l;i++){for(j=0;j<=i;j++){if(array[i]===array[j]){break}}if(j===i){a.push(array[i])}}return a};$.vakata.array_remove=function(array,from,to){var rest=array.slice((to||from)+1||array.length);array.length=from<0?array.length+from:from;array.push.apply(array,rest);return array};$.vakata.array_remove_item=function(array,item){var tmp=$.inArray(item,array);return tmp!==-1?$.vakata.array_remove(array,tmp):array};(function(){var browser={},b_match=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},matched=b_match(window.navigator.userAgent);if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome){browser.webkit=true}else if(browser.webkit){browser.safari=true}$.vakata.browser=browser})();if($.vakata.browser.msie&&$.vakata.browser.version<8){$.jstree.defaults.core.animation=0}var _i=document.createElement("I");_i.className="jstree-icon jstree-checkbox";$.jstree.defaults.checkbox={visible:true,three_state:true,whole_node:true,keep_selected_style:true};$.jstree.plugins.checkbox=function(options,parent){this.bind=function(){parent.bind.call(this);this._data.checkbox.uto=false;this.element.on("init.jstree",$.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible;if(!this.settings.checkbox.keep_selected_style){this.element.addClass("jstree-checkbox-no-clicked")}},this)).on("loading.jstree",$.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this));if(this.settings.checkbox.three_state){this.element.on("changed.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",$.proxy(function(){if(this._data.checkbox.uto){clearTimeout(this._data.checkbox.uto)}this._data.checkbox.uto=setTimeout($.proxy(this._undetermined,this),50)},this)).on("model.jstree",$.proxy(function(e,data){var m=this._model.data,p=m[data.parent],dpc=data.nodes,chd=[],c,i,j,k,l,tmp;if(p.state.selected){for(i=0,j=dpc.length;i<j;i++){m[dpc[i]].state.selected=true}this._data.core.selected=this._data.core.selected.concat(dpc)}else{for(i=0,j=dpc.length;i<j;i++){if(m[dpc[i]].state.selected){for(k=0,l=m[dpc[i]].children_d.length;k<l;k++){m[m[dpc[i]].children_d[k]].state.selected=true}this._data.core.selected=this._data.core.selected.concat(m[dpc[i]].children_d)}}}for(i=0,j=p.children_d.length;i<j;i++){if(!m[p.children_d[i]].children.length){chd.push(m[p.children_d[i]].parent)}}chd=$.vakata.array_unique(chd);for(k=0,l=chd.length;k<l;k++){p=m[chd[k]];while(p&&p.id!=="#"){c=0;for(i=0,j=p.children.length;i<j;i++){c+=m[p.children[i]].state.selected}if(c===j){p.state.selected=true;this._data.core.selected.push(p.id);tmp=this.get_node(p,true);if(tmp&&tmp.length){tmp.children(".jstree-anchor").addClass("jstree-clicked")}}else{break}p=this.get_node(p.parent)}}this._data.core.selected=$.vakata.array_unique(this._data.core.selected)},this)).on("select_node.jstree",$.proxy(function(e,data){var obj=data.node,m=this._model.data,par=this.get_node(obj.parent),dom=this.get_node(obj,true),i,j,c,tmp;this._data.core.selected=$.vakata.array_unique(this._data.core.selected.concat(obj.children_d));for(i=0,j=obj.children_d.length;i<j;i++){m[obj.children_d[i]].state.selected=true}while(par&&par.id!=="#"){c=0;for(i=0,j=par.children.length;i<j;i++){c+=m[par.children[i]].state.selected}if(c===j){par.state.selected=true;this._data.core.selected.push(par.id);tmp=this.get_node(par,true);if(tmp&&tmp.length){tmp.children(".jstree-anchor").addClass("jstree-clicked")}}else{break}par=this.get_node(par.parent)}if(dom.length){dom.find(".jstree-anchor").addClass("jstree-clicked")}},this)).on("deselect_node.jstree",$.proxy(function(e,data){var obj=data.node,dom=this.get_node(obj,true),i,j,tmp;for(i=0,j=obj.children_d.length;i<j;i++){this._model.data[obj.children_d[i]].state.selected=false}for(i=0,j=obj.parents.length;i<j;i++){this._model.data[obj.parents[i]].state.selected=false;tmp=this.get_node(obj.parents[i],true);if(tmp&&tmp.length){tmp.children(".jstree-anchor").removeClass("jstree-clicked")}}tmp=[];for(i=0,j=this._data.core.selected.length;i<j;i++){if($.inArray(this._data.core.selected[i],obj.children_d)===-1&&$.inArray(this._data.core.selected[i],obj.parents)===-1){tmp.push(this._data.core.selected[i])}}this._data.core.selected=$.vakata.array_unique(tmp);if(dom.length){dom.find(".jstree-anchor").removeClass("jstree-clicked")}},this)).on("delete_node.jstree",$.proxy(function(e,data){var p=this.get_node(data.parent),m=this._model.data,i,j,c,tmp;while(p&&p.id!=="#"){c=0;for(i=0,j=p.children.length;i<j;i++){c+=m[p.children[i]].state.selected}if(c===j){p.state.selected=true;this._data.core.selected.push(p.id);tmp=this.get_node(p,true);if(tmp&&tmp.length){tmp.children(".jstree-anchor").addClass("jstree-clicked")}}else{break}p=this.get_node(p.parent)}},this)).on("move_node.jstree",$.proxy(function(e,data){var is_multi=data.is_multi,old_par=data.old_parent,new_par=this.get_node(data.parent),m=this._model.data,p,c,i,j,tmp;if(!is_multi){p=this.get_node(old_par);while(p&&p.id!=="#"){c=0;for(i=0,j=p.children.length;i<j;i++){c+=m[p.children[i]].state.selected}if(c===j){p.state.selected=true;this._data.core.selected.push(p.id);tmp=this.get_node(p,true);if(tmp&&tmp.length){tmp.children(".jstree-anchor").addClass("jstree-clicked")}}else{break}p=this.get_node(p.parent)}}p=new_par;while(p&&p.id!=="#"){c=0;for(i=0,j=p.children.length;i<j;i++){c+=m[p.children[i]].state.selected}if(c===j){if(!p.state.selected){p.state.selected=true;this._data.core.selected.push(p.id);tmp=this.get_node(p,true);if(tmp&&tmp.length){tmp.children(".jstree-anchor").addClass("jstree-clicked")}}}else{if(p.state.selected){p.state.selected=false;this._data.core.selected=$.vakata.array_remove_item(this._data.core.selected,p.id);tmp=this.get_node(p,true);if(tmp&&tmp.length){tmp.children(".jstree-anchor").removeClass("jstree-clicked")}}else{break}}p=this.get_node(p.parent)}},this))}};this._undetermined=function(){var i,j,m=this._model.data,s=this._data.core.selected,p=[],t=this;for(i=0,j=s.length;i<j;i++){if(m[s[i]]&&m[s[i]].parents){p=p.concat(m[s[i]].parents)}}this.element.find(".jstree-closed").not(":has(ul)").each(function(){var tmp=t.get_node(this);if(!tmp.state.loaded&&tmp.original&&tmp.original.state&&tmp.original.state.undetermined&&tmp.original.state.undetermined===true){p.push(tmp.id);p=p.concat(tmp.parents)}});p=$.vakata.array_unique(p);i=$.inArray("#",p);if(i!==-1){p=$.vakata.array_remove(p,i)}this.element.find(".jstree-undetermined").removeClass("jstree-undetermined");for(i=0,j=p.length;i<j;i++){if(!m[p[i]].state.selected){s=this.get_node(p[i],true);if(s&&s.length){s.children("a").children(".jstree-checkbox").addClass("jstree-undetermined")}}}};this.redraw_node=function(obj,deep,is_callback){obj=parent.redraw_node.call(this,obj,deep,is_callback);if(obj){var tmp=obj.getElementsByTagName("A")[0];tmp.insertBefore(_i.cloneNode(),tmp.childNodes[0])}if(!is_callback&&this.settings.checkbox.three_state){if(this._data.checkbox.uto){clearTimeout(this._data.checkbox.uto)}this._data.checkbox.uto=setTimeout($.proxy(this._undetermined,this),50)}return obj};this.activate_node=function(obj,e){if(this.settings.checkbox.whole_node||$(e.target).hasClass("jstree-checkbox")){e.ctrlKey=true}return parent.activate_node.call(this,obj,e)};this.show_checkboxes=function(){this._data.core.themes.checkboxes=true;this.element.children("ul").removeClass("jstree-no-checkboxes")};this.hide_checkboxes=function(){this._data.core.themes.checkboxes=false;this.element.children("ul").addClass("jstree-no-checkboxes")};this.toggle_checkboxes=function(){if(this._data.core.themes.checkboxes){this.hide_checkboxes()}else{this.show_checkboxes()}}};$.jstree.defaults.contextmenu={select_node:true,show_at_node:true,items:function(o,cb){return{create:{separator_before:false,separator_after:true,_disabled:false,label:"Create",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.create_node(obj,{},"last",function(new_node){setTimeout(function(){inst.edit(new_node)},0)})}},rename:{separator_before:false,separator_after:false,_disabled:false,label:"Rename",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.edit(obj)}},remove:{separator_before:false,icon:false,separator_after:false,_disabled:false,label:"Delete",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);if(inst.is_selected(obj)){inst.delete_node(inst.get_selected())}else{inst.delete_node(obj)}}},ccp:{separator_before:true,icon:false,separator_after:false,label:"Edit",action:false,submenu:{cut:{separator_before:false,separator_after:false,label:"Cut",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);if(inst.is_selected(obj)){inst.cut(inst.get_selected())}else{inst.cut(obj)}}},copy:{separator_before:false,icon:false,separator_after:false,label:"Copy",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);if(inst.is_selected(obj)){inst.copy(inst.get_selected())}else{inst.copy(obj)}}},paste:{separator_before:false,icon:false,_disabled:function(data){return!$.jstree.reference(data.reference).can_paste()},separator_after:false,label:"Paste",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.paste(obj)}}}}}}};$.jstree.plugins.contextmenu=function(options,parent){this.bind=function(){parent.bind.call(this);this.element.on("contextmenu.jstree",".jstree-anchor",$.proxy(function(e){e.preventDefault();if(!this.is_loading(e.currentTarget)){this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e)}},this)).on("click.jstree",".jstree-anchor",$.proxy(function(e){if(this._data.contextmenu.visible){$.vakata.context.hide()}},this));$(document).on("context_hide.vakata",$.proxy(function(){this._data.contextmenu.visible=false},this))};this.teardown=function(){if(this._data.contextmenu.visible){$.vakata.context.hide()}parent.teardown.call(this)};this.show_contextmenu=function(obj,x,y,e){obj=this.get_node(obj);if(!obj||obj.id==="#"){return false}var s=this.settings.contextmenu,d=this.get_node(obj,true),a=d.children(".jstree-anchor"),o=false,i=false;if(s.show_at_node||x===undefined||y===undefined){o=a.offset();x=o.left;y=o.top+this._data.core.li_height}if(this.settings.contextmenu.select_node&&!this.is_selected(obj)){this.deselect_all();this.select_node(obj,false,false,e)}i=s.items;if($.isFunction(i)){i=i.call(this,obj,$.proxy(function(i){this._show_contextmenu(obj,x,y,i)},this))}if($.isPlainObject(i)){this._show_contextmenu(obj,x,y,i)}};this._show_contextmenu=function(obj,x,y,i){var d=this.get_node(obj,true),a=d.children(".jstree-anchor");$(document).one("context_show.vakata",$.proxy(function(e,data){var cls="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";$(data.element).addClass(cls)},this));this._data.contextmenu.visible=true;$.vakata.context.show(a,{x:x,y:y},i);this.trigger("show_contextmenu",{node:obj,x:x,y:y})}};(function($){var right_to_left=false,vakata_context={element:false,reference:false,position_x:0,position_y:0,items:[],html:"",is_visible:false};$.vakata.context={settings:{hide_onmouseleave:0,icons:true},_trigger:function(event_name){$(document).triggerHandler("context_"+event_name+".vakata",{reference:vakata_context.reference,element:vakata_context.element,position:{x:vakata_context.position_x,y:vakata_context.position_y}})},_execute:function(i){i=vakata_context.items[i];return i&&(!i._disabled||$.isFunction(i._disabled)&&!i._disabled({item:i,reference:vakata_context.reference,element:vakata_context.element}))&&i.action?i.action.call(null,{item:i,reference:vakata_context.reference,element:vakata_context.element,position:{x:vakata_context.position_x,y:vakata_context.position_y}}):false},_parse:function(o,is_callback){if(!o){return false}if(!is_callback){vakata_context.html="";vakata_context.items=[]}var str="",sep=false,tmp;if(is_callback){str+="<"+"ul>"}$.each(o,function(i,val){if(!val){return true}vakata_context.items.push(val);if(!sep&&val.separator_before){str+="<"+"li class='vakata-context-separator'><"+"a href='#' "+($.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;<"+"/a><"+"/li>"}sep=false;str+="<"+"li class='"+(val._class||"")+(val._disabled===true||$.isFunction(val._disabled)&&val._disabled({item:val,reference:vakata_context.reference,element:vakata_context.element})?" vakata-contextmenu-disabled ":"")+"' "+(val.shortcut?" data-shortcut='"+val.shortcut+"' ":"")+">";str+="<"+"a href='#' rel='"+(vakata_context.items.length-1)+"'>";if($.vakata.context.settings.icons){str+="<"+"i ";if(val.icon){if(val.icon.indexOf("/")!==-1||val.icon.indexOf(".")!==-1){str+=" style='background:url(\""+val.icon+"\") center center no-repeat' "}else{str+=" class='"+val.icon+"' "}}str+="><"+"/i><"+"span class='vakata-contextmenu-sep'>&#160;<"+"/span>"}str+=val.label+(val.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+val.shortcut+'">'+(val.shortcut_label||"")+"</span>":"")+"<"+"/a>";if(val.submenu){tmp=$.vakata.context._parse(val.submenu,true);if(tmp){str+=tmp}}str+="<"+"/li>";if(val.separator_after){str+="<"+"li class='vakata-context-separator'><"+"a href='#' "+($.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;<"+"/a><"+"/li>";sep=true}});str=str.replace(/<li class\='vakata-context-separator'\><\/li\>$/,"");if(is_callback){str+="</ul>"}if(!is_callback){vakata_context.html=str;$.vakata.context._trigger("parse")}return str.length>10?str:false},_show_submenu:function(o){o=$(o);if(!o.length||!o.children("ul").length){return}var e=o.children("ul"),x=o.offset().left+o.outerWidth(),y=o.offset().top,w=e.width(),h=e.height(),dw=$(window).width()+$(window).scrollLeft(),dh=$(window).height()+$(window).scrollTop();if(right_to_left){o[x-(w+10+o.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left")}else{o[x+w+10>dw?"addClass":"removeClass"]("vakata-context-right")}if(y+h+10>dh){e.css("bottom","-1px")}e.show()},show:function(reference,position,data){var o,e,x,y,w,h,dw,dh,cond=true;if(vakata_context.element&&vakata_context.element.length){vakata_context.element.width("")}switch(cond){case!position&&!reference:return false;case!!position&&!!reference:vakata_context.reference=reference;vakata_context.position_x=position.x;vakata_context.position_y=position.y;break;case!position&&!!reference:vakata_context.reference=reference;o=reference.offset();vakata_context.position_x=o.left+reference.outerHeight();vakata_context.position_y=o.top;break;case!!position&&!reference:vakata_context.position_x=position.x;vakata_context.position_y=position.y;break}if(!!reference&&!data&&$(reference).data("vakata_contextmenu")){data=$(reference).data("vakata_contextmenu")}if($.vakata.context._parse(data)){vakata_context.element.html(vakata_context.html)}if(vakata_context.items.length){e=vakata_context.element;x=vakata_context.position_x;y=vakata_context.position_y;w=e.width();h=e.height();dw=$(window).width()+$(window).scrollLeft();dh=$(window).height()+$(window).scrollTop();if(right_to_left){x-=e.outerWidth();if(x<$(window).scrollLeft()+20){x=$(window).scrollLeft()+20}}if(x+w+20>dw){x=dw-(w+20)}if(y+h+20>dh){y=dh-(h+20)}vakata_context.element.css({left:x,top:y}).show().find("a:eq(0)").focus().parent().addClass("vakata-context-hover");vakata_context.is_visible=true;$.vakata.context._trigger("show")}},hide:function(){if(vakata_context.is_visible){vakata_context.element.hide().find("ul").hide().end().find(":focus").blur();vakata_context.is_visible=false;$.vakata.context._trigger("hide")}}};$(function(){right_to_left=$("body").css("direction")==="rtl";var to=false;vakata_context.element=$("<ul class='vakata-context'></ul>");vakata_context.element.on("mouseenter","li",function(e){e.stopImmediatePropagation();if($.contains(this,e.relatedTarget)){return}if(to){clearTimeout(to)}vakata_context.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end();$(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover");$.vakata.context._show_submenu(this)}).on("mouseleave","li",function(e){if($.contains(this,e.relatedTarget)){return}$(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(e){$(this).find(".vakata-context-hover").removeClass("vakata-context-hover");if($.vakata.context.settings.hide_onmouseleave){to=setTimeout(function(t){return function(){$.vakata.context.hide()}}(this),$.vakata.context.settings.hide_onmouseleave)}}).on("click","a",function(e){e.preventDefault()}).on("mouseup","a",function(e){if(!$(this).blur().parent().hasClass("vakata-context-disabled")&&$.vakata.context._execute($(this).attr("rel"))!==false){$.vakata.context.hide()}}).on("keydown","a",function(e){var o=null;switch(e.which){case 13:case 32:e.type="mouseup";e.preventDefault();$(e.currentTarget).trigger(e);break;case 37:if(vakata_context.is_visible){vakata_context.element.find(".vakata-context-hover").last().parents("li:eq(0)").find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus();e.stopImmediatePropagation();e.preventDefault()}break;case 38:if(vakata_context.is_visible){o=vakata_context.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first();if(!o.length){o=vakata_context.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()}o.addClass("vakata-context-hover").children("a").focus();e.stopImmediatePropagation();e.preventDefault()}break;case 39:if(vakata_context.is_visible){vakata_context.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus();e.stopImmediatePropagation();e.preventDefault()}break;case 40:if(vakata_context.is_visible){o=vakata_context.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first();if(!o.length){o=vakata_context.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()}o.addClass("vakata-context-hover").children("a").focus();e.stopImmediatePropagation();e.preventDefault()}break;case 27:$.vakata.context.hide();e.preventDefault();break;default:break}}).on("keydown",function(e){e.preventDefault();var a=vakata_context.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();if(a.parent().not(".vakata-context-disabled")){a.mouseup()}}).appendTo("body");$(document).on("mousedown",function(e){if(vakata_context.is_visible&&!$.contains(vakata_context.element[0],e.target)){$.vakata.context.hide()}}).on("context_show.vakata",function(e,data){vakata_context.element.find("li:has(ul)").children("a").addClass("vakata-context-parent");if(right_to_left){vakata_context.element.addClass("vakata-context-rtl").css("direction","rtl")}vakata_context.element.find("ul").hide().end()})})})($);$.jstree.defaults.dnd={copy:true,open_timeout:500,is_draggable:true,check_while_dragging:true};$.jstree.plugins.dnd=function(options,parent){this.bind=function(){parent.bind.call(this);this.element.on("mousedown touchstart",".jstree-anchor",$.proxy(function(e){var obj=this.get_node(e.target),mlt=this.is_selected(obj)?this.get_selected().length:1;if(obj&&obj.id&&obj.id!=="#"&&(e.which===1||e.type==="touchstart")&&(this.settings.dnd.is_draggable===true||$.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,obj))){this.element.trigger("mousedown.jstree");return $.vakata.dnd.start(e,{jstree:true,origin:this,obj:this.get_node(obj,true),nodes:mlt>1?this.get_selected():[obj.id]},'<div id="jstree-dnd" class="jstree-'+this.get_theme()+'"><i class="jstree-icon jstree-er"></i>'+(mlt>1?mlt+" "+this.get_string("nodes"):this.get_text(e.currentTarget,true))+'<ins class="jstree-copy" style="display:none;">+</ins></div>')}},this))}};$(function(){var lastmv=false,laster=false,opento=false,marker=$('<div id="jstree-marker">&#160;</div>').hide().appendTo("body");$(document).bind("dnd_start.vakata",function(e,data){lastmv=false}).bind("dnd_move.vakata",function(e,data){if(opento){clearTimeout(opento)}if(!data.data.jstree){return}if(data.event.target.id&&data.event.target.id==="jstree-marker"){return}var ins=$.jstree.reference(data.event.target),ref=false,off=false,rel=false,l,t,h,p,i,o,ok,t1,t2,op,ps,pr;if(ins&&ins._data&&ins._data.dnd){marker.attr("class","jstree-"+ins.get_theme());data.helper.children().attr("class","jstree-"+ins.get_theme()).find(".jstree-copy:eq(0)")[data.data.origin&&data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey)?"show":"hide"]();if((data.event.target===ins.element[0]||data.event.target===ins.get_container_ul()[0])&&ins.get_container_ul().children().length===0){ok=true;for(t1=0,t2=data.data.nodes.length;t1<t2;t1++){ok=ok&&ins.check(data.data.origin&&data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey)?"copy_node":"move_node",data.data.origin&&data.data.origin!==ins?data.data.origin.get_node(data.data.nodes[t1]):data.data.nodes[t1],"#","last");if(!ok){break}}if(ok){lastmv={ins:ins,par:"#",pos:"last"};marker.hide();data.helper.find(".jstree-icon:eq(0)").removeClass("jstree-er").addClass("jstree-ok");return}}else{ref=$(data.event.target).closest("a");if(ref&&ref.length&&ref.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")){off=ref.offset();rel=data.event.pageY-off.top;h=ref.height();if(rel<h/3){o=["b","i","a"]}else if(rel>h-h/3){o=["a","i","b"]}else{o=rel>h/2?["i","a","b"]:["i","b","a"]}$.each(o,function(j,v){switch(v){case"b":l=off.left-6;t=off.top-5;p=ins.get_parent(ref);i=ref.parent().index();break;case"i":l=off.left-2;t=off.top-5+h/2+1;p=ref.parent();i=0;break;case"a":l=off.left-6;t=off.top-5+h;p=ins.get_parent(ref);i=ref.parent().index()+1;break}ok=true;for(t1=0,t2=data.data.nodes.length;t1<t2;t1++){op=data.data.origin&&data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey)?"copy_node":"move_node";ps=i;if(op==="move_node"&&v==="a"&&(data.data.origin&&data.data.origin===ins)&&p===ins.get_parent(data.data.nodes[t1])){pr=ins.get_node(p);if(ps>$.inArray(data.data.nodes[t1],pr.children)){ps-=1}}ok=ok&&(ins&&ins.settings&&ins.settings.dnd&&ins.settings.dnd.check_while_dragging===false||ins.check(op,data.data.origin&&data.data.origin!==ins?data.data.origin.get_node(data.data.nodes[t1]):data.data.nodes[t1],p,ps));if(!ok){if(ins&&ins.last_error){laster=ins.last_error()}break}}if(ok){if(v==="i"&&ref.parent().is(".jstree-closed")&&ins.settings.dnd.open_timeout){opento=setTimeout(function(x,z){return function(){x.open_node(z)}}(ins,ref),ins.settings.dnd.open_timeout)}lastmv={ins:ins,par:p,pos:i};marker.css({left:l+"px",top:t+"px"}).show();data.helper.find(".jstree-icon:eq(0)").removeClass("jstree-er").addClass("jstree-ok");laster={};o=true;return false}});if(o===true){return}}}}lastmv=false;data.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er");marker.hide()}).bind("dnd_scroll.vakata",function(e,data){if(!data.data.jstree){return}marker.hide();lastmv=false;data.helper.find(".jstree-icon:eq(0)").removeClass("jstree-ok").addClass("jstree-er")}).bind("dnd_stop.vakata",function(e,data){if(opento){clearTimeout(opento)}if(!data.data.jstree){return}marker.hide();var i,j,nodes=[];if(lastmv){for(i=0,j=data.data.nodes.length;i<j;i++){nodes[i]=data.data.origin?data.data.origin.get_node(data.data.nodes[i]):data.data.nodes[i]}lastmv.ins[data.data.origin&&data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey)?"copy_node":"move_node"](nodes,lastmv.par,lastmv.pos)}else{i=$(data.event.target).closest(".jstree");if(i.length&&laster&&laster.error&&laster.error==="check"){i=i.jstree(true);if(i){i.settings.core.error.call(this,laster)}}}}).bind("keyup keydown",function(e,data){data=$.vakata.dnd._get();if(data.data&&data.data.jstree){data.helper.find(".jstree-copy:eq(0)")[data.data.origin&&data.data.origin.settings.dnd.copy&&(e.metaKey||e.ctrlKey)?"show":"hide"]()}})});(function($){$.fn.vakata_reverse=[].reverse;var vakata_dnd={element:false,is_down:false,is_drag:false,helper:false,helper_w:0,data:false,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:false,scroll_i:false};$.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5},_trigger:function(event_name,e){var data=$.vakata.dnd._get();data.event=e;$(document).triggerHandler("dnd_"+event_name+".vakata",data)},_get:function(){return{data:vakata_dnd.data,element:vakata_dnd.element,helper:vakata_dnd.helper}},_clean:function(){if(vakata_dnd.helper){vakata_dnd.helper.remove()}if(vakata_dnd.scroll_i){clearInterval(vakata_dnd.scroll_i);vakata_dnd.scroll_i=false}vakata_dnd={element:false,is_down:false,is_drag:false,helper:false,helper_w:0,data:false,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:false,scroll_i:false};$(document).off("mousemove touchmove",$.vakata.dnd.drag);$(document).off("mouseup touchend",$.vakata.dnd.stop)},_scroll:function(init_only){if(!vakata_dnd.scroll_e||!vakata_dnd.scroll_l&&!vakata_dnd.scroll_t){if(vakata_dnd.scroll_i){clearInterval(vakata_dnd.scroll_i);vakata_dnd.scroll_i=false}return false}if(!vakata_dnd.scroll_i){vakata_dnd.scroll_i=setInterval($.vakata.dnd._scroll,100);return false}if(init_only===true){return false}var i=vakata_dnd.scroll_e.scrollTop(),j=vakata_dnd.scroll_e.scrollLeft();vakata_dnd.scroll_e.scrollTop(i+vakata_dnd.scroll_t*$.vakata.dnd.settings.scroll_speed);vakata_dnd.scroll_e.scrollLeft(j+vakata_dnd.scroll_l*$.vakata.dnd.settings.scroll_speed);if(i!==vakata_dnd.scroll_e.scrollTop()||j!==vakata_dnd.scroll_e.scrollLeft()){$.vakata.dnd._trigger("scroll",vakata_dnd.scroll_e)}},start:function(e,data,html){if(e.type==="touchstart"&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]){e.pageX=e.originalEvent.changedTouches[0].pageX;e.pageY=e.originalEvent.changedTouches[0].pageY;e.target=document.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)
}if(vakata_dnd.is_drag){$.vakata.dnd.stop({})}try{e.currentTarget.unselectable="on";e.currentTarget.onselectstart=function(){return false};if(e.currentTarget.style){e.currentTarget.style.MozUserSelect="none"}}catch(ignore){}vakata_dnd.init_x=e.pageX;vakata_dnd.init_y=e.pageY;vakata_dnd.data=data;vakata_dnd.is_down=true;vakata_dnd.element=e.currentTarget;if(html!==false){vakata_dnd.helper=$("<div id='vakata-dnd'></div>").html(html).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})}$(document).bind("mousemove touchmove",$.vakata.dnd.drag);$(document).bind("mouseup touchend",$.vakata.dnd.stop);return false},drag:function(e){if(e.type==="touchmove"&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]){e.pageX=e.originalEvent.changedTouches[0].pageX;e.pageY=e.originalEvent.changedTouches[0].pageY;e.target=document.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)}if(!vakata_dnd.is_down){return}if(!vakata_dnd.is_drag){if(Math.abs(e.pageX-vakata_dnd.init_x)>$.vakata.dnd.settings.threshold||Math.abs(e.pageY-vakata_dnd.init_y)>$.vakata.dnd.settings.threshold){if(vakata_dnd.helper){vakata_dnd.helper.appendTo("body");vakata_dnd.helper_w=vakata_dnd.helper.outerWidth()}vakata_dnd.is_drag=true;$.vakata.dnd._trigger("start",e)}else{return}}var d=false,w=false,dh=false,wh=false,dw=false,ww=false,dt=false,dl=false,ht=false,hl=false;vakata_dnd.scroll_t=0;vakata_dnd.scroll_l=0;vakata_dnd.scroll_e=false;$(e.target).parentsUntil("body").addBack().vakata_reverse().filter(function(){return/^auto|scroll$/.test($(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var t=$(this),o=t.offset();if(this.scrollHeight>this.offsetHeight){if(o.top+t.height()-e.pageY<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_t=1}if(e.pageY-o.top<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_t=-1}}if(this.scrollWidth>this.offsetWidth){if(o.left+t.width()-e.pageX<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_l=1}if(e.pageX-o.left<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_l=-1}}if(vakata_dnd.scroll_t||vakata_dnd.scroll_l){vakata_dnd.scroll_e=$(this);return false}});if(!vakata_dnd.scroll_e){d=$(document);w=$(window);dh=d.height();wh=w.height();dw=d.width();ww=w.width();dt=d.scrollTop();dl=d.scrollLeft();if(dh>wh&&e.pageY-dt<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_t=-1}if(dh>wh&&wh-(e.pageY-dt)<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_t=1}if(dw>ww&&e.pageX-dl<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_l=-1}if(dw>ww&&ww-(e.pageX-dl)<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_l=1}if(vakata_dnd.scroll_t||vakata_dnd.scroll_l){vakata_dnd.scroll_e=d}}if(vakata_dnd.scroll_e){$.vakata.dnd._scroll(true)}if(vakata_dnd.helper){ht=parseInt(e.pageY+$.vakata.dnd.settings.helper_top,10);hl=parseInt(e.pageX+$.vakata.dnd.settings.helper_left,10);if(dh&&ht+25>dh){ht=dh-50}if(dw&&hl+vakata_dnd.helper_w>dw){hl=dw-(vakata_dnd.helper_w+2)}vakata_dnd.helper.css({left:hl+"px",top:ht+"px"})}$.vakata.dnd._trigger("move",e)},stop:function(e){if(e.type==="touchend"&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]){e.pageX=e.originalEvent.changedTouches[0].pageX;e.pageY=e.originalEvent.changedTouches[0].pageY;e.target=document.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)}if(vakata_dnd.is_drag){$.vakata.dnd._trigger("stop",e)}$.vakata.dnd._clean()}}})(jQuery);$.jstree.defaults.search={ajax:false,fuzzy:true,case_sensitive:false,show_only_matches:false,close_opened_onclear:true};$.jstree.plugins.search=function(options,parent){this.bind=function(){parent.bind.call(this);this._data.search.str="";this._data.search.dom=$();this._data.search.res=[];this._data.search.opn=[];this._data.search.sln=null;if(this.settings.search.show_only_matches){this.element.on("search.jstree",function(e,data){if(data.nodes.length){$(this).find("li").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last");data.nodes.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){$(this).children("li:visible").eq(-1).addClass("jstree-last")})}}).on("clear_search.jstree",function(e,data){if(data.nodes.length){$(this).find("li").css("display","").filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last")}})}};this.search=function(str,skip_async){if(str===false||$.trim(str)===""){return this.clear_search()}var s=this.settings.search,a=s.ajax?$.extend({},s.ajax):false,f=null,r=[],p=[],i,j;if(this._data.search.res.length){this.clear_search()}if(!skip_async&&a!==false){if(!a.data){a.data={}}a.data.str=str;return $.ajax(a).fail($.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(a)};this.settings.core.error.call(this,this._data.core.last_error)},this)).done($.proxy(function(d){if(d&&d.d){d=d.d}this._data.search.sln=!$.isArray(d)?[]:d;this._search_load(str)},this))}this._data.search.str=str;this._data.search.dom=$();this._data.search.res=[];this._data.search.opn=[];f=new $.vakata.search(str,true,{caseSensitive:s.case_sensitive,fuzzy:s.fuzzy});$.each(this._model.data,function(i,v){if(v.text&&f.search(v.text).isMatch){r.push(i);p=p.concat(v.parents)}});if(r.length){p=$.vakata.array_unique(p);this._search_open(p);for(i=0,j=r.length;i<j;i++){f=this.get_node(r[i],true);if(f){this._data.search.dom=this._data.search.dom.add(f)}}this._data.search.res=r;this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:str,res:this._data.search.res})};this.clear_search=function(){this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search");if(this.settings.search.close_opened_onclear){this.close_node(this._data.search.opn,0)}this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res});this._data.search.str="";this._data.search.res=[];this._data.search.opn=[];this._data.search.dom=$()};this._search_open=function(d){var t=this;$.each(d.concat([]),function(i,v){v=document.getElementById(v);if(v){if(t.is_closed(v)){t._data.search.opn.push(v.id);t.open_node(v,function(){t._search_open(d)},0)}}})};this._search_load=function(str){var res=true,t=this,m=t._model.data;if($.isArray(this._data.search.sln)){if(!this._data.search.sln.length){this._data.search.sln=null;this.search(str,true)}else{$.each(this._data.search.sln,function(i,v){if(m[v]){$.vakata.array_remove_item(t._data.search.sln,v);if(!m[v].state.loaded){t.load_node(v,function(o,s){if(s){t._search_load(str)}});res=false}}});if(res){this._data.search.sln=[];this._search_load(str)}}}}};(function($){$.vakata.search=function(pattern,txt,options){options=options||{};if(options.fuzzy!==false){options.fuzzy=true}pattern=options.caseSensitive?pattern:pattern.toLowerCase();var MATCH_LOCATION=options.location||0,MATCH_DISTANCE=options.distance||100,MATCH_THRESHOLD=options.threshold||.6,patternLen=pattern.length,matchmask,pattern_alphabet,match_bitapScore,search;if(patternLen>32){options.fuzzy=false}if(options.fuzzy){matchmask=1<<patternLen-1;pattern_alphabet=function(){var mask={},i=0;for(i=0;i<patternLen;i++){mask[pattern.charAt(i)]=0}for(i=0;i<patternLen;i++){mask[pattern.charAt(i)]|=1<<patternLen-i-1}return mask}();match_bitapScore=function(e,x){var accuracy=e/patternLen,proximity=Math.abs(MATCH_LOCATION-x);if(!MATCH_DISTANCE){return proximity?1:accuracy}return accuracy+proximity/MATCH_DISTANCE}}search=function(text){text=options.caseSensitive?text:text.toLowerCase();if(pattern===text||text.indexOf(pattern)!==-1){return{isMatch:true,score:0}}if(!options.fuzzy){return{isMatch:false,score:1}}var i,j,textLen=text.length,scoreThreshold=MATCH_THRESHOLD,bestLoc=text.indexOf(pattern,MATCH_LOCATION),binMin,binMid,binMax=patternLen+textLen,lastRd,start,finish,rd,charMatch,score=1,locations=[];if(bestLoc!==-1){scoreThreshold=Math.min(match_bitapScore(0,bestLoc),scoreThreshold);bestLoc=text.lastIndexOf(pattern,MATCH_LOCATION+patternLen);if(bestLoc!==-1){scoreThreshold=Math.min(match_bitapScore(0,bestLoc),scoreThreshold)}}bestLoc=-1;for(i=0;i<patternLen;i++){binMin=0;binMid=binMax;while(binMin<binMid){if(match_bitapScore(i,MATCH_LOCATION+binMid)<=scoreThreshold){binMin=binMid}else{binMax=binMid}binMid=Math.floor((binMax-binMin)/2+binMin)}binMax=binMid;start=Math.max(1,MATCH_LOCATION-binMid+1);finish=Math.min(MATCH_LOCATION+binMid,textLen)+patternLen;rd=new Array(finish+2);rd[finish+1]=(1<<i)-1;for(j=finish;j>=start;j--){charMatch=pattern_alphabet[text.charAt(j-1)];if(i===0){rd[j]=(rd[j+1]<<1|1)&charMatch}else{rd[j]=(rd[j+1]<<1|1)&charMatch|((lastRd[j+1]|lastRd[j])<<1|1)|lastRd[j+1]}if(rd[j]&matchmask){score=match_bitapScore(i,j-1);if(score<=scoreThreshold){scoreThreshold=score;bestLoc=j-1;locations.push(bestLoc);if(bestLoc>MATCH_LOCATION){start=Math.max(1,2*MATCH_LOCATION-bestLoc)}else{break}}}}if(match_bitapScore(i+1,MATCH_LOCATION)>scoreThreshold){break}lastRd=rd}return{isMatch:bestLoc>=0,score:score}};return txt===true?{search:search}:search(txt)}})(jQuery);$.jstree.defaults.sort=function(a,b){return this.get_text(a)>this.get_text(b)?1:-1};$.jstree.plugins.sort=function(options,parent){this.bind=function(){parent.bind.call(this);this.element.on("model.jstree",$.proxy(function(e,data){this.sort(data.parent,true)},this)).on("rename_node.jstree create_node.jstree",$.proxy(function(e,data){this.sort(data.parent||data.node.parent,false);this.redraw_node(data.parent||data.node.parent,true)},this)).on("move_node.jstree copy_node.jstree",$.proxy(function(e,data){this.sort(data.parent,false);this.redraw_node(data.parent,true)},this))};this.sort=function(obj,deep){var i,j;obj=this.get_node(obj);if(obj&&obj.children&&obj.children.length){obj.children.sort($.proxy(this.settings.sort,this));if(deep){for(i=0,j=obj.children_d.length;i<j;i++){this.sort(obj.children_d[i],false)}}}}};var to=false;$.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree",ttl:false,filter:false};$.jstree.plugins.state=function(options,parent){this.bind=function(){parent.bind.call(this);var bind=$.proxy(function(){this.element.on(this.settings.state.events,$.proxy(function(){if(to){clearTimeout(to)}to=setTimeout($.proxy(function(){this.save_state()},this),100)},this))},this);this.element.on("ready.jstree",$.proxy(function(e,data){this.element.one("restore_state.jstree",bind);if(!this.restore_state()){bind()}},this))};this.save_state=function(){var st={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};$.vakata.storage.set(this.settings.state.key,JSON.stringify(st))};this.restore_state=function(){var k=$.vakata.storage.get(this.settings.state.key);if(!!k){try{k=JSON.parse(k)}catch(ex){return false}}if(!!k&&k.ttl&&k.sec&&+new Date-k.sec>k.ttl){return false}if(!!k&&k.state){k=k.state}if(!!k&&$.isFunction(this.settings.state.filter)){k=this.settings.state.filter.call(this,k)}if(!!k){this.element.one("set_state.jstree",function(e,data){data.instance.trigger("restore_state",{state:$.extend(true,{},k)})});this.set_state(k);return true}return false};this.clear_state=function(){return $.vakata.storage.del(this.settings.state.key)}};(function($,undefined){$.vakata.storage={set:function(key,val){return window.localStorage.setItem(key,val)},get:function(key){return window.localStorage.getItem(key)},del:function(key){return window.localStorage.removeItem(key)}}})(jQuery);$.jstree.defaults.types={"#":{},default:{}};$.jstree.plugins.types=function(options,parent){this.init=function(el,options){var i,j;if(options&&options.types&&options.types["default"]){for(i in options.types){if(i!=="default"&&i!=="#"&&options.types.hasOwnProperty(i)){for(j in options.types["default"]){if(options.types["default"].hasOwnProperty(j)&&options.types[i][j]===undefined){options.types[i][j]=options.types["default"][j]}}}}}parent.init.call(this,el,options);this._model.data["#"].type="#"};this.bind=function(){parent.bind.call(this);this.element.on("model.jstree",$.proxy(function(e,data){var m=this._model.data,dpc=data.nodes,t=this.settings.types,i,j,c="default";for(i=0,j=dpc.length;i<j;i++){c="default";if(m[dpc[i]].original&&m[dpc[i]].original.type&&t[m[dpc[i]].original.type]){c=m[dpc[i]].original.type}if(m[dpc[i]].data&&m[dpc[i]].data.jstree&&m[dpc[i]].data.jstree.type&&t[m[dpc[i]].data.jstree.type]){c=m[dpc[i]].data.jstree.type}m[dpc[i]].type=c;if(m[dpc[i]].icon===true&&t[c].icon!==undefined){m[dpc[i]].icon=t[c].icon}}},this))};this.get_json=function(obj,options,flat){var i,j,m=this._model.data,opt=options?$.extend(true,{},options,{no_id:false}):{},tmp=parent.get_json.call(this,obj,opt,flat);if(tmp===false){return false}if($.isArray(tmp)){for(i=0,j=tmp.length;i<j;i++){tmp[i].type=tmp[i].id&&m[tmp[i].id]&&m[tmp[i].id].type?m[tmp[i].id].type:"default";if(options&&options.no_id){delete tmp[i].id;if(tmp[i].li_attr&&tmp[i].li_attr.id){delete tmp[i].li_attr.id}}}}else{tmp.type=tmp.id&&m[tmp.id]&&m[tmp.id].type?m[tmp.id].type:"default";if(options&&options.no_id){tmp=this._delete_ids(tmp)}}return tmp};this._delete_ids=function(tmp){if($.isArray(tmp)){for(var i=0,j=tmp.length;i<j;i++){tmp[i]=this._delete_ids(tmp[i])}return tmp}delete tmp.id;if(tmp.li_attr&&tmp.li_attr.id){delete tmp.li_attr.id}if(tmp.children&&$.isArray(tmp.children)){tmp.children=this._delete_ids(tmp.children)}return tmp};this.check=function(chk,obj,par,pos){if(parent.check.call(this,chk,obj,par,pos)===false){return false}obj=obj&&obj.id?obj:this.get_node(obj);par=par&&par.id?par:this.get_node(par);var m=obj&&obj.id?$.jstree.reference(obj.id):null,tmp,d,i,j;m=m&&m._model&&m._model.data?m._model.data:null;switch(chk){case"create_node":case"move_node":case"copy_node":if(chk!=="move_node"||$.inArray(obj.id,par.children)===-1){tmp=this.get_rules(par);if(tmp.max_children!==undefined&&tmp.max_children!==-1&&tmp.max_children===par.children.length){this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})};return false}if(tmp.valid_children!==undefined&&tmp.valid_children!==-1&&$.inArray(obj.type,tmp.valid_children)===-1){this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})};return false}if(m&&obj.children_d&&obj.parents){d=0;for(i=0,j=obj.children_d.length;i<j;i++){d=Math.max(d,m[obj.children_d[i]].parents.length)}d=d-obj.parents.length+1}if(d<=0||d===undefined){d=1}do{if(tmp.max_depth!==undefined&&tmp.max_depth!==-1&&tmp.max_depth<d){this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})};return false}par=this.get_node(par.parent);tmp=this.get_rules(par);d++}while(par)}break}return true};this.get_rules=function(obj){obj=this.get_node(obj);if(!obj){return false}var tmp=this.get_type(obj,true);if(tmp.max_depth===undefined){tmp.max_depth=-1}if(tmp.max_children===undefined){tmp.max_children=-1}if(tmp.valid_children===undefined){tmp.valid_children=-1}return tmp};this.get_type=function(obj,rules){obj=this.get_node(obj);return!obj?false:rules?$.extend({type:obj.type},this.settings.types[obj.type]):obj.type};this.set_type=function(obj,type){var t,t1,t2,old_type,old_icon;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.set_type(obj[t1],type)}return true}t=this.settings.types;obj=this.get_node(obj);if(!t[type]||!obj){return false}old_type=obj.type;old_icon=this.get_icon(obj);obj.type=type;if(old_icon===true||t[old_type]&&t[old_type].icon&&old_icon===t[old_type].icon){this.set_icon(obj,t[type].icon!==undefined?t[type].icon:true)}return true}};$.jstree.plugins.unique=function(options,parent){this.check=function(chk,obj,par,pos){if(parent.check.call(this,chk,obj,par,pos)===false){return false}obj=obj&&obj.id?obj:this.get_node(obj);par=par&&par.id?par:this.get_node(par);if(!par||!par.children){return true}var n=chk==="rename_node"?pos:obj.text,c=[],m=this._model.data,i,j;for(i=0,j=par.children.length;i<j;i++){c.push(m[par.children[i]].text)}switch(chk){case"delete_node":return true;case"rename_node":case"copy_node":i=$.inArray(n,c)===-1;if(!i){this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+n+" already exists. Preventing: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})}}return i;case"move_node":i=obj.parent===par.id||$.inArray(n,c)===-1;if(!i){this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+n+" already exists. Preventing: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:obj&&obj.id?obj.id:false,par:par&&par.id?par.id:false})}}return i}return true}};var div=document.createElement("DIV");div.setAttribute("unselectable","on");div.className="jstree-wholerow";div.innerHTML="&#160;";$.jstree.plugins.wholerow=function(options,parent){this.bind=function(){parent.bind.call(this);this.element.on("loading",$.proxy(function(){div.style.height=this._data.core.li_height+"px"},this)).on("ready.jstree set_state.jstree",$.proxy(function(){this.hide_dots()},this)).on("ready.jstree",$.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",$.proxy(function(e,data){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",$.proxy(function(e,data){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var tmp=false,i,j;for(i=0,j=data.selected.length;i<j;i++){tmp=this.get_node(data.selected[i],true);if(tmp&&tmp.length){tmp.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}}},this)).on("open_node.jstree",$.proxy(function(e,data){this.get_node(data.node,true).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",$.proxy(function(e,data){this.get_node(data.node,true).children(".jstree-wholerow")[e.type==="hover_node"?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",$.proxy(function(e){e.preventDefault();$(e.currentTarget).closest("li").children("a:eq(0)").trigger("contextmenu",e)},this)).on("click.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var tmp=$.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});$(e.currentTarget).closest("li").children("a:eq(0)").trigger(tmp).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",$.proxy(function(e){e.stopImmediatePropagation();var tmp=$.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});$(e.currentTarget).closest("li").children("a:eq(0)").trigger(tmp).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",$.proxy(function(e){e.stopImmediatePropagation();this.hover_node(e.currentTarget);return false},this)).on("mouseleave.jstree",".jstree-node",$.proxy(function(e){this.dehover_node(e.currentTarget)},this))};this.teardown=function(){if(this.settings.wholerow){this.element.find(".jstree-wholerow").remove()}parent.teardown.call(this)};this.redraw_node=function(obj,deep,callback){obj=parent.redraw_node.call(this,obj,deep,callback);if(obj){var tmp=div.cloneNode(true);if($.inArray(obj.id,this._data.core.selected)!==-1){tmp.className+=" jstree-wholerow-clicked"}obj.insertBefore(tmp,obj.childNodes[0])}return obj}}});(function($,window,document,undefined){$.fn.accordion=function(parameters){var $allModules=$(this),time=(new Date).getTime(),performance=[],query=arguments[0],methodInvoked=typeof query=="string",queryArguments=[].slice.call(arguments,1),returnedValue;$allModules.each(function(){var settings=$.isPlainObject(parameters)?$.extend(true,{},$.fn.accordion.settings,parameters):$.extend({},$.fn.accordion.settings),className=settings.className,namespace=settings.namespace,selector=settings.selector,error=settings.error,eventNamespace="."+namespace,moduleNamespace="module-"+namespace,moduleSelector=$allModules.selector||"",$module=$(this),$title=$module.find(selector.title),$content=$module.find(selector.content),element=this,instance=$module.data(moduleNamespace),module;module={initialize:function(){module.debug("Initializing accordion with bound events",$module);$title.on("click"+eventNamespace,module.event.click);module.instantiate()},instantiate:function(){instance=module;$module.data(moduleNamespace,module)},destroy:function(){module.debug("Destroying previous accordion for",$module);$module.removeData(moduleNamespace);$title.off(eventNamespace)},event:{click:function(){module.verbose("Title clicked",this);var $activeTitle=$(this),index=$title.index($activeTitle);module.toggle(index)},resetDisplay:function(){$(this).css("display","");if($(this).attr("style")==""){$(this).attr("style","").removeAttr("style")}},resetOpacity:function(){$(this).css("opacity","");if($(this).attr("style")==""){$(this).attr("style","").removeAttr("style")}}},toggle:function(index){module.debug("Toggling content content at index",index);var $activeTitle=$title.eq(index),$activeContent=$activeTitle.next($content),contentIsOpen=$activeContent.is(":visible");if(contentIsOpen){if(settings.collapsible){module.close(index)}else{module.debug("Cannot close accordion content collapsing is disabled")}}else{module.open(index)}},open:function(index){var $activeTitle=$title.eq(index),$activeContent=$activeTitle.next($content),$previousTitle=$activeTitle.siblings(selector.title).filter("."+className.active),$previousContent=$previousTitle.next($title),contentIsOpen=$previousTitle.size()>0;if(!$activeContent.is(":animated")){module.debug("Opening accordion content",$activeTitle);if(settings.exclusive&&contentIsOpen){$previousTitle.removeClass(className.active);$previousContent.stop().children().stop().animate({opacity:0},settings.duration,module.event.resetOpacity).end().slideUp(settings.duration,settings.easing,function(){$previousContent.removeClass(className.active).children();$.proxy(module.event.resetDisplay,this)()})}$activeTitle.addClass(className.active);$activeContent.stop().children().stop().animate({opacity:1},settings.duration).end().slideDown(settings.duration,settings.easing,function(){$activeContent.addClass(className.active);$.proxy(module.event.resetDisplay,this)();$.proxy(settings.onOpen,$activeContent)();$.proxy(settings.onChange,$activeContent)()})}},close:function(index){var $activeTitle=$title.eq(index),$activeContent=$activeTitle.next($content);module.debug("Closing accordion content",$activeContent);$activeTitle.removeClass(className.active);$activeContent.removeClass(className.active).show().stop().children().stop().animate({opacity:0},settings.duration,module.event.resetOpacity).end().slideUp(settings.duration,settings.easing,function(){$.proxy(module.event.resetDisplay,this)();$.proxy(settings.onClose,$activeContent)();$.proxy(settings.onChange,$activeContent)()})},setting:function(name,value){if($.isPlainObject(name)){$.extend(true,settings,name)}else if(value!==undefined){settings[name]=value}else{return settings[name]}},internal:function(name,value){module.debug("Changing internal",name,value);if(value!==undefined){if($.isPlainObject(name)){$.extend(true,module,name)}else{module[name]=value}}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found}};if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}});return returnedValue!==undefined?returnedValue:this};$.fn.accordion.settings={name:"Accordion",namespace:"accordion",debug:true,verbose:true,performance:true,exclusive:true,collapsible:true,duration:500,easing:"easeInOutQuint",onOpen:function(){},onClose:function(){},onChange:function(){},error:{method:"The method you called is not defined"},className:{active:"active"},selector:{title:".title",content:".content"}};$.extend($.easing,{easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b}})})(jQuery,window,document);(function($,window,document,undefined){$.api=$.fn.api=function(parameters){var settings=$.extend(true,{},$.api.settings,parameters),context=typeof this!="function"?this:$("<div/>"),$context=settings.stateContext?$(settings.stateContext):$(context),$module=typeof this=="object"?$(context):$context,element=this,time=(new Date).getTime(),performance=[],moduleSelector=$module.selector||"",moduleNamespace=settings.namespace+"-module",className=settings.className,metadata=settings.metadata,error=settings.error,instance=$module.data(moduleNamespace),query=arguments[0],methodInvoked=instance!==undefined&&typeof query=="string",queryArguments=[].slice.call(arguments,1),module,returnedValue;module={initialize:function(){var runSettings,loadingTimer=(new Date).getTime(),loadingDelay,promise,url,formData={},data,ajaxSettings={},xhr;if(settings.serializeForm&&$(this).toJSON()!==undefined){formData=module.get.formData();module.debug("Adding form data to API Request",formData);$.extend(true,settings.data,formData)}runSettings=$.proxy(settings.beforeSend,$module)(settings);if(runSettings!==undefined&&!runSettings){module.error(error.beforeSend);module.reset();return}url=module.get.url(module.get.templateURL());if(!url){module.error(error.missingURL);module.reset();return}promise=$.Deferred().always(function(){if(settings.stateContext){$context.removeClass(className.loading)}$.proxy(settings.complete,$module)()}).done(function(response){module.debug("API request successful");if(settings.dataType=="json"){if(response.error!==undefined){$.proxy(settings.failure,$context)(response.error,settings,$module)}else if($.isArray(response.errors)){$.proxy(settings.failure,$context)(response.errors[0],settings,$module)}else{$.proxy(settings.success,$context)(response,settings,$module)}}else{$.proxy(settings.success,$context)(response,settings,$module)}}).fail(function(xhr,status,httpMessage){var errorMessage=settings.error[status]!==undefined?settings.error[status]:httpMessage,response;if(xhr!==undefined){if(xhr.readyState!==undefined&&xhr.readyState==4){if(xhr.status!=200&&httpMessage!==undefined&&httpMessage!==""){module.error(error.statusMessage+httpMessage)}else{if(status=="error"&&settings.dataType=="json"){try{response=$.parseJSON(xhr.responseText);if(response&&response.error!==undefined){errorMessage=response.error}}catch(error){module.error(error.JSONParse)}}}$context.removeClass(className.loading).addClass(className.error);if(settings.errorLength>0){setTimeout(function(){$context.removeClass(className.error)},settings.errorLength)}module.debug("API Request error:",errorMessage);$.proxy(settings.failure,$context)(errorMessage,settings,this)}else{module.debug("Request Aborted (Most likely caused by page change)")}}});$.extend(true,ajaxSettings,settings,{success:function(){},failure:function(){},complete:function(){},type:settings.method||settings.type,data:data,url:url,beforeSend:settings.beforeXHR});if(settings.stateContext){$context.addClass(className.loading)}if(settings.progress){module.verbose("Adding progress events");$.extend(true,ajaxSettings,{xhr:function(){var xhr=new window.XMLHttpRequest;xhr.upload.addEventListener("progress",function(event){var percentComplete;if(event.lengthComputable){percentComplete=Math.round(event.loaded/event.total*1e4)/100+"%";$.proxy(settings.progress,$context)(percentComplete,event)}},false);xhr.addEventListener("progress",function(event){var percentComplete;if(event.lengthComputable){percentComplete=Math.round(event.loaded/event.total*1e4)/100+"%";$.proxy(settings.progress,$context)(percentComplete,event)}},false);return xhr}})}module.verbose("Creating AJAX request with settings: ",ajaxSettings);xhr=$.ajax(ajaxSettings).always(function(){loadingDelay=settings.loadingLength-((new Date).getTime()-loadingTimer);settings.loadingDelay=loadingDelay<0?0:loadingDelay}).done(function(response){var context=this;setTimeout(function(){promise.resolveWith(context,[response])},settings.loadingDelay)}).fail(function(xhr,status,httpMessage){var context=this;if(status!="abort"){setTimeout(function(){promise.rejectWith(context,[xhr,status,httpMessage])},settings.loadingDelay)}else{$context.removeClass(className.error).removeClass(className.loading)}});if(settings.stateContext){$module.data(metadata.promise,promise).data(metadata.xhr,xhr)}},get:{formData:function(){return $module.closest("form").toJSON()},templateURL:function(){var action=$module.data(settings.metadata.action)||settings.action||false,url;if(action){module.debug("Creating url for: ",action);if(settings.api[action]!==undefined){url=settings.api[action]}else{module.error(error.missingAction)}}if(settings.url){url=settings.url;
module.debug("Getting url",url)}return url},url:function(url,urlData){var urlVariables;if(url){urlVariables=url.match(settings.regExpTemplate);urlData=urlData||settings.urlData;if(urlVariables){module.debug("Looking for URL variables",urlVariables);$.each(urlVariables,function(index,templateValue){var term=templateValue.substr(2,templateValue.length-3),termValue=$.isPlainObject(urlData)&&urlData[term]!==undefined?urlData[term]:$module.data(term)!==undefined?$module.data(term):urlData[term];module.verbose("Looking for variable",term,$module,$module.data(term),urlData[term]);if(termValue===false){module.debug("Removing variable from URL",urlVariables);url=url.replace("/"+templateValue,"")}else if(termValue===undefined||!termValue){module.error(error.missingParameter+term);url=false;return false}else{url=url.replace(templateValue,termValue)}})}}return url}},reset:function(){$module.data(metadata.promise,false).data(metadata.xhr,false);$context.removeClass(className.error).removeClass(className.loading)},setting:function(name,value){if($.isPlainObject(name)){$.extend(true,settings,name)}else if(value!==undefined){settings[name]=value}else{return settings[name]}},internal:function(name,value){if($.isPlainObject(name)){$.extend(true,module,name)}else if(value!==undefined){module[name]=value}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found}};if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}return returnedValue!==undefined?returnedValue:this};$.fn.apiButton=function(parameters){$(this).each(function(){var $module=$(this),selector=$(this).selector||"",settings=$.isFunction(parameters)?$.extend(true,{},$.api.settings,$.fn.apiButton.settings,{stateContext:this,success:parameters}):$.extend(true,{},$.api.settings,$.fn.apiButton.settings,{stateContext:this},parameters),module;module={initialize:function(){if(settings.context&&selector!==""){$(settings.context).on(selector,"click."+settings.namespace,module.click)}else{$module.on("click."+settings.namespace,module.click)}},click:function(){if(!settings.filter||$(this).filter(settings.filter).size()===0){$.proxy($.api,this)(settings)}}};module.initialize()});return this};$.api.settings={name:"API",namespace:"api",debug:true,verbose:true,performance:true,api:{},beforeSend:function(settings){return settings},beforeXHR:function(xhr){},success:function(response){},complete:function(response){},failure:function(errorCode){},progress:false,error:{missingAction:"API action used but no url was defined",missingURL:"URL not specified for the API action",missingParameter:"Missing an essential URL parameter: ",timeout:"Your request timed out",error:"There was an error with your request",parseError:"There was an error parsing your request",JSONParse:"JSON could not be parsed during error handling",statusMessage:"Server gave an error: ",beforeSend:"The before send function has aborted the request",exitConditions:"API Request Aborted. Exit conditions met"},className:{loading:"loading",error:"error"},metadata:{action:"action",promise:"promise",xhr:"xhr"},regExpTemplate:/\{\$([A-z]+)\}/g,action:false,url:false,urlData:false,serializeForm:false,stateContext:false,method:"get",data:{},dataType:"json",cache:true,loadingLength:200,errorLength:2e3};$.fn.apiButton.settings={filter:".disabled, .loading",context:false,stateContext:false}})(jQuery,window,document);(function($,window,document,undefined){$.fn.colorize=function(parameters){var settings=$.extend(true,{},$.fn.colorize.settings,parameters),moduleArguments=arguments||false;$(this).each(function(instanceIndex){var $module=$(this),mainCanvas=$("<canvas />")[0],imageCanvas=$("<canvas />")[0],overlayCanvas=$("<canvas />")[0],backgroundImage=new Image,mainContext,imageContext,overlayContext,image,imageName,width,height,colors=settings.colors,paths=settings.paths,namespace=settings.namespace,error=settings.error,instance=$module.data("module-"+namespace),module;module={checkPreconditions:function(){module.debug("Checking pre-conditions");if(!$.isPlainObject(colors)||$.isEmptyObject(colors)){module.error(error.undefinedColors);return false}return true},async:function(callback){if(settings.async){setTimeout(callback,0)}else{callback()}},getMetadata:function(){module.debug("Grabbing metadata");image=$module.data("image")||settings.image||undefined;imageName=$module.data("name")||settings.name||instanceIndex;width=settings.width||$module.width();height=settings.height||$module.height();if(width===0||height===0){module.error(error.undefinedSize)}},initialize:function(){module.debug("Initializing with colors",colors);if(module.checkPreconditions()){module.async(function(){module.getMetadata();module.canvas.create();module.draw.image(function(){module.draw.colors();module.canvas.merge()});$module.data("module-"+namespace,module)})}},redraw:function(){module.debug("Redrawing image");module.async(function(){module.canvas.clear();module.draw.colors();module.canvas.merge()})},change:{color:function(colorName,color){module.debug("Changing color",colorName);if(colors[colorName]===undefined){module.error(error.missingColor);return false}colors[colorName]=color;module.redraw()}},canvas:{create:function(){module.debug("Creating canvases");mainCanvas.width=width;mainCanvas.height=height;imageCanvas.width=width;imageCanvas.height=height;overlayCanvas.width=width;overlayCanvas.height=height;mainContext=mainCanvas.getContext("2d");imageContext=imageCanvas.getContext("2d");overlayContext=overlayCanvas.getContext("2d");$module.append(mainCanvas);mainContext=$module.children("canvas")[0].getContext("2d")},clear:function(context){module.debug("Clearing canvas");overlayContext.fillStyle="#FFFFFF";overlayContext.fillRect(0,0,width,height)},merge:function(){if(!$.isFunction(mainContext.blendOnto)){module.error(error.missingPlugin);return}mainContext.putImageData(imageContext.getImageData(0,0,width,height),0,0);overlayContext.blendOnto(mainContext,"multiply")}},draw:{image:function(callback){module.debug("Drawing image");callback=callback||function(){};if(image){backgroundImage.src=image;backgroundImage.onload=function(){imageContext.drawImage(backgroundImage,0,0);callback()}}else{module.error(error.noImage);callback()}},colors:function(){module.debug("Drawing color overlays",colors);$.each(colors,function(colorName,color){settings.onDraw(overlayContext,imageName,colorName,color)})}},debug:function(message,variableName){if(settings.debug){if(variableName!==undefined){console.info(settings.name+": "+message,variableName)}else{console.info(settings.name+": "+message)}}},error:function(errorMessage){console.warn(settings.name+": "+errorMessage)},invoke:function(methodName,context,methodArguments){var method;methodArguments=methodArguments||Array.prototype.slice.call(arguments,2);if(typeof methodName=="string"&&instance!==undefined){methodName=methodName.split(".");$.each(methodName,function(index,name){if($.isPlainObject(instance[name])){instance=instance[name];return true}else if($.isFunction(instance[name])){method=instance[name];return true}module.error(settings.error.method);return false})}return $.isFunction(method)?method.apply(context,methodArguments):false}};if(instance!==undefined&&moduleArguments){if(moduleArguments[0]=="invoke"){moduleArguments=Array.prototype.slice.call(moduleArguments,1)}return module.invoke(moduleArguments[0],this,Array.prototype.slice.call(moduleArguments,1))}module.initialize()});return this};$.fn.colorize.settings={name:"Image Colorizer",debug:true,namespace:"colorize",onDraw:function(overlayContext,imageName,colorName,color){},async:true,colors:{},metadata:{image:"image",name:"name"},error:{noImage:"No tracing image specified",undefinedColors:"No default colors specified.",missingColor:"Attempted to change color that does not exist",missingPlugin:"Blend onto plug-in must be included",undefinedHeight:"The width or height of image canvas could not be automatically determined. Please specify a height."}}})(jQuery,window,document);(function($,window,document,undefined){$.fn.form=function(fields,parameters){var $allModules=$(this),settings=$.extend(true,{},$.fn.form.settings,parameters),validation=$.extend({},$.fn.form.settings.defaults,fields),namespace=settings.namespace,metadata=settings.metadata,selector=settings.selector,className=settings.className,error=settings.error,eventNamespace="."+namespace,moduleNamespace="module-"+namespace,moduleSelector=$allModules.selector||"",time=(new Date).getTime(),performance=[],query=arguments[0],methodInvoked=typeof query=="string",queryArguments=[].slice.call(arguments,1),returnedValue;$allModules.each(function(){var $module=$(this),$field=$(this).find(selector.field),$group=$(this).find(selector.group),$message=$(this).find(selector.message),$prompt=$(this).find(selector.prompt),$submit=$(this).find(selector.submit),formErrors=[],element=this,instance=$module.data(moduleNamespace),module;module={initialize:function(){module.verbose("Initializing form validation",$module,validation,settings);module.bindEvents();module.instantiate()},instantiate:function(){module.verbose("Storing instance of module",module);instance=module;$module.data(moduleNamespace,module)},destroy:function(){module.verbose("Destroying previous module",instance);module.removeEvents();$module.removeData(moduleNamespace)},refresh:function(){module.verbose("Refreshing selector cache");$field=$module.find(selector.field)},submit:function(){module.verbose("Submitting form",$module);$module.submit()},bindEvents:function(){if(settings.keyboardShortcuts){$field.on("keydown"+eventNamespace,module.event.field.keydown)}$module.on("submit"+eventNamespace,module.validate.form);$field.on("blur"+eventNamespace,module.event.field.blur);$submit.on("click"+eventNamespace,module.submit);$field.each(function(){var type=$(this).prop("type"),inputEvent=module.get.changeEvent(type);if(settings.inline==true){}$(this).on(inputEvent+eventNamespace,module.event.field.change)})},removeEvents:function(){$module.off(eventNamespace);$field.off(eventNamespace);$submit.off(eventNamespace);$field.off(eventNamespace)},event:{field:{keydown:function(event){var $field=$(this),key=event.which,keyCode={enter:13,escape:27};if(key==keyCode.escape){module.verbose("Escape key pressed blurring field");$field.blur()}if(!event.ctrlKey&&key==keyCode.enter&&$field.is(selector.input)){module.debug("Enter key pressed, submitting form");$submit.addClass(className.down);$field.one("keyup"+eventNamespace,module.event.field.keyup);event.preventDefault();return false}},keyup:function(){module.verbose("Doing keyboard shortcut form submit");$submit.removeClass(className.down);module.submit()},blur:function(){var $field=$(this),$fieldGroup=$field.closest($group);if($fieldGroup.hasClass(className.error)){module.debug("Revalidating field",$field,module.get.validation($field));module.validate.field(module.get.validation($field))}else if(settings.on=="blur"||settings.on=="change"){module.validate.field(module.get.validation($field))}},change:function(){var $field=$(this),$fieldGroup=$field.closest($group);if(settings.on=="change"||$fieldGroup.hasClass(className.error)&&settings.revalidate){clearTimeout(module.timer);module.timer=setTimeout(function(){module.debug("Revalidating field",$field,module.get.validation($field));module.validate.field(module.get.validation($field))},settings.delay)}}}},get:{changeEvent:function(type){if(type=="checkbox"||type=="radio"){return"change"}else{return document.createElement("input").oninput!==undefined?"input":document.createElement("input").onpropertychange!==undefined?"propertychange":"keyup"}},field:function(identifier){module.verbose("Finding field with identifier",identifier);if($field.filter("#"+identifier).size()>0){return $field.filter("#"+identifier)}else if($field.filter('[name="'+identifier+'"]').size()>0){return $field.filter('[name="'+identifier+'"]')}else if($field.filter("[data-"+metadata.validate+'="'+identifier+'"]').size()>0){return $field.filter("[data-"+metadata.validate+'="'+identifier+'"]')}return $("<input/>")},validation:function($field){var rules;$.each(validation,function(fieldName,field){if(module.get.field(field.identifier).get(0)==$field.get(0)){rules=field}});return rules||false}},has:{field:function(identifier){module.verbose("Checking for existence of a field with identifier",identifier);if($field.filter("#"+identifier).size()>0){return true}else if($field.filter('[name="'+identifier+'"]').size()>0){return true}else if($field.filter("[data-"+metadata.validate+'="'+identifier+'"]').size()>0){return true}return false}},add:{prompt:function(identifier,errors){var $field=module.get.field(identifier),$fieldGroup=$field.closest($group),$prompt=$fieldGroup.find(selector.prompt),promptExists=$prompt.size()!==0;errors=typeof errors=="string"?[errors]:errors;module.verbose("Adding field error state",identifier);$fieldGroup.addClass(className.error);if(settings.inline){if(!promptExists){$prompt=settings.templates.prompt(errors);$prompt.appendTo($fieldGroup)}$prompt.html(errors[0]);if(!promptExists){if(settings.transition&&$.fn.transition!==undefined&&$module.transition("is supported")){module.verbose("Displaying error with css transition",settings.transition);$prompt.transition(settings.transition+" in",settings.duration)}else{module.verbose("Displaying error with fallback javascript animation");$prompt.fadeIn(settings.duration)}}else{module.verbose("Inline errors are disabled, no inline error added",identifier)}}},errors:function(errors){module.debug("Adding form error messages",errors);$message.html(settings.templates.error(errors))}},remove:{prompt:function(field){var $field=module.get.field(field.identifier),$fieldGroup=$field.closest($group),$prompt=$fieldGroup.find(selector.prompt);$fieldGroup.removeClass(className.error);if(settings.inline&&$prompt.is(":visible")){module.verbose("Removing prompt for field",field);if(settings.transition&&$.fn.transition!==undefined&&$module.transition("is supported")){$prompt.transition(settings.transition+" out",settings.duration,function(){$prompt.remove()})}else{$prompt.fadeOut(settings.duration,function(){$prompt.remove()})}}}},validate:{form:function(event){var allValid=true;formErrors=[];$.each(validation,function(fieldName,field){if(!module.validate.field(field)){allValid=false}});if(allValid){module.debug("Form has no validation errors, submitting");$module.removeClass(className.error).addClass(className.success);return $.proxy(settings.onSuccess,this)(event)}else{module.debug("Form has errors");$module.addClass(className.error);if(!settings.inline){module.add.errors(formErrors)}return $.proxy(settings.onFailure,this)(formErrors)}},field:function(field){var $field=module.get.field(field.identifier),fieldValid=true,fieldErrors=[];if(field.rules!==undefined){$.each(field.rules,function(index,rule){if(module.has.field(field.identifier)&&!module.validate.rule(field,rule)){module.debug("Field is invalid",field.identifier,rule.type);fieldErrors.push(rule.prompt);fieldValid=false}})}if(fieldValid){module.remove.prompt(field,fieldErrors);$.proxy(settings.onValid,$field)()}else{formErrors=formErrors.concat(fieldErrors);module.add.prompt(field.identifier,fieldErrors);$.proxy(settings.onInvalid,$field)(fieldErrors);return false}return true},rule:function(field,validation){var $field=module.get.field(field.identifier),type=validation.type,value=$.trim($field.val()+""),bracketRegExp=/\[(.*)\]/i,bracket=bracketRegExp.exec(type),isValid=true,ancillary,functionType;if(bracket!==undefined&&bracket!==null){ancillary=""+bracket[1];functionType=type.replace(bracket[0],"");isValid=$.proxy(settings.rules[functionType],$module)(value,ancillary)}else{isValid=$.proxy(settings.rules[type],$field)(value)}return isValid}},setting:function(name,value){if($.isPlainObject(name)){$.extend(true,settings,name)}else if(value!==undefined){settings[name]=value}else{return settings[name]}},internal:function(name,value){if($.isPlainObject(name)){$.extend(true,module,name)}else if(value!==undefined){module[name]=value}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if($allModules.size()>1){title+=" "+"("+$allModules.size()+")"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found}};if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}});return returnedValue!==undefined?returnedValue:this};$.fn.form.settings={name:"Form",namespace:"form",debug:true,verbose:true,performance:true,keyboardShortcuts:true,on:"submit",inline:false,delay:200,revalidate:true,transition:"scale",duration:150,onValid:function(){},onInvalid:function(){},onSuccess:function(){return true},onFailure:function(){return false},metadata:{validate:"validate"},selector:{message:".error.message",field:"input, textarea, select",group:".field",input:"input",prompt:".prompt",submit:".submit"},className:{error:"error",success:"success",down:"down",label:"ui label prompt"},error:{method:"The method you called is not defined."},templates:{error:function(errors){var html='<ul class="list">';$.each(errors,function(index,value){html+="<li>"+value+"</li>"});html+="</ul>";return $(html)},prompt:function(errors){return $("<div/>").addClass("ui red pointing prompt label").html(errors[0])}},rules:{checked:function(){return $(this).filter(":checked").size()>0},empty:function(value){return!(value===undefined||""===value)},email:function(value){var emailRegExp=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","i");return emailRegExp.test(value)},length:function(value,requiredLength){return value!==undefined?value.length>=requiredLength:false},not:function(value,notValue){return value!=notValue},contains:function(value,text){text=text.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");return value.search(text)!==-1},is:function(value,text){return value==text},maxLength:function(value,maxLength){return value!==undefined?value.length<=maxLength:false},match:function(value,fieldIdentifier){var $form=$(this),matchingValue;if($form.find("#"+fieldIdentifier).size()>0){matchingValue=$form.find("#"+fieldIdentifier).val()}else if($form.find("[name="+fieldIdentifier+"]").size()>0){matchingValue=$form.find("[name="+fieldIdentifier+"]").val()}else if($form.find('[data-validate="'+fieldIdentifier+'"]').size()>0){matchingValue=$form.find('[data-validate="'+fieldIdentifier+'"]').val()}return matchingValue!==undefined?value.toString()==matchingValue.toString():false},url:function(value){var urlRegExp=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return urlRegExp.test(value)}}}})(jQuery,window,document);(function($,window,document,undefined){$.fn.state=function(parameters){var $allModules=$(this),settings=$.extend(true,{},$.fn.state.settings,parameters),moduleSelector=$allModules.selector||"",time=(new Date).getTime(),performance=[],query=arguments[0],methodInvoked=typeof query=="string",queryArguments=[].slice.call(arguments,1),error=settings.error,metadata=settings.metadata,className=settings.className,namespace=settings.namespace,states=settings.states,text=settings.text,eventNamespace="."+namespace,moduleNamespace=namespace+"-module",returnedValue;$allModules.each(function(){var $module=$(this),element=this,instance=$module.data(moduleNamespace),module;module={initialize:function(){module.verbose("Initializing module");if(settings.automatic){module.add.defaults()}if(settings.context&&moduleSelector!==""){if(module.allows("hover")){$(element,settings.context).on(moduleSelector,"mouseenter"+eventNamespace,module.enable.hover).on(moduleSelector,"mouseleave"+eventNamespace,module.disable.hover)}if(module.allows("down")){$(element,settings.context).on(moduleSelector,"mousedown"+eventNamespace,module.enable.down).on(moduleSelector,"mouseup"+eventNamespace,module.disable.down)}if(module.allows("focus")){$(element,settings.context).on(moduleSelector,"focus"+eventNamespace,module.enable.focus).on(moduleSelector,"blur"+eventNamespace,module.disable.focus)}$(settings.context).on(moduleSelector,"mouseenter"+eventNamespace,module.change.text).on(moduleSelector,"mouseleave"+eventNamespace,module.reset.text).on(moduleSelector,"click"+eventNamespace,module.toggle.state)}else{if(module.allows("hover")){$module.on("mouseenter"+eventNamespace,module.enable.hover).on("mouseleave"+eventNamespace,module.disable.hover)}if(module.allows("down")){$module.on("mousedown"+eventNamespace,module.enable.down).on("mouseup"+eventNamespace,module.disable.down)}if(module.allows("focus")){$module.on("focus"+eventNamespace,module.enable.focus).on("blur"+eventNamespace,module.disable.focus)}$module.on("mouseenter"+eventNamespace,module.change.text).on("mouseleave"+eventNamespace,module.reset.text).on("click"+eventNamespace,module.toggle.state)}module.instantiate()},instantiate:function(){module.verbose("Storing instance of module",module);instance=module;$module.data(moduleNamespace,module)},destroy:function(){module.verbose("Destroying previous module",instance);$module.off(eventNamespace).removeData(moduleNamespace)},refresh:function(){module.verbose("Refreshing selector cache");$module=$(element)},add:{defaults:function(){var userStates=parameters&&$.isPlainObject(parameters.states)?parameters.states:{};$.each(settings.defaults,function(type,typeStates){if(module.is[type]!==undefined&&module.is[type]()){module.verbose("Adding default states",type,element);$.extend(settings.states,typeStates,userStates)}})}},is:{active:function(){return $module.hasClass(className.active)},loading:function(){return $module.hasClass(className.loading)},inactive:function(){return!$module.hasClass(className.active)},enabled:function(){return!$module.is(settings.filter.active)},disabled:function(){return $module.is(settings.filter.active)},textEnabled:function(){return!$module.is(settings.filter.text)},button:function(){return $module.is(".button:not(a, .submit)")},input:function(){return $module.is("input")}},allow:function(state){module.debug("Now allowing state",state);states[state]=true},disallow:function(state){module.debug("No longer allowing",state);states[state]=false},allows:function(state){return states[state]||false},enable:{state:function(state){if(module.allows(state)){$module.addClass(className[state])}},focus:function(){$module.addClass(className.focus)},hover:function(){$module.addClass(className.hover)},down:function(){$module.addClass(className.down)}},disable:{state:function(state){if(module.allows(state)){$module.removeClass(className[state])}},focus:function(){$module.removeClass(className.focus)},hover:function(){$module.removeClass(className.hover)},down:function(){$module.removeClass(className.down)}},toggle:{state:function(){var apiRequest=$module.data(metadata.promise);if(module.allows("active")&&module.is.enabled()){module.refresh();if(apiRequest!==undefined){module.listenTo(apiRequest)}else{module.change.state()}}}},listenTo:function(apiRequest){module.debug("API request detected, waiting for state signal",apiRequest);if(apiRequest){if(text.loading){module.update.text(text.loading)}$.when(apiRequest).then(function(){if(apiRequest.state()=="resolved"){module.debug("API request succeeded");settings.activateTest=function(){return true};settings.deactivateTest=function(){return true}}else{module.debug("API request failed");settings.activateTest=function(){return false};settings.deactivateTest=function(){return false}}module.change.state()})}else{settings.activateTest=function(){return false};settings.deactivateTest=function(){return false}}},change:{state:function(){module.debug("Determining state change direction");if(module.is.inactive()){module.activate()}else{module.deactivate()}if(settings.sync){module.sync()}$.proxy(settings.onChange,element)()},text:function(){if(module.is.textEnabled()){if(module.is.active()){if(text.hover){module.verbose("Changing text to hover text",text.hover);module.update.text(text.hover)}else if(text.disable){module.verbose("Changing text to disable text",text.disable);module.update.text(text.disable)}}else{if(text.hover){module.verbose("Changing text to hover text",text.disable);module.update.text(text.hover)}else if(text.enable){module.verbose("Changing text to enable text",text.enable);module.update.text(text.enable)}}}}},activate:function(){if($.proxy(settings.activateTest,element)()){module.debug("Setting state to active");$module.addClass(className.active);module.update.text(text.active)}$.proxy(settings.onActivate,element)()},deactivate:function(){if($.proxy(settings.deactivateTest,element)()){module.debug("Setting state to inactive");$module.removeClass(className.active);module.update.text(text.inactive)}$.proxy(settings.onDeactivate,element)()},sync:function(){module.verbose("Syncing other buttons to current state");if(module.is.active()){$allModules.not($module).state("activate")}else{$allModules.not($module).state("deactivate")}},get:{text:function(){return settings.selector.text?$module.find(settings.selector.text).text():$module.html()},textFor:function(state){return text[state]||false}},flash:{text:function(text,duration){var previousText=module.get.text();module.debug("Flashing text message",text,duration);text=text||settings.text.flash;duration=duration||settings.flashDuration;module.update.text(text);setTimeout(function(){module.update.text(previousText)},duration)}},reset:{text:function(){var activeText=text.active||$module.data(metadata.storedText),inactiveText=text.inactive||$module.data(metadata.storedText);if(module.is.textEnabled()){if(module.is.active()&&activeText){module.verbose("Resetting active text",activeText);module.update.text(activeText)}else if(inactiveText){module.verbose("Resetting inactive text",activeText);module.update.text(inactiveText)}}}},update:{text:function(text){var currentText=module.get.text();if(text&&text!==currentText){module.debug("Updating text",text);if(settings.selector.text){$module.data(metadata.storedText,text).find(settings.selector.text).text(text)}else{$module.data(metadata.storedText,text).html(text)}}else{module.debug("Text is already sane, ignoring update",text)}}},setting:function(name,value){module.debug("Changing setting",name,value);if(value!==undefined){if($.isPlainObject(name)){$.extend(true,settings,name)}else{settings[name]=value}}else{return settings[name]}},internal:function(name,value){module.debug("Changing internal",name,value);if(value!==undefined){if($.isPlainObject(name)){$.extend(true,module,name)}else{module[name]=value}}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)
}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if($allModules.size()>1){title+=" "+"("+$allModules.size()+")"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found}};if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}});return returnedValue!==undefined?returnedValue:this};$.fn.state.settings={name:"State",debug:true,verbose:true,namespace:"state",performance:true,onActivate:function(){},onDeactivate:function(){},onChange:function(){},activateTest:function(){return true},deactivateTest:function(){return true},automatic:true,sync:false,flashDuration:3e3,filter:{text:".loading, .disabled",active:".disabled"},context:false,error:{method:"The method you called is not defined."},metadata:{promise:"promise",storedText:"stored-text"},className:{focus:"focus",hover:"hover",down:"down",active:"active",loading:"loading"},selector:{text:false},defaults:{input:{hover:true,focus:true,down:true,loading:false,active:false},button:{hover:true,focus:false,down:true,active:true,loading:true}},states:{hover:true,focus:true,down:true,loading:false,active:false},text:{flash:false,hover:false,active:false,inactive:false,enable:false,disable:false}}})(jQuery,window,document);(function($,window,document,undefined){$.fn.chatroom=function(parameters){var $allModules=$(this),moduleSelector=$allModules.selector||"",time=(new Date).getTime(),performance=[],query=arguments[0],methodInvoked=typeof query=="string",queryArguments=[].slice.call(arguments,1),returnedValue;$(this).each(function(){var settings=$.extend(true,{},$.fn.chatroom.settings,parameters),className=settings.className,namespace=settings.namespace,selector=settings.selector,error=settings.error,$module=$(this),$expandButton=$module.find(selector.expandButton),$userListButton=$module.find(selector.userListButton),$userList=$module.find(selector.userList),$room=$module.find(selector.room),$userCount=$module.find(selector.userCount),$log=$module.find(selector.log),$message=$module.find(selector.message),$messageInput=$module.find(selector.messageInput),$messageButton=$module.find(selector.messageButton),instance=$module.data("module"),element=this,html="",users={},channel,loggedInUser,message,count,height,pusher,module;module={width:{log:$log.width(),userList:$userList.outerWidth()},initialize:function(){if(Pusher===undefined){module.error(error.pusher)}if(settings.key===undefined||settings.channelName===undefined){module.error(error.key);return false}else if(!(settings.endpoint.message||settings.endpoint.authentication)){module.error(error.endpoint);return false}pusher=new Pusher(settings.key);Pusher.channel_auth_endpoint=settings.endpoint.authentication;channel=pusher.subscribe(settings.channelName);channel.bind("pusher:subscription_succeeded",module.user.list.create);channel.bind("pusher:subscription_error",module.error);channel.bind("pusher:member_added",module.user.joined);channel.bind("pusher:member_removed",module.user.left);channel.bind("update_messages",module.message.receive);$.each(settings.customEvents,function(label,value){channel.bind(label,value)});$userListButton.on("click."+namespace,module.event.toggleUserList);$expandButton.on("click."+namespace,module.event.toggleExpand);$messageInput.on("keydown."+namespace,module.event.input.keydown).on("keyup."+namespace,module.event.input.keyup);$messageButton.on("mouseenter."+namespace,module.event.hover).on("mouseleave."+namespace,module.event.hover).on("click."+namespace,module.event.submit);$log.animate({scrollTop:$log.prop("scrollHeight")},400);$module.data("module",module).addClass(className.loading)},refresh:function(){$userListButton.removeClass(className.active);module.width={log:$log.width(),userList:$userList.outerWidth()};if($userListButton.hasClass(className.active)){module.user.list.hide()}$module.data("module",module)},user:{updateCount:function(){if(settings.userCount){users=$module.data("users");count=0;$.each(users,function(){count++});$userCount.html(settings.templates.userCount(count))}},joined:function(member){users=$module.data("users");if(member.id!="anonymous"&&users[member.id]===undefined){users[member.id]=member.info;if(settings.randomColor&&member.info.color===undefined){member.info.color=settings.templates.color(member.id)}html=settings.templates.userList(member.info);if(member.info.isAdmin){$(html).prependTo($userList)}else{$(html).appendTo($userList)}if(settings.partingMessages){$log.append(settings.templates.joined(member.info));module.message.scroll.test()}module.user.updateCount()}},left:function(member){users=$module.data("users");if(member!==undefined&&member.id!=="anonymous"){delete users[member.id];$module.data("users",users);$userList.find("[data-id="+member.id+"]").remove();if(settings.partingMessages){$log.append(settings.templates.left(member.info));module.message.scroll.test()}module.user.updateCount()}},list:{create:function(members){users={};members.each(function(member){if(member.id!=="anonymous"&&member.id!=="undefined"){if(settings.randomColor&&member.info.color===undefined){member.info.color=settings.templates.color(member.id)}html=member.info.isAdmin?settings.templates.userList(member.info)+html:html+settings.templates.userList(member.info);users[member.id]=member.info}});$module.data("users",users).data("user",users[members.me.id]).removeClass(className.loading);$userList.html(html);module.user.updateCount();$.proxy(settings.onJoin,$userList.children())()},show:function(){$log.animate({width:module.width.log-module.width.userList},{duration:settings.speed,easing:settings.easing,complete:module.message.scroll.move})},hide:function(){$log.stop().animate({width:module.width.log},{duration:settings.speed,easing:settings.easing,complete:module.message.scroll.move})}}},message:{scroll:{test:function(){height=$log.prop("scrollHeight")-$log.height();if(Math.abs($log.scrollTop()-height)<settings.scrollArea){module.message.scroll.move()}},move:function(){height=$log.prop("scrollHeight")-$log.height();$log.scrollTop(height)}},send:function(message){if(!module.utils.emptyString(message)){$.api({url:settings.endpoint.message,method:"POST",data:{message:{content:message,timestamp:(new Date).getTime()}}})}},receive:function(response){message=response.data;users=$module.data("users");loggedInUser=$module.data("user");if(users[message.userID]!==undefined){if(loggedInUser===undefined||loggedInUser.id!=message.userID){message.user=users[message.userID];module.message.display(message)}}},display:function(message){$log.append(settings.templates.message(message));module.message.scroll.test();$.proxy(settings.onMessage,$log.children().last())()}},expand:function(){$module.addClass(className.expand);$.proxy(settings.onExpand,$module)();module.refresh()},contract:function(){$module.removeClass(className.expand);$.proxy(settings.onContract,$module)();module.refresh()},event:{input:{keydown:function(event){if(event.which==13){$messageButton.addClass(className.down)}},keyup:function(event){if(event.which==13){$messageButton.removeClass(className.down);module.event.submit()}}},submit:function(){var message=$messageInput.val(),loggedInUser=$module.data("user");if(loggedInUser!==undefined&&!module.utils.emptyString(message)){module.message.send(message);module.message.display({user:loggedInUser,text:message});module.message.scroll.move();$messageInput.val("")}},toggleExpand:function(){if(!$module.hasClass(className.expand)){$expandButton.addClass(className.active);module.expand()}else{$expandButton.removeClass(className.active);module.contract()}},toggleUserList:function(){if(!$log.is(":animated")){if(!$userListButton.hasClass(className.active)){$userListButton.addClass(className.active);module.user.list.show()}else{$userListButton.removeClass("active");module.user.list.hide()}}}},utils:{emptyString:function(string){if(typeof string=="string"){return string.search(/\S/)==-1}return false}},setting:function(name,value){if(value!==undefined){if($.isPlainObject(name)){$.extend(true,settings,name)}else{settings[name]=value}}else{return settings[name]}},internal:function(name,value){if($.isPlainObject(name)){$.extend(true,module,name)}else if(value!==undefined){module[name]=value}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var maxDepth,found;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&instance!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){if($.isPlainObject(instance[value])&&depth!=maxDepth){instance=instance[value]}else if(instance[value]!==undefined){found=instance[value]}else{module.error(error.method,query)}})}if($.isFunction(found)){return found.apply(context,passedArguments)}return found||false}};if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}});return returnedValue?returnedValue:this};$.fn.chatroom.settings={name:"Chat",debug:false,namespace:"chat",channel:"present-chat",onJoin:function(){},onMessage:function(){},onExpand:function(){},onContract:function(){},customEvents:{},partingMessages:false,userCount:true,randomColor:true,speed:300,easing:"easeOutQuint",scrollArea:9999,endpoint:{message:false,authentication:false},error:{method:"The method you called is not defined",endpoint:"Please define a message and authentication endpoint.",key:"You must specify a pusher key and channel.",pusher:"You must include the Pusher library."},className:{expand:"expand",active:"active",hover:"hover",down:"down",loading:"loading"},selector:{userCount:".actions .message",userListButton:".actions .list.button",expandButton:".actions .expand.button",room:".room",userList:".room .list",log:".room .log",message:".room .log .message",author:".room log .message .author",messageInput:".talk input",messageButton:".talk .send.button"},templates:{userCount:function(number){return number+" users in chat"},color:function(userID){var colors=["#000000","#333333","#666666","#999999","#CC9999","#CC6666","#CC3333","#993333","#663333","#CC6633","#CC9966","#CC9933","#999966","#CCCC66","#99CC66","#669933","#669966","#33A3CC","#336633","#33CCCC","#339999","#336666","#336699","#6666CC","#9966CC","#333399","#663366","#996699","#993366","#CC6699"];return colors[Math.floor(Math.random()*colors.length)]},message:function(message){var html="";if(message.user.isAdmin){message.user.color="#55356A";html+='<div class="admin message">';html+='<span class="quirky ui flag team"></span>'}else{html+='<div class="message">'}html+="<p>";if(message.user.color!==undefined){html+='<span class="author" style="color: '+message.user.color+';">'+message.user.name+"</span>: "}else{html+='<span class="author">'+message.user.name+"</span>: "}html+=""+message.text+" </p>"+"</div>";return html},joined:function(member){return typeof member.name!==undefined?'<div class="status">'+member.name+" has joined the chat.</div>":false},left:function(member){return typeof member.name!==undefined?'<div class="status">'+member.name+" has left the chat.</div>":false},userList:function(member){var html="";if(member.isAdmin){member.color="#55356A"}html+=""+'<div class="user" data-id="'+member.id+'">'+' <div class="image">'+'   <img src="'+member.avatarURL+'">'+" </div>";if(member.color!==undefined){html+=' <p><a href="/users/'+member.id+'" target="_blank" style="color: '+member.color+';">'+member.name+"</a></p>"}else{html+=' <p><a href="/users/'+member.id+'" target="_blank">'+member.name+"</a></p>"}html+="</div>";return html}}}})(jQuery,window,document);(function($,window,document,undefined){$.fn.checkbox=function(parameters){var $allModules=$(this),moduleSelector=$allModules.selector||"",time=(new Date).getTime(),performance=[],query=arguments[0],methodInvoked=typeof query=="string",queryArguments=[].slice.call(arguments,1),returnedValue;$allModules.each(function(){var settings=$.extend(true,{},$.fn.checkbox.settings,parameters),className=settings.className,namespace=settings.namespace,error=settings.error,eventNamespace="."+namespace,moduleNamespace="module-"+namespace,$module=$(this),$label=$(this).next(settings.selector.label).first(),$input=$(this).find(settings.selector.input),selector=$module.selector||"",instance=$module.data(moduleNamespace),element=this,module;module={initialize:function(){module.verbose("Initializing checkbox",settings);if(settings.context&&selector!==""){module.verbose("Adding delegated events");$(element,settings.context).on(selector,"click"+eventNamespace,module.toggle).on(selector+" + "+settings.selector.label,"click"+eventNamespace,module.toggle)}else{$module.on("click"+eventNamespace,module.toggle).data(moduleNamespace,module);$label.on("click"+eventNamespace,module.toggle)}module.instantiate()},instantiate:function(){module.verbose("Storing instance of module",module);instance=module;$module.data(moduleNamespace,module)},destroy:function(){module.verbose("Destroying previous module");$module.off(eventNamespace).removeData(moduleNamespace)},is:{radio:function(){return $module.hasClass(className.radio)},enabled:function(){return $input.prop("checked")!==undefined&&$input.prop("checked")},disabled:function(){return!module.is.enabled()}},can:{disable:function(){return typeof settings.required==="boolean"?settings.required:!module.is.radio()}},enable:function(){module.debug("Enabling checkbox",$input);$input.prop("checked",true).trigger("change");$.proxy(settings.onChange,$input.get())();$.proxy(settings.onEnable,$input.get())()},disable:function(){module.debug("Disabling checkbox");$input.prop("checked",false).trigger("change");$.proxy(settings.onChange,$input.get())();$.proxy(settings.onDisable,$input.get())()},toggle:function(event){module.verbose("Determining new checkbox state");if(module.is.disabled()){module.enable()}else if(module.is.enabled()&&module.can.disable()){module.disable()}},setting:function(name,value){if($.isPlainObject(name)){$.extend(true,settings,name)}else if(value!==undefined){settings[name]=value}else{return settings[name]}},internal:function(name,value){if($.isPlainObject(name)){$.extend(true,module,name)}else if(value!==undefined){module[name]=value}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found}};if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}});return returnedValue!==undefined?returnedValue:this};$.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",verbose:true,debug:true,performance:true,context:false,required:"auto",onChange:function(){},onEnable:function(){},onDisable:function(){},error:{method:"The method you called is not defined."},selector:{input:"input[type=checkbox], input[type=radio]",label:"label"},className:{radio:"radio"}}})(jQuery,window,document);(function($,window,document,undefined){$.fn.dimmer=function(parameters){var $allModules=$(this),time=(new Date).getTime(),performance=[],query=arguments[0],methodInvoked=typeof query=="string",queryArguments=[].slice.call(arguments,1),returnedValue;$allModules.each(function(){var settings=$.isPlainObject(parameters)?$.extend(true,{},$.fn.dimmer.settings,parameters):$.extend({},$.fn.dimmer.settings),selector=settings.selector,namespace=settings.namespace,className=settings.className,error=settings.error,eventNamespace="."+namespace,moduleNamespace="module-"+namespace,moduleSelector=$allModules.selector||"",clickEvent="ontouchstart"in document.documentElement?"touchstart":"click",$module=$(this),$dimmer,$dimmable,element=this,instance=$module.data(moduleNamespace),module;module={preinitialize:function(){if(module.is.dimmer()){$dimmable=$module.parent();$dimmer=$module}else{$dimmable=$module;if(module.has.dimmer()){$dimmer=$dimmable.children(selector.dimmer).first()}else{$dimmer=module.create()}}},initialize:function(){module.debug("Initializing dimmer",settings);if(settings.on=="hover"){$dimmable.on("mouseenter"+eventNamespace,module.show).on("mouseleave"+eventNamespace,module.hide)}else if(settings.on=="click"){$dimmable.on(clickEvent+eventNamespace,module.toggle)}if(module.is.page()){module.debug("Setting as a page dimmer",$dimmable);module.set.pageDimmer()}if(settings.closable){module.verbose("Adding dimmer close event",$dimmer);$dimmer.on(clickEvent+eventNamespace,module.event.click)}module.set.dimmable();module.instantiate()},instantiate:function(){module.verbose("Storing instance of module",module);instance=module;$module.data(moduleNamespace,instance)},destroy:function(){module.verbose("Destroying previous module",$dimmer);$module.removeData(moduleNamespace);$dimmable.off(eventNamespace);$dimmer.off(eventNamespace)},event:{click:function(event){module.verbose("Determining if event occured on dimmer",event);if($dimmer.find(event.target).size()===0||$(event.target).is(selector.content)){module.hide();event.stopImmediatePropagation()}}},addContent:function(element){var $content=$(element);module.debug("Add content to dimmer",$content);if($content.parent()[0]!==$dimmer[0]){$content.detach().appendTo($dimmer)}},create:function(){return $(settings.template.dimmer()).appendTo($dimmable)},animate:{show:function(callback){callback=$.isFunction(callback)?callback:function(){};module.set.dimmed();if(settings.on!="hover"&&settings.useCSS&&$.fn.transition!==undefined&&$dimmer.transition("is supported")){$dimmer.transition({animation:settings.transition+" in",queue:true,duration:module.get.duration(),complete:function(){module.set.active();callback()}})}else{module.verbose("Showing dimmer animation with javascript");$dimmer.stop().css({opacity:0,width:"100%",height:"100%"}).fadeTo(module.get.duration(),1,function(){$dimmer.removeAttr("style");module.set.active();callback()})}},hide:function(callback){callback=$.isFunction(callback)?callback:function(){};if(settings.on!="hover"&&settings.useCSS&&$.fn.transition!==undefined&&$dimmer.transition("is supported")){module.verbose("Hiding dimmer with css");$dimmer.transition({animation:settings.transition+" out",duration:module.get.duration(),queue:true,complete:function(){module.remove.dimmed();module.remove.active();callback()}})}else{module.verbose("Hiding dimmer with javascript");$dimmer.stop().fadeOut(module.get.duration(),function(){$dimmer.removeAttr("style");module.remove.dimmed();module.remove.active();callback()})}}},get:{dimmer:function(){return $dimmer},duration:function(){if(typeof settings.duration=="object"){if(module.is.active()){return settings.duration.hide}else{return settings.duration.show}}return settings.duration}},has:{dimmer:function(){return $module.children(selector.dimmer).size()>0}},is:{active:function(){return $dimmer.hasClass(className.active)},animating:function(){return $dimmer.is(":animated")||$dimmer.hasClass(className.transition)},dimmer:function(){return $module.is(selector.dimmer)},dimmable:function(){return $module.is(selector.dimmable)},dimmed:function(){return $dimmable.hasClass(className.dimmed)},disabled:function(){return $dimmable.hasClass(className.disabled)},enabled:function(){return!module.is.disabled()},page:function(){return $dimmable.is("body")},pageDimmer:function(){return $dimmer.hasClass(className.pageDimmer)}},can:{show:function(){return!$dimmer.hasClass(className.disabled)}},set:{active:function(){module.set.dimmed();$dimmer.removeClass(className.transition).addClass(className.active)},dimmable:function(){$dimmable.addClass(className.dimmable)},dimmed:function(){$dimmable.addClass(className.dimmed)},pageDimmer:function(){$dimmer.addClass(className.pageDimmer)},disabled:function(){$dimmer.addClass(className.disabled)}},remove:{active:function(){$dimmer.removeClass(className.transition).removeClass(className.active)},dimmed:function(){$dimmable.removeClass(className.dimmed)},disabled:function(){$dimmer.removeClass(className.disabled)}},show:function(callback){callback=$.isFunction(callback)?callback:function(){};module.debug("Showing dimmer",$dimmer,settings);if(!module.is.active()&&module.is.enabled()){module.animate.show(callback);$.proxy(settings.onShow,element)();$.proxy(settings.onChange,element)()}else{module.debug("Dimmer is already shown or disabled")}},hide:function(callback){callback=$.isFunction(callback)?callback:function(){};if(module.is.active()||module.is.animating()){module.debug("Hiding dimmer",$dimmer);module.animate.hide(callback);$.proxy(settings.onHide,element)();$.proxy(settings.onChange,element)()}else{module.debug("Dimmer is not visible")}},toggle:function(){module.verbose("Toggling dimmer visibility",$dimmer);if(!module.is.dimmed()){module.show()}else{module.hide()}},setting:function(name,value){if($.isPlainObject(name)){$.extend(true,settings,name)}else if(value!==undefined){settings[name]=value}else{return settings[name]}},internal:function(name,value){if($.isPlainObject(name)){$.extend(true,module,name)}else if(value!==undefined){module[name]=value}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if($allModules.size()>1){title+=" "+"("+$allModules.size()+")"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found}};module.preinitialize();if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}});return returnedValue!==undefined?returnedValue:this};$.fn.dimmer.settings={name:"Dimmer",namespace:"dimmer",debug:true,verbose:true,performance:true,transition:"fade",useCSS:true,on:false,closable:true,duration:{show:500,hide:500},onChange:function(){},onShow:function(){},onHide:function(){},error:{method:"The method you called is not defined."},selector:{dimmable:".ui.dimmable",dimmer:".ui.dimmer",content:".ui.dimmer > .content, .ui.dimmer > .content > .center"},template:{dimmer:function(){return $("<div />").attr("class","ui dimmer")}},className:{active:"active",dimmable:"ui dimmable",dimmed:"dimmed",disabled:"disabled",pageDimmer:"page",hide:"hide",show:"show",transition:"transition"}}})(jQuery,window,document);(function($,window,document,undefined){$.fn.dropdown=function(parameters){var $allModules=$(this),$document=$(document),moduleSelector=$allModules.selector||"",hasTouch="ontouchstart"in document.documentElement,time=(new Date).getTime(),performance=[],query=arguments[0],methodInvoked=typeof query=="string",queryArguments=[].slice.call(arguments,1),returnedValue;$allModules.each(function(){var settings=$.isPlainObject(parameters)?$.extend(true,{},$.fn.dropdown.settings,parameters):$.extend({},$.fn.dropdown.settings),className=settings.className,metadata=settings.metadata,namespace=settings.namespace,selector=settings.selector,error=settings.error,eventNamespace="."+namespace,moduleNamespace="module-"+namespace,$module=$(this),$item=$module.find(selector.item),$text=$module.find(selector.text),$input=$module.find(selector.input),$menu=$module.children(selector.menu),element=this,instance=$module.data(moduleNamespace),module;
module={initialize:function(){module.debug("Initializing dropdown",settings);module.save.defaults();module.set.selected();if(hasTouch){module.bind.touchEvents()}module.bind.mouseEvents();module.instantiate()},instantiate:function(){module.verbose("Storing instance of dropdown",module);instance=module;$module.data(moduleNamespace,module)},destroy:function(){module.verbose("Destroying previous dropdown for",$module);$item.off(eventNamespace);$module.off(eventNamespace).removeData(moduleNamespace)},bind:{touchEvents:function(){module.debug("Touch device detected binding touch events");$module.on("touchstart"+eventNamespace,module.event.test.toggle);$item.on("touchstart"+eventNamespace,module.event.item.mouseenter).on("touchstart"+eventNamespace,module.event.item.click)},mouseEvents:function(){module.verbose("Mouse detected binding mouse events");if(settings.on=="click"){$module.on("click"+eventNamespace,module.event.test.toggle)}else if(settings.on=="hover"){$module.on("mouseenter"+eventNamespace,module.delay.show).on("mouseleave"+eventNamespace,module.delay.hide)}else{$module.on(settings.on+eventNamespace,module.toggle)}$item.on("mouseenter"+eventNamespace,module.event.item.mouseenter).on("mouseleave"+eventNamespace,module.event.item.mouseleave).on("click"+eventNamespace,module.event.item.click)},intent:function(){module.verbose("Binding hide intent event to document");if(hasTouch){$document.on("touchstart"+eventNamespace,module.event.test.touch).on("touchmove"+eventNamespace,module.event.test.touch)}$document.on("click"+eventNamespace,module.event.test.hide)}},unbind:{intent:function(){module.verbose("Removing hide intent event from document");if(hasTouch){$document.off("touchstart"+eventNamespace).off("touchmove"+eventNamespace)}$document.off("click"+eventNamespace)}},event:{test:{toggle:function(event){if(module.determine.intent(event,module.toggle)){event.preventDefault()}},touch:function(event){module.determine.intent(event,function(){if(event.type=="touchstart"){module.timer=setTimeout(module.hide,settings.delay.touch)}else if(event.type=="touchmove"){clearTimeout(module.timer)}});event.stopPropagation()},hide:function(event){module.determine.intent(event,module.hide)}},item:{mouseenter:function(event){var $currentMenu=$(this).find(selector.menu),$otherMenus=$(this).siblings(selector.item).children(selector.menu);if($currentMenu.size()>0){clearTimeout(module.itemTimer);module.itemTimer=setTimeout(function(){module.animate.hide(false,$otherMenus);module.verbose("Showing sub-menu",$currentMenu);module.animate.show(false,$currentMenu)},settings.delay.show*2);event.preventDefault()}},mouseleave:function(event){var $currentMenu=$(this).find(selector.menu);if($currentMenu.size()>0){clearTimeout(module.itemTimer);module.itemTimer=setTimeout(function(){module.verbose("Hiding sub-menu",$currentMenu);module.animate.hide(false,$currentMenu)},settings.delay.hide)}},click:function(event){var $choice=$(this),text=$choice.data(metadata.text)!==undefined?$choice.data(metadata.text):$choice.text(),value=$choice.data(metadata.value)!==undefined?$choice.data(metadata.value):text.toLowerCase(),callback=function(){module.determine.selectAction(text,value);$.proxy(settings.onChange,element)(value,text)};if($choice.find(selector.menu).size()===0){if(event.type=="touchstart"){$choice.one("click",callback)}else{callback()}}}},resetStyle:function(){$(this).removeAttr("style")}},determine:{selectAction:function(text,value){module.verbose("Determining action",settings.action);if($.isFunction(module.action[settings.action])){module.verbose("Triggering preset action",settings.action,text,value);module.action[settings.action](text,value)}else if($.isFunction(settings.action)){module.verbose("Triggering user action",settings.action,text,value);settings.action(text,value)}else{module.error(error.action,settings.action)}},intent:function(event,callback){module.debug("Determining whether event occurred in dropdown",event.target);callback=callback||function(){};if($(event.target).closest($menu).size()===0){module.verbose("Triggering event",callback);callback();return true}else{module.verbose("Event occurred in dropdown, canceling callback");return false}}},action:{nothing:function(){},hide:function(){module.hide()},activate:function(text,value){value=value!==undefined?value:text;module.set.selected(value);module.set.value(value);module.hide()},auto:function(text,value){value=value!==undefined?value:text;module.set.selected(value);module.set.value(value);module.hide()},changeText:function(text,value){value=value!==undefined?value:text;module.set.selected(value);module.hide()},updateForm:function(text,value){value=value!==undefined?value:text;module.set.selected(value);module.set.value(value);module.hide()}},get:{text:function(){return $text.text()},value:function(){return $input.size()>0?$input.val():$module.data(metadata.value)},item:function(value){var $selectedItem=false;value=value!==undefined?value:module.get.value()!==undefined?module.get.value():module.get.text();if(value!==undefined){$item.each(function(){var $choice=$(this),optionText=$choice.data(metadata.text)!==undefined?$choice.data(metadata.text):$choice.text(),optionValue=$choice.data(metadata.value)!==undefined?$choice.data(metadata.value):optionText.toLowerCase();if(optionValue==value){$selectedItem=$(this)}else if(!$selectedItem&&optionText==value){$selectedItem=$(this)}})}else{value=module.get.text()}return $selectedItem||false}},restore:{defaults:function(){module.restore.defaultText();module.restore.defaultValue()},defaultText:function(){var defaultText=$module.data(metadata.defaultText);module.debug("Restoring default text",defaultText);module.set.text(defaultText)},defaultValue:function(){var defaultValue=$module.data(metadata.defaultValue);if(defaultValue!==undefined){module.debug("Restoring default value",defaultValue);module.set.selected(defaultValue);module.set.value(defaultValue)}}},save:{defaults:function(){module.save.defaultText();module.save.defaultValue()},defaultValue:function(){$module.data(metadata.defaultValue,module.get.value())},defaultText:function(){$module.data(metadata.defaultText,$text.text())}},set:{text:function(text){module.debug("Changing text",text,$text);$text.removeClass(className.placeholder);$text.text(text)},value:function(value){module.debug("Adding selected value to hidden input",value,$input);if($input.size()>0){$input.val(value)}else{$module.data(metadata.value,value)}},active:function(){$module.addClass(className.active)},visible:function(){$module.addClass(className.visible)},selected:function(value){var $selectedItem=module.get.item(value),selectedText;if($selectedItem){module.debug("Setting selected menu item to",$selectedItem);selectedText=$selectedItem.data(metadata.text)!==undefined?$selectedItem.data(metadata.text):$selectedItem.text();$item.removeClass(className.active);$selectedItem.addClass(className.active);module.set.text(selectedText)}}},remove:{active:function(){$module.removeClass(className.active)},visible:function(){$module.removeClass(className.visible)}},is:{selection:function(){return $module.hasClass(className.selection)},animated:function($subMenu){return $subMenu?$subMenu.is(":animated")||$subMenu.transition("is animating"):$menu.is(":animated")||$menu.transition("is animating")},visible:function($subMenu){return $subMenu?$subMenu.is(":visible"):$menu.is(":visible")},hidden:function($subMenu){return $subMenu?$subMenu.is(":not(:visible)"):$menu.is(":not(:visible)")}},can:{click:function(){return hasTouch||settings.on=="click"},show:function(){return!$module.hasClass(className.disabled)}},animate:{show:function(callback,$subMenu){var $currentMenu=$subMenu||$menu;callback=callback||function(){};if(module.is.hidden($currentMenu)){module.verbose("Doing menu show animation",$currentMenu);if(settings.transition=="none"){callback()}else if($.fn.transition!==undefined&&$module.transition("is supported")){$currentMenu.transition({animation:settings.transition+" in",duration:settings.duration,complete:callback,queue:false})}else if(settings.transition=="slide down"){$currentMenu.hide().clearQueue().children().clearQueue().css("opacity",0).delay(50).animate({opacity:1},settings.duration,"easeOutQuad",module.event.resetStyle).end().slideDown(100,"easeOutQuad",function(){$.proxy(module.event.resetStyle,this)();callback()})}else if(settings.transition=="fade"){$currentMenu.hide().clearQueue().fadeIn(settings.duration,function(){$.proxy(module.event.resetStyle,this)();callback()})}else{module.error(error.transition,settings.transition)}}},hide:function(callback,$subMenu){var $currentMenu=$subMenu||$menu;callback=callback||function(){};if(module.is.visible($currentMenu)){module.verbose("Doing menu hide animation",$currentMenu);if($.fn.transition!==undefined&&$module.transition("is supported")){$currentMenu.transition({animation:settings.transition+" out",duration:settings.duration,complete:callback,queue:false})}else if(settings.transition=="none"){callback()}else if(settings.transition=="slide down"){$currentMenu.show().clearQueue().children().clearQueue().css("opacity",1).animate({opacity:0},100,"easeOutQuad",module.event.resetStyle).end().delay(50).slideUp(100,"easeOutQuad",function(){$.proxy(module.event.resetStyle,this)();callback()})}else if(settings.transition=="fade"){$currentMenu.show().clearQueue().fadeOut(150,function(){$.proxy(module.event.resetStyle,this)();callback()})}else{module.error(error.transition)}}}},show:function(){module.debug("Checking if dropdown can show");if(module.is.hidden()){module.hideOthers();module.set.active();module.animate.show(function(){if(module.can.click()){module.bind.intent()}module.set.visible()});$.proxy(settings.onShow,element)()}},hide:function(){if(!module.is.animated()&&module.is.visible()){module.debug("Hiding dropdown");if(module.can.click()){module.unbind.intent()}module.remove.active();module.animate.hide(module.remove.visible);$.proxy(settings.onHide,element)()}},delay:{show:function(){module.verbose("Delaying show event to ensure user intent");clearTimeout(module.timer);module.timer=setTimeout(module.show,settings.delay.show)},hide:function(){module.verbose("Delaying hide event to ensure user intent");clearTimeout(module.timer);module.timer=setTimeout(module.hide,settings.delay.hide)}},hideOthers:function(){module.verbose("Finding other dropdowns to hide");$allModules.not($module).has(selector.menu+":visible").dropdown("hide")},toggle:function(){module.verbose("Toggling menu visibility");if(module.is.hidden()){module.show()}else{module.hide()}},setting:function(name,value){if($.isPlainObject(name)){$.extend(true,settings,name)}else if(value!==undefined){settings[name]=value}else{return settings[name]}},internal:function(name,value){if($.isPlainObject(name)){$.extend(true,module,name)}else if(value!==undefined){module[name]=value}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{module.error(error.method,query);return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found}};if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}});return returnedValue?returnedValue:this};$.fn.dropdown.settings={name:"Dropdown",namespace:"dropdown",verbose:true,debug:true,performance:true,on:"click",action:"activate",delay:{show:200,hide:300,touch:50},transition:"slide down",duration:250,onChange:function(value,text){},onShow:function(){},onHide:function(){},error:{action:"You called a dropdown action that was not defined",method:"The method you called is not defined.",transition:"The requested transition was not found"},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",text:"text",value:"value"},selector:{menu:".menu",item:".menu > .item",text:"> .text",input:'> input[type="hidden"]'},className:{active:"active",placeholder:"default",disabled:"disabled",visible:"visible",selection:"selection"}};$.extend($.easing,{easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b}})})(jQuery,window,document);(function($,window,document,undefined){$.fn.modal=function(parameters){var $allModules=$(this),$window=$(window),$document=$(document),$body=$("body"),time=(new Date).getTime(),performance=[],query=arguments[0],methodInvoked=typeof query=="string",queryArguments=[].slice.call(arguments,1),returnedValue;$allModules.each(function(){var settings=$.isPlainObject(parameters)?$.extend(true,{},$.fn.modal.settings,parameters):$.extend({},$.fn.modal.settings),selector=settings.selector,className=settings.className,namespace=settings.namespace,error=settings.error,eventNamespace="."+namespace,moduleNamespace="module-"+namespace,moduleSelector=$allModules.selector||"",$module=$(this),$context=$(settings.context),$close=$module.find(selector.close),$allModals,$otherModals,$focusedElement,$dimmable,$dimmer,element=this,instance=$module.data(moduleNamespace),module;module={initialize:function(){module.verbose("Initializing dimmer",$context);if(typeof $.fn.dimmer===undefined){module.error(error.dimmer);return}$dimmable=$context.dimmer({closable:false,useCSS:true,duration:{show:settings.duration*.9,hide:settings.duration*1.1}});if(settings.detachable){$dimmable.dimmer("add content",$module)}$dimmer=$dimmable.dimmer("get dimmer");$otherModals=$module.siblings(selector.modal);$allModals=$otherModals.add($module);module.verbose("Attaching close events",$close);$close.on("click"+eventNamespace,module.event.close);$window.on("resize"+eventNamespace,function(){module.event.debounce(module.refresh,50)});module.instantiate()},instantiate:function(){module.verbose("Storing instance of modal");instance=module;$module.data(moduleNamespace,instance)},destroy:function(){module.verbose("Destroying previous modal");$module.removeData(moduleNamespace).off(eventNamespace);$close.off(eventNamespace);$context.dimmer("destroy")},refresh:function(){module.remove.scrolling();module.cacheSizes();module.set.screenHeight();module.set.type();module.set.position()},attachEvents:function(selector,event){var $toggle=$(selector);event=$.isFunction(module[event])?module[event]:module.toggle;if($toggle.size()>0){module.debug("Attaching modal events to element",selector,event);$toggle.off(eventNamespace).on("click"+eventNamespace,event)}else{module.error(error.notFound)}},event:{close:function(){module.verbose("Closing element pressed");if($(this).is(selector.approve)){if($.proxy(settings.onApprove,element)()!==false){module.hide()}else{module.verbose("Approve callback returned false cancelling hide")}}else if($(this).is(selector.deny)){if($.proxy(settings.onDeny,element)()!==false){module.hide()}else{module.verbose("Deny callback returned false cancelling hide")}}else{module.hide()}},click:function(event){if($(event.target).closest(selector.modal).size()===0){module.debug("Dimmer clicked, hiding all modals");if(settings.allowMultiple){module.hide()}else{module.hideAll()}event.stopImmediatePropagation()}},debounce:function(method,delay){clearTimeout(module.timer);module.timer=setTimeout(method,delay)},keyboard:function(event){var keyCode=event.which,escapeKey=27;if(keyCode==escapeKey){if(settings.closable){module.debug("Escape key pressed hiding modal");module.hide()}else{module.debug("Escape key pressed, but closable is set to false")}event.preventDefault()}},resize:function(){if($dimmable.dimmer("is active")){module.refresh()}}},toggle:function(){if(module.is.active()){module.hide()}else{module.show()}},show:function(callback){callback=$.isFunction(callback)?callback:function(){};module.showDimmer();module.showModal(callback)},showModal:function(callback){callback=$.isFunction(callback)?callback:function(){};if(!module.is.active()){module.cacheSizes();module.set.position();module.set.screenHeight();module.set.type();if($otherModals.filter(":visible").size()>0&&!settings.allowMultiple){module.debug("Other modals visible, queueing show animation");module.hideOthers(module.showModal)}else{if(settings.transition&&$.fn.transition!==undefined&&$module.transition("is supported")){module.debug("Showing modal with css animations");$module.transition(settings.transition+" in",settings.duration,function(){module.set.active();callback()})}else{module.debug("Showing modal with javascript");$module.fadeIn(settings.duration,settings.easing,function(){module.set.active();callback()})}$.proxy(settings.onShow,element)()}}else{module.debug("Modal is already visible")}},showDimmer:function(){if(!$dimmable.dimmer("is active")){module.debug("Showing dimmer");$dimmable.dimmer("show")}else{module.debug("Dimmer already visible")}},hide:function(callback){callback=$.isFunction(callback)?callback:function(){};if($allModals.filter(":visible").size()<=1){module.hideDimmer()}module.hideModal(callback)},hideDimmer:function(){if(!module.is.active()){module.debug("Dimmer is not visible cannot hide");return}module.debug("Hiding dimmer");if(settings.closable){$dimmer.off("click"+eventNamespace)}$dimmable.dimmer("hide",function(){if(settings.transition&&$.fn.transition!==undefined&&$module.transition("is supported")){$module.transition("reset");module.remove.screenHeight()}module.remove.active()})},hideModal:function(callback){callback=$.isFunction(callback)?callback:function(){};if(!module.is.active()){module.debug("Cannot hide modal it is not active");return}module.debug("Hiding modal");module.remove.keyboardShortcuts();if(settings.transition&&$.fn.transition!==undefined&&$module.transition("is supported")){$module.transition(settings.transition+" out",settings.duration,function(){module.remove.active();module.restore.focus();callback()})}else{$module.fadeOut(settings.duration,settings.easing,function(){module.remove.active();module.restore.focus();callback()})}$.proxy(settings.onHide,element)()},hideAll:function(callback){callback=$.isFunction(callback)?callback:function(){};if($allModals.is(":visible")){module.debug("Hiding all visible modals");module.hideDimmer();$allModals.filter(":visible").modal("hide modal",callback)}},hideOthers:function(callback){callback=$.isFunction(callback)?callback:function(){};if($otherModals.is(":visible")){module.debug("Hiding other modals");$otherModals.filter(":visible").modal("hide modal",callback)}},add:{keyboardShortcuts:function(){module.verbose("Adding keyboard shortcuts");$document.on("keyup"+eventNamespace,module.event.keyboard)}},save:{focus:function(){$focusedElement=$(document.activeElement).blur()}},restore:{focus:function(){if($focusedElement&&$focusedElement.size()>0){$focusedElement.focus()}}},remove:{active:function(){$module.removeClass(className.active)},screenHeight:function(){if(module.cache.height>module.cache.pageHeight){module.debug("Removing page height");$body.css("height","")}},keyboardShortcuts:function(){module.verbose("Removing keyboard shortcuts");$document.off("keyup"+eventNamespace)},scrolling:function(){$dimmable.removeClass(className.scrolling);$module.removeClass(className.scrolling)}},cacheSizes:function(){module.cache={pageHeight:$body.outerHeight(),height:$module.outerHeight()+settings.offset,contextHeight:settings.context=="body"?$(window).height():$dimmable.height()};module.debug("Caching modal and container sizes",module.cache)},can:{fit:function(){return module.cache.height<module.cache.contextHeight}},is:{active:function(){return $module.hasClass(className.active)},modernBrowser:function(){return!(window.ActiveXObject||"ActiveXObject"in window)}},set:{screenHeight:function(){if(module.cache.height>module.cache.pageHeight){module.debug("Modal is taller than page content, resizing page height");$body.css("height",module.cache.height+settings.padding)}},active:function(){module.add.keyboardShortcuts();module.save.focus();$module.addClass(className.active);if(settings.closable){$dimmer.off("click"+eventNamespace).on("click"+eventNamespace,module.event.click)}},scrolling:function(){$dimmable.addClass(className.scrolling);$module.addClass(className.scrolling)},type:function(){if(module.can.fit()){module.verbose("Modal fits on screen");module.remove.scrolling()}else{module.verbose("Modal cannot fit on screen setting to scrolling");module.set.scrolling()}},position:function(){module.verbose("Centering modal on page",module.cache);if(module.can.fit()){$module.css({top:"",marginTop:-(module.cache.height/2)})}else{$module.css({marginTop:"1em",top:$document.scrollTop()})}}},setting:function(name,value){if($.isPlainObject(name)){$.extend(true,settings,name)}else if(value!==undefined){settings[name]=value}else{return settings[name]}},internal:function(name,value){if($.isPlainObject(name)){$.extend(true,module,name)}else if(value!==undefined){module[name]=value}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found}};if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}});return returnedValue!==undefined?returnedValue:this};$.fn.modal.settings={name:"Modal",namespace:"modal",debug:true,verbose:true,performance:true,allowMultiple:true,detachable:true,closable:true,context:"body",duration:500,easing:"easeOutExpo",offset:0,transition:"scale",padding:30,onShow:function(){},onHide:function(){},onApprove:function(){return true},onDeny:function(){return true},selector:{close:".close, .actions .button",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel",modal:".ui.modal"},error:{dimmer:"UI Dimmer, a required component is not included in this page",method:"The method you called is not defined."},className:{active:"active",scrolling:"scrolling"}}})(jQuery,window,document);(function($,window,document,undefined){$.fn.nag=function(parameters){var $allModules=$(this),moduleSelector=$allModules.selector||"",time=(new Date).getTime(),performance=[],query=arguments[0],methodInvoked=typeof query=="string",queryArguments=[].slice.call(arguments,1),returnedValue;$(this).each(function(){var settings=$.extend(true,{},$.fn.nag.settings,parameters),className=settings.className,selector=settings.selector,error=settings.error,namespace=settings.namespace,eventNamespace="."+namespace,moduleNamespace=namespace+"-module",$module=$(this),$close=$module.find(selector.close),$context=$(settings.context),element=this,instance=$module.data(moduleNamespace),moduleOffset,moduleHeight,contextWidth,contextHeight,contextOffset,yOffset,yPosition,timer,module,requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,0)};module={initialize:function(){module.verbose("Initializing element");moduleOffset=$module.offset();moduleHeight=$module.outerHeight();contextWidth=$context.outerWidth();contextHeight=$context.outerHeight();contextOffset=$context.offset();$module.data(moduleNamespace,module);$close.on("click"+eventNamespace,module.dismiss);if(settings.context==window&&settings.position=="fixed"){$module.addClass(className.fixed)}if(settings.sticky){module.verbose("Adding scroll events");if(settings.position=="absolute"){$context.on("scroll"+eventNamespace,module.event.scroll).on("resize"+eventNamespace,module.event.scroll)}else{$(window).on("scroll"+eventNamespace,module.event.scroll).on("resize"+eventNamespace,module.event.scroll)}$.proxy(module.event.scroll,this)()}if(settings.displayTime>0){setTimeout(module.hide,settings.displayTime)}if(module.should.show()){if(!$module.is(":visible")){module.show()}}else{module.hide()}},destroy:function(){module.verbose("Destroying instance");$module.removeData(moduleNamespace).off(eventNamespace);if(settings.sticky){$context.off(eventNamespace)}},refresh:function(){module.debug("Refreshing cached calculations");moduleOffset=$module.offset();moduleHeight=$module.outerHeight();contextWidth=$context.outerWidth();contextHeight=$context.outerHeight();contextOffset=$context.offset()},show:function(){module.debug("Showing nag",settings.animation.show);if(settings.animation.show=="fade"){$module.fadeIn(settings.duration,settings.easing)}else{$module.slideDown(settings.duration,settings.easing)}},hide:function(){module.debug("Showing nag",settings.animation.hide);if(settings.animation.show=="fade"){$module.fadeIn(settings.duration,settings.easing)}else{$module.slideUp(settings.duration,settings.easing)}},onHide:function(){module.debug("Removing nag",settings.animation.hide);$module.remove();if(settings.onHide){settings.onHide()}},stick:function(){module.refresh();if(settings.position=="fixed"){var windowScroll=$(window).prop("pageYOffset")||$(window).scrollTop(),fixedOffset=$module.hasClass(className.bottom)?contextOffset.top+(contextHeight-moduleHeight)-windowScroll:contextOffset.top-windowScroll;$module.css({position:"fixed",top:fixedOffset,left:contextOffset.left,width:contextWidth-settings.scrollBarWidth})}else{$module.css({top:yPosition})}},unStick:function(){$module.css({top:""})},dismiss:function(event){if(settings.storageMethod){module.storage.set(settings.storedKey,settings.storedValue)}module.hide();event.stopImmediatePropagation();event.preventDefault()},should:{show:function(){if(settings.persist){module.debug("Persistent nag is set, can show nag");return true}if(module.storage.get(settings.storedKey)!=settings.storedValue){module.debug("Stored value is not set, can show nag",module.storage.get(settings.storedKey));return true}module.debug("Stored value is set, cannot show nag",module.storage.get(settings.storedKey));return false},stick:function(){yOffset=$context.prop("pageYOffset")||$context.scrollTop();yPosition=$module.hasClass(className.bottom)?contextHeight-$module.outerHeight()+yOffset:yOffset;if(yPosition>moduleOffset.top){return true}else if(settings.position=="fixed"){return true}return false}},storage:{set:function(key,value){module.debug("Setting stored value",key,value,settings.storageMethod);if(settings.storageMethod=="local"&&window.store!==undefined){window.store.set(key,value)}else if($.cookie!==undefined){$.cookie(key,value)}else{module.error(error.noStorage)}},get:function(key){module.debug("Getting stored value",key,settings.storageMethod);if(settings.storageMethod=="local"&&window.store!==undefined){return window.store.get(key)}else if($.cookie!==undefined){return $.cookie(key)}else{module.error(error.noStorage)}}},event:{scroll:function(){if(timer!==undefined){clearTimeout(timer)}timer=setTimeout(function(){if(module.should.stick()){requestAnimationFrame(module.stick)}else{module.unStick()}},settings.lag)}},setting:function(name,value){if($.isPlainObject(name)){$.extend(true,settings,name)}else if(value!==undefined){settings[name]=value}else{return settings[name]}},internal:function(name,value){module.debug("Changing internal",name,value);
if(value!==undefined){if($.isPlainObject(name)){$.extend(true,module,name)}else{module[name]=value}}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if($allModules.size()>1){title+=" "+"("+$allModules.size()+")"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found}};if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}});return returnedValue!==undefined?returnedValue:this};$.fn.nag.settings={name:"Nag",verbose:true,debug:true,performance:true,namespace:"Nag",persist:false,displayTime:0,animation:{show:"slide",hide:"slide"},position:"fixed",scrollBarWidth:18,storageMethod:"cookie",storedKey:"nag",storedValue:"dismiss",sticky:false,lag:0,context:window,error:{noStorage:"Neither $.cookie or store is defined. A storage solution is required for storing state",method:"The method you called is not defined."},className:{bottom:"bottom",fixed:"fixed"},selector:{close:".icon.close"},speed:500,easing:"easeOutQuad",onHide:function(){}}})(jQuery,window,document);(function($,window,document,undefined){$.fn.popup=function(parameters){var $allModules=$(this),$document=$(document),moduleSelector=$allModules.selector||"",time=(new Date).getTime(),performance=[],query=arguments[0],methodInvoked=typeof query=="string",queryArguments=[].slice.call(arguments,1),returnedValue;$allModules.each(function(){var settings=$.isPlainObject(parameters)?$.extend(true,{},$.fn.popup.settings,parameters):$.extend({},$.fn.popup.settings),selector=settings.selector,className=settings.className,error=settings.error,metadata=settings.metadata,namespace=settings.namespace,eventNamespace="."+settings.namespace,moduleNamespace="module-"+namespace,$module=$(this),$context=$(settings.context),$target=settings.target?$(settings.target):$module,$window=$(window),$offsetParent=settings.inline?$target.offsetParent():$window,$popup=settings.inline?$target.next(settings.selector.popup):$window.children(settings.selector.popup).last(),searchDepth=0,element=this,instance=$module.data(moduleNamespace),module;module={initialize:function(){module.debug("Initializing module",$module);if(settings.on=="click"){$module.on("click",module.toggle)}else{$module.on(module.get.startEvent()+eventNamespace,module.event.start).on(module.get.endEvent()+eventNamespace,module.event.end)}if(settings.target){module.debug("Target set to element",$target)}$window.on("resize"+eventNamespace,module.event.resize);module.instantiate()},instantiate:function(){module.verbose("Storing instance of module",module);instance=module;$module.data(moduleNamespace,instance)},refresh:function(){if(settings.inline){$popup=$target.next(selector.popup);$offsetParent=$target.offsetParent()}else{$popup=$window.children(selector.popup).last()}},destroy:function(){module.debug("Destroying previous module");$window.off(eventNamespace);$popup.remove();$module.off(eventNamespace).removeData(moduleNamespace)},event:{start:function(event){module.timer=setTimeout(function(){if(module.is.hidden()){module.show()}},settings.delay)},end:function(){clearTimeout(module.timer);if(module.is.visible()){module.hide()}},resize:function(){if(module.is.visible()){module.set.position()}}},create:function(){module.debug("Creating pop-up html");var html=$module.data(metadata.html)||settings.html,variation=$module.data(metadata.variation)||settings.variation,title=$module.data(metadata.title)||settings.title,content=$module.data(metadata.content)||$module.attr("title")||settings.content;if(html||content||title){if(!html){html=settings.template({title:title,content:content})}$popup=$("<div/>").addClass(className.popup).addClass(variation).html(html);if(settings.inline){module.verbose("Inserting popup element inline",$popup);$popup.data(moduleNamespace,instance).insertAfter($module)}else{module.verbose("Appending popup element to body",$popup);$popup.data(moduleNamespace,instance).appendTo($context)}$.proxy(settings.onCreate,$popup)()}else{module.error(error.content)}},toggle:function(){module.debug("Toggling pop-up");if(module.is.hidden()){module.debug("Popup is hidden, showing pop-up");module.unbind.close();module.hideAll();module.show()}else{module.debug("Popup is visible, hiding pop-up");module.hide()}},show:function(callback){callback=callback||function(){};module.debug("Showing pop-up",settings.transition);if(!settings.preserve){module.refresh()}if(!module.exists()){module.create()}module.save.conditions();module.set.position();module.animate.show(callback)},hide:function(callback){callback=callback||function(){};$module.removeClass(className.visible);module.restore.conditions();module.unbind.close();if(module.is.visible()){module.animate.hide(callback)}},hideAll:function(){$(selector.popup).filter(":visible").popup("hide")},hideGracefully:function(event){if(event&&$(event.target).closest(selector.popup).size()===0){module.debug("Click occurred outside popup hiding popup");module.hide()}else{module.debug("Click was inside popup, keeping popup open")}},exists:function(){if(settings.inline){return $popup.size()!==0}else{return $popup.parent($context).size()}},remove:function(){module.debug("Removing popup");$popup.remove()},save:{conditions:function(){module.cache={title:$module.attr("title")};if(module.cache.title){$module.removeAttr("title")}module.verbose("Saving original attributes",module.cache.title)}},restore:{conditions:function(){if(module.cache&&module.cache.title){$module.attr("title",module.cache.title);module.verbose("Restoring original attributes",module.cache.title)}return true}},animate:{show:function(callback){callback=callback||function(){};$module.addClass(className.visible);if(settings.transition&&$.fn.transition!==undefined&&$module.transition("is supported")){$popup.transition(settings.transition+" in",settings.duration,function(){module.bind.close();$.proxy(callback,element)()})}else{$popup.stop().fadeIn(settings.duration,settings.easing,function(){module.bind.close();$.proxy(callback,element)()})}$.proxy(settings.onShow,element)()},hide:function(callback){callback=callback||function(){};module.debug("Hiding pop-up");if(settings.transition&&$.fn.transition!==undefined&&$module.transition("is supported")){$popup.transition(settings.transition+" out",settings.duration,function(){module.reset();callback()})}else{$popup.stop().fadeOut(settings.duration,settings.easing,function(){module.reset();callback()})}$.proxy(settings.onHide,element)()}},get:{startEvent:function(){if(settings.on=="hover"){return"mouseenter"}else if(settings.on=="focus"){return"focus"}},endEvent:function(){if(settings.on=="hover"){return"mouseleave"}else if(settings.on=="focus"){return"blur"}},offstagePosition:function(){var boundary={top:$(window).scrollTop(),bottom:$(window).scrollTop()+$(window).height(),left:0,right:$(window).width()},popup={width:$popup.width(),height:$popup.outerHeight(),position:$popup.offset()},offstage={},offstagePositions=[];if(popup.position){offstage={top:popup.position.top<boundary.top,bottom:popup.position.top+popup.height>boundary.bottom,right:popup.position.left+popup.width>boundary.right,left:popup.position.left<boundary.left}}module.verbose("Checking if outside viewable area",popup.position);$.each(offstage,function(direction,isOffstage){if(isOffstage){offstagePositions.push(direction)}});return offstagePositions.length>0?offstagePositions.join(" "):false},nextPosition:function(position){switch(position){case"top left":position="bottom left";break;case"bottom left":position="top right";break;case"top right":position="bottom right";break;case"bottom right":position="top center";break;case"top center":position="bottom center";break;case"bottom center":position="right center";break;case"right center":position="left center";break;case"left center":position="top center";break}return position}},set:{position:function(position,arrowOffset){var windowWidth=$(window).width(),windowHeight=$(window).height(),width=$target.outerWidth(),height=$target.outerHeight(),popupWidth=$popup.width(),popupHeight=$popup.outerHeight(),parentWidth=$offsetParent.outerWidth(),parentHeight=$offsetParent.outerHeight(),distanceAway=settings.distanceAway,offset=settings.inline?$target.position():$target.offset(),positioning,offstagePosition;position=position||$module.data(metadata.position)||settings.position;arrowOffset=arrowOffset||$module.data(metadata.offset)||settings.offset;if(settings.inline){if(position=="left center"||position=="right center"){arrowOffset+=parseInt(window.getComputedStyle(element).getPropertyValue("margin-top"),10);distanceAway+=-parseInt(window.getComputedStyle(element).getPropertyValue("margin-left"),10)}else{arrowOffset+=parseInt(window.getComputedStyle(element).getPropertyValue("margin-left"),10);distanceAway+=parseInt(window.getComputedStyle(element).getPropertyValue("margin-top"),10)}}module.debug("Calculating offset for position",position);switch(position){case"top left":positioning={bottom:parentHeight-offset.top+distanceAway,right:parentWidth-offset.left-arrowOffset,top:"auto",left:"auto"};break;case"top center":positioning={bottom:parentHeight-offset.top+distanceAway,left:offset.left+width/2-popupWidth/2+arrowOffset,top:"auto",right:"auto"};break;case"top right":positioning={top:"auto",bottom:parentHeight-offset.top+distanceAway,left:offset.left+width+arrowOffset,right:"auto"};break;case"left center":positioning={top:offset.top+height/2-popupHeight/2+arrowOffset,right:parentWidth-offset.left+distanceAway,left:"auto",bottom:"auto"};break;case"right center":positioning={top:offset.top+height/2-popupHeight/2+arrowOffset,left:offset.left+width+distanceAway,bottom:"auto",right:"auto"};break;case"bottom left":positioning={top:offset.top+height+distanceAway,right:parentWidth-offset.left-arrowOffset,left:"auto",bottom:"auto"};break;case"bottom center":positioning={top:offset.top+height+distanceAway,left:offset.left+width/2-popupWidth/2+arrowOffset,bottom:"auto",right:"auto"};break;case"bottom right":positioning={top:offset.top+height+distanceAway,left:offset.left+width+arrowOffset,bottom:"auto",right:"auto"};break}$popup.css(positioning).removeClass(className.position).addClass(position).addClass(className.loading);offstagePosition=module.get.offstagePosition();if(offstagePosition){module.debug("Element is outside boundaries",offstagePosition);if(searchDepth<settings.maxSearchDepth){position=module.get.nextPosition(position);searchDepth++;module.debug("Trying new position",position);return module.set.position(position)}else{module.error(error.recursion);searchDepth=0;module.reset();$popup.removeClass(className.loading);return false}}else{module.debug("Position is on stage",position);searchDepth=0;$popup.removeClass(className.loading);return true}}},bind:{close:function(){if(settings.on=="click"&&settings.closable){module.verbose("Binding popup close event to document");$document.on("click"+eventNamespace,function(event){module.verbose("Pop-up clickaway intent detected");$.proxy(module.hideGracefully,this)(event)})}}},unbind:{close:function(){if(settings.on=="click"&&settings.closable){module.verbose("Removing close event from document");$document.off("click"+eventNamespace)}}},is:{animating:function(){return $popup.is(":animated")||$popup.hasClass(className.animating)},visible:function(){return $popup.is(":visible")},hidden:function(){return!module.is.visible()}},reset:function(){$popup.attr("style","").removeAttr("style");if(!settings.preserve){module.remove()}},setting:function(name,value){if($.isPlainObject(name)){$.extend(true,settings,name)}else if(value!==undefined){settings[name]=value}else{return settings[name]}},internal:function(name,value){if($.isPlainObject(name)){$.extend(true,module,name)}else if(value!==undefined){module[name]=value}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found}};if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}});return returnedValue!==undefined?returnedValue:this};$.fn.popup.settings={name:"Popup",debug:true,verbose:true,performance:true,namespace:"popup",onCreate:function(){},onShow:function(){},onHide:function(){},variation:"",content:false,html:false,title:false,on:"hover",target:false,closable:true,context:"body",position:"top center",delay:150,inline:false,preserve:false,duration:250,easing:"easeOutQuint",transition:"scale",distanceAway:0,offset:0,maxSearchDepth:10,error:{content:"Your popup has no content specified",method:"The method you called is not defined.",recursion:"Popup attempted to reposition element to fit, but could not find an adequate position."},metadata:{content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{animating:"animating",loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible"},selector:{popup:".ui.popup"},template:function(text){var html="";if(typeof text!==undefined){if(typeof text.title!==undefined&&text.title){html+='<div class="header">'+text.title+'</div class="header">'}if(typeof text.content!==undefined&&text.content){html+='<div class="content">'+text.content+"</div>"}}return html}}})(jQuery,window,document);(function($,window,document,undefined){$.fn.rating=function(parameters){var $allModules=$(this),moduleSelector=$allModules.selector||"",time=(new Date).getTime(),performance=[],query=arguments[0],methodInvoked=typeof query=="string",queryArguments=[].slice.call(arguments,1),returnedValue;$allModules.each(function(){var settings=$.isPlainObject(parameters)?$.extend(true,{},$.fn.rating.settings,parameters):$.extend({},$.fn.rating.settings),namespace=settings.namespace,className=settings.className,metadata=settings.metadata,selector=settings.selector,error=settings.error,eventNamespace="."+namespace,moduleNamespace="module-"+namespace,element=this,instance=$(this).data(moduleNamespace),$module=$(this),$icon=$module.find(selector.icon),module;module={initialize:function(){module.verbose("Initializing rating module",settings);if(settings.interactive){module.enable()}else{module.disable()}if(settings.initialRating){module.debug("Setting initial rating");module.setRating(settings.initialRating)}if($module.data(metadata.rating)){module.debug("Rating found in metadata");module.setRating($module.data(metadata.rating))}module.instantiate()},instantiate:function(){module.verbose("Instantiating module",settings);instance=module;$module.data(moduleNamespace,module)},destroy:function(){module.verbose("Destroying previous instance",instance);$module.removeData(moduleNamespace);$icon.off(eventNamespace)},event:{mouseenter:function(){var $activeIcon=$(this);$activeIcon.nextAll().removeClass(className.hover);$module.addClass(className.hover);$activeIcon.addClass(className.hover).prevAll().addClass(className.hover)},mouseleave:function(){$module.removeClass(className.hover);$icon.removeClass(className.hover)},click:function(){var $activeIcon=$(this),currentRating=module.getRating(),rating=$icon.index($activeIcon)+1;if(settings.clearable&&currentRating==rating){module.clearRating()}else{module.setRating(rating)}}},clearRating:function(){module.debug("Clearing current rating");module.setRating(0)},getRating:function(){var currentRating=$icon.filter("."+className.active).size();module.verbose("Current rating retrieved",currentRating);return currentRating},enable:function(){module.debug("Setting rating to interactive mode");$icon.on("mouseenter"+eventNamespace,module.event.mouseenter).on("mouseleave"+eventNamespace,module.event.mouseleave).on("click"+eventNamespace,module.event.click);$module.removeClass(className.disabled)},disable:function(){module.debug("Setting rating to read-only mode");$icon.off(eventNamespace);$module.addClass(className.disabled)},setRating:function(rating){var ratingIndex=rating-1>=0?rating-1:0,$activeIcon=$icon.eq(ratingIndex);$module.removeClass(className.hover);$icon.removeClass(className.hover).removeClass(className.active);if(rating>0){module.verbose("Setting current rating to",rating);$activeIcon.addClass(className.active).prevAll().addClass(className.active)}$.proxy(settings.onRate,element)(rating)},setting:function(name,value){if($.isPlainObject(name)){$.extend(true,settings,name)}else if(value!==undefined){settings[name]=value}else{return settings[name]}},internal:function(name,value){if($.isPlainObject(name)){$.extend(true,module,name)}else if(value!==undefined){module[name]=value}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if($allModules.size()>1){title+=" "+"("+$allModules.size()+")"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found}};if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}});return returnedValue!==undefined?returnedValue:this};$.fn.rating.settings={name:"Rating",namespace:"rating",verbose:true,debug:true,performance:true,initialRating:0,interactive:true,clearable:false,onRate:function(rating){},error:{method:"The method you called is not defined"},metadata:{rating:"rating"},className:{active:"active",disabled:"disabled",hover:"hover",loading:"loading"},selector:{icon:".icon"}}})(jQuery,window,document);(function($,window,document,undefined){$.fn.search=function(source,parameters){var $allModules=$(this),moduleSelector=$allModules.selector||"",time=(new Date).getTime(),performance=[],query=arguments[0],methodInvoked=typeof query=="string",queryArguments=[].slice.call(arguments,1),returnedValue;$(this).each(function(){var settings=$.extend(true,{},$.fn.search.settings,parameters),className=settings.className,selector=settings.selector,error=settings.error,namespace=settings.namespace,eventNamespace="."+namespace,moduleNamespace=namespace+"-module",$module=$(this),$prompt=$module.find(selector.prompt),$searchButton=$module.find(selector.searchButton),$results=$module.find(selector.results),$result=$module.find(selector.result),$category=$module.find(selector.category),element=this,instance=$module.data(moduleNamespace),module;module={initialize:function(){module.verbose("Initializing module");var prompt=$prompt[0],inputEvent=prompt.oninput!==undefined?"input":prompt.onpropertychange!==undefined?"propertychange":"keyup";$prompt.on("focus"+eventNamespace,module.event.focus).on("blur"+eventNamespace,module.event.blur).on("keydown"+eventNamespace,module.handleKeyboard);if(settings.automatic){$prompt.on(inputEvent+eventNamespace,module.search.throttle)}$searchButton.on("click"+eventNamespace,module.search.query);$results.on("click"+eventNamespace,selector.result,module.results.select);module.instantiate()},instantiate:function(){module.verbose("Storing instance of module",module);instance=module;$module.data(moduleNamespace,module)},destroy:function(){module.verbose("Destroying instance");$module.removeData(moduleNamespace)},event:{focus:function(){$module.addClass(className.focus);module.results.show()},blur:function(){module.search.cancel();$module.removeClass(className.focus);module.results.hide()}},handleKeyboard:function(event){var $result=$module.find(selector.result),$category=$module.find(selector.category),keyCode=event.which,keys={backspace:8,enter:13,escape:27,upArrow:38,downArrow:40},activeClass=className.active,currentIndex=$result.index($result.filter("."+activeClass)),resultSize=$result.size(),newIndex;if(keyCode==keys.escape){module.verbose("Escape key pressed, blurring search field");$prompt.trigger("blur")}if($results.filter(":visible").size()>0){if(keyCode==keys.enter){module.verbose("Enter key pressed, selecting active result");if($result.filter("."+activeClass).exists()){$.proxy(module.results.select,$result.filter("."+activeClass))();event.preventDefault();return false}}else if(keyCode==keys.upArrow){module.verbose("Up key pressed, changing active result");newIndex=currentIndex-1<0?currentIndex:currentIndex-1;$category.removeClass(activeClass);$result.removeClass(activeClass).eq(newIndex).addClass(activeClass).closest($category).addClass(activeClass);event.preventDefault()}else if(keyCode==keys.downArrow){module.verbose("Down key pressed, changing active result");newIndex=currentIndex+1>=resultSize?currentIndex:currentIndex+1;$category.removeClass(activeClass);$result.removeClass(activeClass).eq(newIndex).addClass(activeClass).closest($category).addClass(activeClass);event.preventDefault()}}else{if(keyCode==keys.enter){module.verbose("Enter key pressed, executing query");module.search.query();$searchButton.addClass(className.down);$prompt.one("keyup",function(){$searchButton.removeClass(className.down)})}}},search:{cancel:function(){var xhr=$module.data("xhr")||false;if(xhr&&xhr.state()!="resolved"){module.debug("Cancelling last search");xhr.abort()}},throttle:function(){var searchTerm=$prompt.val(),numCharacters=searchTerm.length;clearTimeout(module.timer);if(numCharacters>=settings.minCharacters){module.timer=setTimeout(module.search.query,settings.searchThrottle)}else{module.results.hide()}},query:function(){var searchTerm=$prompt.val(),cachedHTML=module.search.cache.read(searchTerm);if(cachedHTML){module.debug("Reading result for '"+searchTerm+"' from cache");module.results.add(cachedHTML)}else{module.debug("Querying for '"+searchTerm+"'");if(typeof source=="object"){module.search.local(searchTerm)}else{module.search.remote(searchTerm)}$.proxy(settings.onSearchQuery,$module)(searchTerm)}},local:function(searchTerm){var results=[],fullTextResults=[],searchFields=$.isArray(settings.searchFields)?settings.searchFields:[settings.searchFields],searchRegExp=new RegExp("(?:s|^)"+searchTerm,"i"),fullTextRegExp=new RegExp(searchTerm,"i"),searchHTML;$module.addClass(className.loading);$.each(searchFields,function(index,field){$.each(source,function(label,thing){if(typeof thing[field]=="string"&&$.inArray(thing,results)==-1&&$.inArray(thing,fullTextResults)==-1){if(searchRegExp.test(thing[field])){results.push(thing)}else if(fullTextRegExp.test(thing[field])){fullTextResults.push(thing)}}})});searchHTML=module.results.generate({results:$.merge(results,fullTextResults)});$module.removeClass(className.loading);module.search.cache.write(searchTerm,searchHTML);module.results.add(searchHTML)},remote:function(searchTerm){var apiSettings={stateContext:$module,url:source,urlData:{query:searchTerm},success:function(response){searchHTML=module.results.generate(response);module.search.cache.write(searchTerm,searchHTML);module.results.add(searchHTML)},failure:module.error},searchHTML;module.search.cancel();module.debug("Executing search");$.extend(true,apiSettings,settings.apiSettings);$.api(apiSettings)},cache:{read:function(name){var cache=$module.data("cache");return settings.cache&&typeof cache=="object"&&cache[name]!==undefined?cache[name]:false},write:function(name,value){var cache=$module.data("cache")!==undefined?$module.data("cache"):{};cache[name]=value;$module.data("cache",cache)}}},results:{generate:function(response){module.debug("Generating html from response",response);var template=settings.templates[settings.type],html="";if($.isPlainObject(response.results)&&!$.isEmptyObject(response.results)||$.isArray(response.results)&&response.results.length>0){if(settings.maxResults>0){response.results=$.makeArray(response.results).slice(0,settings.maxResults)}if(response.results.length>0){if($.isFunction(template)){html=template(response)}else{module.error(error.noTemplate,false)}}}else{html=module.message(error.noResults,"empty")}$.proxy(settings.onResults,$module)(response);return html},add:function(html){if(settings.onResultsAdd=="default"||$.proxy(settings.onResultsAdd,$results)(html)=="default"){$results.html(html)}module.results.show()},show:function(){if($results.filter(":visible").size()===0&&$prompt.filter(":focus").size()>0&&$results.html()!==""){$results.stop().fadeIn(200);$.proxy(settings.onResultsOpen,$results)()}},hide:function(){if($results.filter(":visible").size()>0){$results.stop().fadeOut(200);$.proxy(settings.onResultsClose,$results)()}},select:function(event){module.debug("Search result selected");var $result=$(this),$title=$result.find(".title"),title=$title.html();
if(settings.onSelect=="default"||$.proxy(settings.onSelect,this)(event)=="default"){var $link=$result.find("a[href]").eq(0),href=$link.attr("href")||false,target=$link.attr("target")||false;module.results.hide();$prompt.val(title);if(href){if(target=="_blank"||event.ctrlKey){window.open(href)}else{window.location.href=href}}}}},setting:function(name,value){if($.isPlainObject(name)){$.extend(true,settings,name)}else if(value!==undefined){settings[name]=value}else{return settings[name]}},internal:function(name,value){if($.isPlainObject(name)){$.extend(true,module,name)}else if(value!==undefined){module[name]=value}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if($allModules.size()>1){title+=" "+"("+$allModules.size()+")"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found}};if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}});return returnedValue!==undefined?returnedValue:this};$.fn.search.settings={name:"Search Module",namespace:"search",debug:true,verbose:true,performance:true,onSelect:"default",onResultsAdd:"default",onSearchQuery:function(){},onResults:function(response){},onResultsOpen:function(){},onResultsClose:function(){},automatic:"true",type:"simple",minCharacters:3,searchThrottle:300,maxResults:7,cache:true,searchFields:["title","description"],apiSettings:{},className:{active:"active",down:"down",focus:"focus",empty:"empty",loading:"loading"},error:{noResults:"Your search returned no results",logging:"Error in debug logging, exiting.",noTemplate:"A valid template name was not specified.",serverError:"There was an issue with querying the server.",method:"The method you called is not defined."},selector:{prompt:".prompt",searchButton:".search.button",results:".results",category:".category",result:".result"},templates:{message:function(message,type){var html="";if(message!==undefined&&type!==undefined){html+=""+'<div class="message '+type+'">';if(type=="empty"){html+=""+'<div class="header">No Results</div class="header">'+'<div class="description">'+message+'</div class="description">'}else{html+=' <div class="description">'+message+"</div>"}html+="</div>"}return html},categories:function(response){var html="";if(response.results!==undefined){$.each(response.results,function(index,category){if(category.results!==undefined&&category.results.length>0){html+=""+'<div class="category">'+'<div class="name">'+category.name+"</div>";$.each(category.results,function(index,result){html+='<div class="result">';html+='<a href="'+result.url+'"></a>';if(result.image!==undefined){html+=""+'<div class="image">'+' <img src="'+result.image+'">'+"</div>"}html+='<div class="info">';if(result.price!==undefined){html+='<div class="price">'+result.price+"</div>"}if(result.title!==undefined){html+='<div class="title">'+result.title+"</div>"}if(result.description!==undefined){html+='<div class="description">'+result.description+"</div>"}html+=""+"</div>"+"</div>"});html+=""+"</div>"}});if(response.resultPage){html+=""+'<a href="'+response.resultPage.url+'" class="all">'+response.resultPage.text+"</a>"}return html}return false},simple:function(response){var html="";if(response.results!==undefined){$.each(response.results,function(index,result){html+='<a class="result" href="'+result.url+'">';if(result.image!==undefined){html+=""+'<div class="image">'+' <img src="'+result.image+'">'+"</div>"}html+='<div class="info">';if(result.price!==undefined){html+='<div class="price">'+result.price+"</div>"}if(result.title!==undefined){html+='<div class="title">'+result.title+"</div>"}if(result.description!==undefined){html+='<div class="description">'+result.description+"</div>"}html+=""+"</div>"+"</a>"});if(response.resultPage){html+=""+'<a href="'+response.resultPage.url+'" class="all">'+response.resultPage.text+"</a>"}return html}return false}}}})(jQuery,window,document);(function($,window,document,undefined){$.fn.shape=function(parameters){var $allModules=$(this),$body=$("body"),time=(new Date).getTime(),performance=[],query=arguments[0],methodInvoked=typeof query=="string",queryArguments=[].slice.call(arguments,1),returnedValue;$allModules.each(function(){var moduleSelector=$allModules.selector||"",settings=$.extend(true,{},$.fn.shape.settings,parameters),namespace=settings.namespace,selector=settings.selector,error=settings.error,className=settings.className,eventNamespace="."+namespace,moduleNamespace="module-"+namespace,$module=$(this),$sides=$module.find(selector.sides),$side=$module.find(selector.side),nextSelector=false,$activeSide,$nextSide,element=this,instance=$module.data(moduleNamespace),module;module={initialize:function(){module.verbose("Initializing module for",element);module.set.defaultSide();module.instantiate()},instantiate:function(){module.verbose("Storing instance of module",module);instance=module;$module.data(moduleNamespace,instance)},destroy:function(){module.verbose("Destroying previous module for",element);$module.removeData(moduleNamespace).off(eventNamespace)},refresh:function(){module.verbose("Refreshing selector cache for",element);$module=$(element);$sides=$(this).find(selector.shape);$side=$(this).find(selector.side)},repaint:function(){module.verbose("Forcing repaint event");var shape=$sides.get(0)||document.createElement("div"),fakeAssignment=shape.offsetWidth},animate:function(propertyObject,callback){module.verbose("Animating box with properties",propertyObject);callback=callback||function(event){module.verbose("Executing animation callback");if(event!==undefined){event.stopPropagation()}module.reset();module.set.active()};$.proxy(settings.beforeChange,$nextSide[0])();if(module.get.transitionEvent()){module.verbose("Starting CSS animation");$module.addClass(className.animating);module.repaint();$module.addClass(className.animating);$activeSide.addClass(className.hidden);$sides.css(propertyObject).one(module.get.transitionEvent(),callback);module.set.duration(settings.duration)}else{callback()}},queue:function(method){module.debug("Queueing animation of",method);$sides.one(module.get.transitionEvent(),function(){module.debug("Executing queued animation");setTimeout(function(){$module.shape(method)},0)})},reset:function(){module.verbose("Animating states reset");$module.removeClass(className.animating).attr("style","").removeAttr("style");$sides.attr("style","").removeAttr("style");$side.attr("style","").removeAttr("style").removeClass(className.hidden);$nextSide.removeClass(className.animating).attr("style","").removeAttr("style")},is:{animating:function(){return $module.hasClass(className.animating)}},set:{defaultSide:function(){$activeSide=$module.find("."+settings.className.active);$nextSide=$activeSide.next(selector.side).size()>0?$activeSide.next(selector.side):$module.find(selector.side).first();nextSelector=false;module.verbose("Active side set to",$activeSide);module.verbose("Next side set to",$nextSide)},duration:function(duration){duration=duration||settings.duration;duration=typeof duration=="number"?duration+"ms":duration;module.verbose("Setting animation duration",duration);$sides.add($side).css({"-webkit-transition-duration":duration,"-moz-transition-duration":duration,"-ms-transition-duration":duration,"-o-transition-duration":duration,"transition-duration":duration})},stageSize:function(){var $clone=$module.clone().addClass(className.loading),$activeSide=$clone.find("."+settings.className.active),$nextSide=nextSelector?$clone.find(nextSelector):$activeSide.next(selector.side).size()>0?$activeSide.next(selector.side):$clone.find(selector.side).first(),newSize={};$activeSide.removeClass(className.active);$nextSide.addClass(className.active);$clone.prependTo($body);newSize={width:$nextSide.outerWidth(),height:$nextSide.outerHeight()};$clone.remove();$module.css(newSize);module.verbose("Resizing stage to fit new content",newSize)},nextSide:function(selector){nextSelector=selector;$nextSide=$module.find(selector);if($nextSide.size()===0){module.error(error.side)}module.verbose("Next side manually set to",$nextSide)},active:function(){module.verbose("Setting new side to active",$nextSide);$side.removeClass(className.active);$nextSide.addClass(className.active);$.proxy(settings.onChange,$nextSide[0])();module.set.defaultSide()}},flip:{up:function(){module.debug("Flipping up",$nextSide);if(!module.is.animating()){module.set.stageSize();module.stage.above();module.animate(module.get.transform.up())}else{module.queue("flip up")}},down:function(){module.debug("Flipping down",$nextSide);if(!module.is.animating()){module.set.stageSize();module.stage.below();module.animate(module.get.transform.down())}else{module.queue("flip down")}},left:function(){module.debug("Flipping left",$nextSide);if(!module.is.animating()){module.set.stageSize();module.stage.left();module.animate(module.get.transform.left())}else{module.queue("flip left")}},right:function(){module.debug("Flipping right",$nextSide);if(!module.is.animating()){module.set.stageSize();module.stage.right();module.animate(module.get.transform.right())}else{module.queue("flip right")}},over:function(){module.debug("Flipping over",$nextSide);if(!module.is.animating()){module.set.stageSize();module.stage.behind();module.animate(module.get.transform.over())}else{module.queue("flip over")}},back:function(){module.debug("Flipping back",$nextSide);if(!module.is.animating()){module.set.stageSize();module.stage.behind();module.animate(module.get.transform.back())}else{module.queue("flip back")}}},get:{transform:{up:function(){var translate={y:-(($activeSide.outerHeight()-$nextSide.outerHeight())/2),z:-($activeSide.outerHeight()/2)};return{transform:"translateY("+translate.y+"px) translateZ("+translate.z+"px) rotateX(-90deg)"}},down:function(){var translate={y:-(($activeSide.outerHeight()-$nextSide.outerHeight())/2),z:-($activeSide.outerHeight()/2)};return{transform:"translateY("+translate.y+"px) translateZ("+translate.z+"px) rotateX(90deg)"}},left:function(){var translate={x:-(($activeSide.outerWidth()-$nextSide.outerWidth())/2),z:-($activeSide.outerWidth()/2)};return{transform:"translateX("+translate.x+"px) translateZ("+translate.z+"px) rotateY(90deg)"}},right:function(){var translate={x:-(($activeSide.outerWidth()-$nextSide.outerWidth())/2),z:-($activeSide.outerWidth()/2)};return{transform:"translateX("+translate.x+"px) translateZ("+translate.z+"px) rotateY(-90deg)"}},over:function(){var translate={x:-(($activeSide.outerWidth()-$nextSide.outerWidth())/2)};return{transform:"translateX("+translate.x+"px) rotateY(180deg)"}},back:function(){var translate={x:-(($activeSide.outerWidth()-$nextSide.outerWidth())/2)};return{transform:"translateX("+translate.x+"px) rotateY(-180deg)"}}},transitionEvent:function(){var element=document.createElement("element"),transitions={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},transition;for(transition in transitions){if(element.style[transition]!==undefined){return transitions[transition]}}},nextSide:function(){return $activeSide.next(selector.side).size()>0?$activeSide.next(selector.side):$module.find(selector.side).first()}},stage:{above:function(){var box={origin:($activeSide.outerHeight()-$nextSide.outerHeight())/2,depth:{active:$nextSide.outerHeight()/2,next:$activeSide.outerHeight()/2}};module.verbose("Setting the initial animation position as above",$nextSide,box);$activeSide.css({transform:"rotateY(0deg) translateZ("+box.depth.active+"px)"});$nextSide.addClass(className.animating).css({display:"block",top:box.origin+"px",transform:"rotateX(90deg) translateZ("+box.depth.next+"px)"})},below:function(){var box={origin:($activeSide.outerHeight()-$nextSide.outerHeight())/2,depth:{active:$nextSide.outerHeight()/2,next:$activeSide.outerHeight()/2}};module.verbose("Setting the initial animation position as below",$nextSide,box);$activeSide.css({transform:"rotateY(0deg) translateZ("+box.depth.active+"px)"});$nextSide.addClass(className.animating).css({display:"block",top:box.origin+"px",transform:"rotateX(-90deg) translateZ("+box.depth.next+"px)"})},left:function(){var box={origin:($activeSide.outerWidth()-$nextSide.outerWidth())/2,depth:{active:$nextSide.outerWidth()/2,next:$activeSide.outerWidth()/2}};module.verbose("Setting the initial animation position as left",$nextSide,box);$activeSide.css({transform:"rotateY(0deg) translateZ("+box.depth.active+"px)"});$nextSide.addClass(className.animating).css({display:"block",left:box.origin+"px",transform:"rotateY(-90deg) translateZ("+box.depth.next+"px)"})},right:function(){var box={origin:($activeSide.outerWidth()-$nextSide.outerWidth())/2,depth:{active:$nextSide.outerWidth()/2,next:$activeSide.outerWidth()/2}};module.verbose("Setting the initial animation position as left",$nextSide,box);$activeSide.css({transform:"rotateY(0deg) translateZ("+box.depth.active+"px)"});$nextSide.addClass(className.animating).css({display:"block",left:box.origin+"px",transform:"rotateY(90deg) translateZ("+box.depth.next+"px)"})},behind:function(){var box={origin:($activeSide.outerWidth()-$nextSide.outerWidth())/2,depth:{active:$nextSide.outerWidth()/2,next:$activeSide.outerWidth()/2}};module.verbose("Setting the initial animation position as behind",$nextSide,box);$activeSide.css({transform:"rotateY(0deg)"});$nextSide.addClass(className.animating).css({display:"block",left:box.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(name,value){if($.isPlainObject(name)){$.extend(true,settings,name)}else if(value!==undefined){settings[name]=value}else{return settings[name]}},internal:function(name,value){if($.isPlainObject(name)){$.extend(true,module,name)}else if(value!==undefined){module[name]=value}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if($allModules.size()>1){title+=" "+"("+$allModules.size()+")"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found}};if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}});return returnedValue!==undefined?returnedValue:this};$.fn.shape.settings={name:"Shape",debug:true,verbose:true,performance:true,namespace:"shape",beforeChange:function(){},onChange:function(){},duration:700,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}})(jQuery,window,document);(function($,window,document,undefined){$.fn.sidebar=function(parameters){var $allModules=$(this),$body=$("body"),$head=$("head"),moduleSelector=$allModules.selector||"",time=(new Date).getTime(),performance=[],query=arguments[0],methodInvoked=typeof query=="string",queryArguments=[].slice.call(arguments,1),returnedValue;$allModules.each(function(){var settings=$.isPlainObject(parameters)?$.extend(true,{},$.fn.sidebar.settings,parameters):$.extend({},$.fn.sidebar.settings),selector=settings.selector,className=settings.className,namespace=settings.namespace,error=settings.error,eventNamespace="."+namespace,moduleNamespace="module-"+namespace,$module=$(this),$style=$("style[title="+namespace+"]"),element=this,instance=$module.data(moduleNamespace),module;module={initialize:function(){module.debug("Initializing sidebar",$module);module.instantiate()},instantiate:function(){module.verbose("Storing instance of module",module);instance=module;$module.data(moduleNamespace,module)},destroy:function(){module.verbose("Destroying previous module for",$module);$module.off(eventNamespace).removeData(moduleNamespace)},refresh:function(){module.verbose("Refreshing selector cache");$style=$("style[title="+namespace+"]")},attachEvents:function(selector,event){var $toggle=$(selector);event=$.isFunction(module[event])?module[event]:module.toggle;if($toggle.size()>0){module.debug("Attaching sidebar events to element",selector,event);$toggle.off(eventNamespace).on("click"+eventNamespace,event)}else{module.error(error.notFound)}},show:function(callback){callback=$.isFunction(callback)?callback:function(){};module.debug("Showing sidebar",callback);if(module.is.closed()){if(!settings.overlay){if(settings.exclusive){module.hideAll()}module.pushPage()}module.set.active();callback();$.proxy(settings.onChange,element)();$.proxy(settings.onShow,element)()}else{module.debug("Sidebar is already visible")}},hide:function(callback){callback=$.isFunction(callback)?callback:function(){};module.debug("Hiding sidebar",callback);if(module.is.open()){if(!settings.overlay){module.pullPage();module.remove.pushed()}module.remove.active();callback();$.proxy(settings.onChange,element)();$.proxy(settings.onHide,element)()}},hideAll:function(){$(selector.sidebar).filter(":visible").sidebar("hide")},toggle:function(){if(module.is.closed()){module.show()}else{module.hide()}},pushPage:function(){var direction=module.get.direction(),distance=module.is.vertical()?$module.outerHeight():$module.outerWidth();if(settings.useCSS){module.debug("Using CSS to animate body");module.add.bodyCSS(direction,distance);module.set.pushed()}else{module.animatePage(direction,distance,module.set.pushed)}},pullPage:function(){var direction=module.get.direction();if(settings.useCSS){module.debug("Resetting body position css");module.remove.bodyCSS()}else{module.debug("Resetting body position using javascript");module.animatePage(direction,0)}module.remove.pushed()},animatePage:function(direction,distance){var animateSettings={};animateSettings["padding-"+direction]=distance;module.debug("Using javascript to animate body",animateSettings);$body.animate(animateSettings,settings.duration,module.set.pushed)},add:{bodyCSS:function(direction,distance){var style;if(direction!==className.bottom){style=""+'<style title="'+namespace+'">'+"body.pushed {"+"  margin-"+direction+": "+distance+"px !important;"+"}"+"</style>"}$head.append(style);module.debug("Adding body css to head",$style)}},remove:{bodyCSS:function(){module.debug("Removing body css styles",$style);module.refresh();$style.remove()},active:function(){$module.removeClass(className.active)},pushed:function(){module.verbose("Removing body push state",module.get.direction());$body.removeClass(className[module.get.direction()]).removeClass(className.pushed)}},set:{active:function(){$module.addClass(className.active)},pushed:function(){module.verbose("Adding body push state",module.get.direction());$body.addClass(className[module.get.direction()]).addClass(className.pushed)}},get:{direction:function(){if($module.hasClass(className.top)){return className.top}else if($module.hasClass(className.right)){return className.right}else if($module.hasClass(className.bottom)){return className.bottom}else{return className.left}},transitionEvent:function(){var element=document.createElement("element"),transitions={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},transition;for(transition in transitions){if(element.style[transition]!==undefined){return transitions[transition]}}}},is:{open:function(){return $module.is(":animated")||$module.hasClass(className.active)},closed:function(){return!module.is.open()},vertical:function(){return $module.hasClass(className.top)}},setting:function(name,value){if($.isPlainObject(name)){$.extend(true,settings,name)}else if(value!==undefined){settings[name]=value}else{return settings[name]}},internal:function(name,value){if($.isPlainObject(name)){$.extend(true,module,name)}else if(value!==undefined){module[name]=value}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if($allModules.size()>1){title+=" "+"("+$allModules.size()+")"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found}};if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}});return returnedValue!==undefined?returnedValue:this};$.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",verbose:true,debug:true,performance:true,useCSS:true,exclusive:true,overlay:false,duration:300,onChange:function(){},onShow:function(){},onHide:function(){},className:{active:"active",pushed:"pushed",top:"top",left:"left",right:"right",bottom:"bottom"},selector:{sidebar:".ui.sidebar"},error:{method:"The method you called is not defined.",notFound:"There were no elements that matched the specified selector"}}})(jQuery,window,document);(function($,window,document,undefined){$.fn.tab=function(parameters){var settings=$.extend(true,{},$.fn.tab.settings,parameters),$module=$(this),$tabs=$(settings.context).find(settings.selector.tabs),moduleSelector=$module.selector||"",cache={},firstLoad=true,recursionDepth=0,activeTabPath,parameterArray,historyEvent,element=this,time=(new Date).getTime(),performance=[],className=settings.className,metadata=settings.metadata,error=settings.error,eventNamespace="."+settings.namespace,moduleNamespace="module-"+settings.namespace,instance=$module.data(moduleNamespace),query=arguments[0],methodInvoked=instance!==undefined&&typeof query=="string",queryArguments=[].slice.call(arguments,1),module,returnedValue;module={initialize:function(){module.debug("Initializing Tabs",$module);if(settings.auto){module.verbose("Setting up automatic tab retrieval from server");settings.apiSettings={url:settings.path+"/{$tab}"}}if(settings.history){module.debug("Initializing page state");if($.address===undefined){module.error(error.state);return false}else{if(settings.historyType=="hash"){module.debug("Using hash state change to manage state")}if(settings.historyType=="html5"){module.debug("Using HTML5 to manage state");if(settings.path!==false){$.address.history(true).state(settings.path)}else{module.error(error.path);return false}}$.address.unbind("change").bind("change",module.event.history.change)}}if(!$.isWindow(element)){module.debug("Attaching tab activation events to element",$module);$module.on("click"+eventNamespace,module.event.click)}module.instantiate()},instantiate:function(){module.verbose("Storing instance of module",module);$module.data(moduleNamespace,module)},destroy:function(){module.debug("Destroying tabs",$module);$module.removeData(moduleNamespace).off(eventNamespace)},event:{click:function(event){var tabPath=$(this).data(metadata.tab);if(tabPath!==undefined){if(settings.history){module.verbose("Updating page state",event);$.address.value(tabPath)}else{module.verbose("Changing tab without state management",event);module.changeTab(tabPath)}event.preventDefault()}else{module.debug("No tab specified")}},history:{change:function(event){var tabPath=event.pathNames.join("/")||module.get.initialPath(),pageTitle=settings.templates.determineTitle(tabPath)||false;module.debug("History change event",tabPath,event);historyEvent=event;if(tabPath!==undefined){module.changeTab(tabPath)}if(pageTitle){$.address.title(pageTitle)}}}},refresh:function(){if(activeTabPath){module.debug("Refreshing tab",activeTabPath);module.changeTab(activeTabPath)}},cache:{read:function(cacheKey){return cacheKey!==undefined?cache[cacheKey]:false},add:function(cacheKey,content){cacheKey=cacheKey||activeTabPath;module.debug("Adding cached content for",cacheKey);cache[cacheKey]=content},remove:function(cacheKey){cacheKey=cacheKey||activeTabPath;module.debug("Removing cached content for",cacheKey);delete cache[cacheKey]}},set:{state:function(url){$.address.value(url)}},changeTab:function(tabPath){var pushStateAvailable=window.history&&window.history.pushState,shouldIgnoreLoad=pushStateAvailable&&settings.ignoreFirstLoad&&firstLoad,remoteContent=settings.auto||$.isPlainObject(settings.apiSettings),pathArray=remoteContent&&!shouldIgnoreLoad?module.utilities.pathToArray(tabPath):module.get.defaultPathArray(tabPath);tabPath=module.utilities.arrayToPath(pathArray);module.deactivate.all();$.each(pathArray,function(index,tab){var currentPathArray=pathArray.slice(0,index+1),currentPath=module.utilities.arrayToPath(currentPathArray),isTab=module.is.tab(currentPath),isLastIndex=index+1==pathArray.length,$tab=module.get.tabElement(currentPath),nextPathArray,nextPath,isLastTab;
module.verbose("Looking for tab",tab);if(isTab){module.verbose("Tab was found",tab);activeTabPath=currentPath;parameterArray=module.utilities.filterArray(pathArray,currentPathArray);if(isLastIndex){isLastTab=true}else{nextPathArray=pathArray.slice(0,index+2);nextPath=module.utilities.arrayToPath(nextPathArray);isLastTab=!module.is.tab(nextPath);if(isLastTab){module.verbose("Tab parameters found",nextPathArray)}}if(isLastTab&&remoteContent){if(!shouldIgnoreLoad){module.activate.navigation(currentPath);module.content.fetch(currentPath,tabPath)}else{module.debug("Ignoring remote content on first tab load",currentPath);firstLoad=false;module.cache.add(tabPath,$tab.html());module.activate.all(currentPath);$.proxy(settings.onTabInit,$tab)(currentPath,parameterArray,historyEvent);$.proxy(settings.onTabLoad,$tab)(currentPath,parameterArray,historyEvent)}return false}else{module.debug("Opened local tab",currentPath);module.activate.all(currentPath);if(!module.cache.read(currentPath)){module.cache.add(currentPath,true);module.debug("First time tab loaded calling tab init");$.proxy(settings.onTabInit,$tab)(currentPath,parameterArray,historyEvent)}$.proxy(settings.onTabLoad,$tab)(currentPath,parameterArray,historyEvent)}}else{module.error(error.missingTab,tab);return false}})},content:{fetch:function(tabPath,fullTabPath){var $tab=module.get.tabElement(tabPath),apiSettings={dataType:"html",stateContext:$tab,success:function(response){module.cache.add(fullTabPath,response);module.content.update(tabPath,response);if(tabPath==activeTabPath){module.debug("Content loaded",tabPath);module.activate.tab(tabPath)}else{module.debug("Content loaded in background",tabPath)}$.proxy(settings.onTabInit,$tab)(tabPath,parameterArray,historyEvent);$.proxy(settings.onTabLoad,$tab)(tabPath,parameterArray,historyEvent)},urlData:{tab:fullTabPath}},request=$tab.data(metadata.promise)||false,existingRequest=request&&request.state()==="pending",requestSettings,cachedContent;fullTabPath=fullTabPath||tabPath;cachedContent=module.cache.read(fullTabPath);if(settings.cache&&cachedContent){module.debug("Showing existing content",fullTabPath);module.content.update(tabPath,cachedContent);module.activate.tab(tabPath);$.proxy(settings.onTabLoad,$tab)(tabPath,parameterArray,historyEvent)}else if(existingRequest){module.debug("Content is already loading",fullTabPath);$tab.addClass(className.loading)}else if($.api!==undefined){console.log(settings.apiSettings);requestSettings=$.extend(true,{headers:{"X-Remote":true}},settings.apiSettings,apiSettings);module.debug("Retrieving remote content",fullTabPath,requestSettings);$.api(requestSettings)}else{module.error(error.api)}},update:function(tabPath,html){module.debug("Updating html for",tabPath);var $tab=module.get.tabElement(tabPath);$tab.html(html)}},activate:{all:function(tabPath){module.activate.tab(tabPath);module.activate.navigation(tabPath)},tab:function(tabPath){var $tab=module.get.tabElement(tabPath);module.verbose("Showing tab content for",$tab);$tab.addClass(className.active)},navigation:function(tabPath){var $navigation=module.get.navElement(tabPath);module.verbose("Activating tab navigation for",$navigation,tabPath);$navigation.addClass(className.active)}},deactivate:{all:function(){module.deactivate.navigation();module.deactivate.tabs()},navigation:function(){$module.removeClass(className.active)},tabs:function(){$tabs.removeClass(className.active+" "+className.loading)}},is:{tab:function(tabName){return tabName!==undefined?module.get.tabElement(tabName).size()>0:false}},get:{initialPath:function(){return $module.eq(0).data(metadata.tab)||$tabs.eq(0).data(metadata.tab)},path:function(){return $.address.value()},defaultPathArray:function(tabPath){return module.utilities.pathToArray(module.get.defaultPath(tabPath))},defaultPath:function(tabPath){var $defaultNav=$module.filter("[data-"+metadata.tab+'^="'+tabPath+'/"]').eq(0),defaultTab=$defaultNav.data(metadata.tab)||false;if(defaultTab){module.debug("Found default tab",defaultTab);if(recursionDepth<settings.maxDepth){recursionDepth++;return module.get.defaultPath(defaultTab)}module.error(error.recursion)}else{module.debug("No default tabs found for",tabPath,$tabs)}recursionDepth=0;return tabPath},navElement:function(tabPath){tabPath=tabPath||activeTabPath;return $module.filter("[data-"+metadata.tab+'="'+tabPath+'"]')},tabElement:function(tabPath){var $fullPathTab,$simplePathTab,tabPathArray,lastTab;tabPath=tabPath||activeTabPath;tabPathArray=module.utilities.pathToArray(tabPath);lastTab=module.utilities.last(tabPathArray);$fullPathTab=$tabs.filter("[data-"+metadata.tab+'="'+lastTab+'"]');$simplePathTab=$tabs.filter("[data-"+metadata.tab+'="'+tabPath+'"]');return $fullPathTab.size()>0?$fullPathTab:$simplePathTab},tab:function(){return activeTabPath}},utilities:{filterArray:function(keepArray,removeArray){return $.grep(keepArray,function(keepValue){return $.inArray(keepValue,removeArray)==-1})},last:function(array){return $.isArray(array)?array[array.length-1]:false},pathToArray:function(pathName){if(pathName===undefined){pathName=activeTabPath}return typeof pathName=="string"?pathName.split("/"):[pathName]},arrayToPath:function(pathArray){return $.isArray(pathArray)?pathArray.join("/"):false}},setting:function(name,value){if($.isPlainObject(name)){$.extend(true,settings,name)}else if(value!==undefined){settings[name]=value}else{return settings[name]}},internal:function(name,value){if($.isPlainObject(name)){$.extend(true,module,name)}else if(value!==undefined){module[name]=value}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found}};if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}return returnedValue!==undefined?returnedValue:this};$.tab=function(settings){$(window).tab(settings)};$.fn.tab.settings={name:"Tab",verbose:true,debug:true,performance:true,namespace:"tab",onTabInit:function(tabPath,parameterArray,historyEvent){},onTabLoad:function(tabPath,parameterArray,historyEvent){},templates:{determineTitle:function(tabArray){}},auto:false,history:true,historyType:"hash",path:false,context:"body",maxDepth:25,ignoreFirstLoad:false,alwaysRefresh:false,cache:true,apiSettings:false,error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Tab cannot be found",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",state:"The state library has not been initialized"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab"}}})(jQuery,window,document);(function($,window,document,undefined){$.fn.transition=function(){var $allModules=$(this),moduleSelector=$allModules.selector||"",time=(new Date).getTime(),performance=[],moduleArguments=arguments,query=moduleArguments[0],queryArguments=[].slice.call(arguments,1),methodInvoked=typeof query==="string",requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,0)},returnedValue;$allModules.each(function(){var $module=$(this),element=this,settings,instance,error,className,metadata,animationEnd,animationName,namespace,moduleNamespace,module;module={initialize:function(){settings=module.get.settings.apply(element,moduleArguments);module.verbose("Converted arguments into settings object",settings);error=settings.error;className=settings.className;namespace=settings.namespace;metadata=settings.metadata;moduleNamespace="module-"+namespace;animationEnd=module.get.animationEvent();animationName=module.get.animationName();instance=$module.data(moduleNamespace)||module;if(methodInvoked){methodInvoked=module.invoke(query)}if(methodInvoked===false){module.animate()}module.instantiate()},instantiate:function(){module.verbose("Storing instance of module",module);$module.data(moduleNamespace,instance)},destroy:function(){module.verbose("Destroying previous module for",element);$module.removeData(moduleNamespace)},refresh:function(){module.verbose("Refreshing display type on next animation");delete instance.displayType},forceRepaint:function(){module.verbose("Forcing element repaint");var $parentElement=$module.parent(),$nextElement=$module.next();if($nextElement.size()===0){$module.detach().appendTo($parentElement)}else{$module.detach().insertBefore($nextElement)}},repaint:function(){module.verbose("Repainting element");var fakeAssignment=element.offsetWidth},animate:function(overrideSettings){settings=overrideSettings||settings;if(!module.is.supported()){module.error(error.support);return false}module.debug("Preparing animation",settings.animation);if(module.is.animating()&&settings.queue){if(!settings.allowRepeats&&module.has.direction()&&module.is.occuring()&&instance.queuing!==true){module.error(error.repeated)}else{module.queue(settings.animation)}return false}if(module.can.animate){module.set.animating(settings.animation)}else{module.error(error.noAnimation,settings.animation)}},reset:function(){module.debug("Resetting animation to beginning conditions");$module.off(animationEnd);module.restore.conditions();module.hide();module.remove.animating()},queue:function(animation){module.debug("Queueing animation of",animation);instance.queuing=true;$module.one(animationEnd,function(){instance.queuing=false;module.repaint();module.animate.apply(this,settings)})},complete:function(){module.verbose("CSS animation complete",settings.animation);if(!module.is.looping()){if(module.is.outward()){module.verbose("Animation is outward, hiding element");module.restore.conditions();module.remove.display();module.hide();$.proxy(settings.onHide,this)()}else if(module.is.inward()){module.verbose("Animation is outward, showing element");module.restore.conditions();module.show();$.proxy(settings.onShow,this)()}else{module.restore.conditions()}module.remove.duration();module.remove.animating()}$.proxy(settings.complete,this)()},has:{direction:function(animation){animation=animation||settings.animation;if(animation.search(className.inward)!==-1||animation.search(className.outward)!==-1){module.debug("Direction already set in animation");return true}return false}},set:{animating:function(animation){animation=animation||settings.animation;module.save.conditions();if(module.can.transition()&&!module.has.direction()){module.set.direction()}module.remove.hidden();module.set.display();$module.addClass(className.animating).addClass(className.transition).addClass(animation).one(animationEnd,module.complete);module.set.duration(settings.duration);module.debug("Starting tween",settings.animation,$module.attr("class"))},display:function(){var displayType=module.get.displayType();if(displayType!=="block"){module.verbose("Setting final visibility to",displayType);$module.css({display:displayType})}},direction:function(){if($module.is(":visible")){module.debug("Automatically determining the direction of animation","Outward");$module.removeClass(className.inward).addClass(className.outward)}else{module.debug("Automatically determining the direction of animation","Inward");$module.removeClass(className.outward).addClass(className.inward)}},looping:function(){module.debug("Transition set to loop");$module.addClass(className.looping)},duration:function(duration){duration=duration||settings.duration;duration=typeof duration=="number"?duration+"ms":duration;module.verbose("Setting animation duration",duration);$module.css({"-webkit-animation-duration":duration,"-moz-animation-duration":duration,"-ms-animation-duration":duration,"-o-animation-duration":duration,"animation-duration":duration})},hidden:function(){$module.addClass(className.transition).addClass(className.hidden)},visible:function(){$module.addClass(className.transition).addClass(className.visible)}},save:{displayType:function(displayType){instance.displayType=displayType},transitionExists:function(animation,exists){$.fn.transition.exists[animation]=exists;module.verbose("Saving existence of transition",animation,exists)},conditions:function(){instance.cache={className:$module.attr("class"),style:$module.attr("style")};module.verbose("Saving original attributes",instance.cache)}},restore:{conditions:function(){if(instance.cache===undefined){return false}if(instance.cache.className){$module.attr("class",instance.cache.className)}else{$module.removeAttr("class")}if(instance.cache.style){$module.attr("style",instance.cache.style)}else{if(module.get.displayType()==="block"){$module.removeAttr("style")}}if(module.is.looping()){module.remove.looping()}module.verbose("Restoring original attributes",instance.cache)}},remove:{animating:function(){$module.removeClass(className.animating)},display:function(){if(instance.displayType!==undefined){$module.css("display","")}},duration:function(){$module.css({"-webkit-animation-duration":"","-moz-animation-duration":"","-ms-animation-duration":"","-o-animation-duration":"","animation-duration":""})},hidden:function(){$module.removeClass(className.hidden)},visible:function(){$module.removeClass(className.visible)},looping:function(){module.debug("Transitions are no longer looping");$module.removeClass(className.looping);module.forceRepaint()}},get:{settings:function(animation,duration,complete){if(typeof animation=="object"){return $.extend(true,{},$.fn.transition.settings,animation)}else if(typeof complete=="function"){return $.extend({},$.fn.transition.settings,{animation:animation,complete:complete,duration:duration})}else if(typeof duration=="string"||typeof duration=="number"){return $.extend({},$.fn.transition.settings,{animation:animation,duration:duration})}else if(typeof duration=="object"){return $.extend({},$.fn.transition.settings,duration,{animation:animation})}else if(typeof duration=="function"){return $.extend({},$.fn.transition.settings,{animation:animation,complete:duration})}else{return $.extend({},$.fn.transition.settings,{animation:animation})}return $.fn.transition.settings},displayType:function(){if(instance.displayType===undefined){module.can.transition()}return instance.displayType},transitionExists:function(animation){return $.fn.transition.exists[animation]},animationName:function(){var element=document.createElement("div"),animations={animation:"animationName",OAnimation:"oAnimationName",MozAnimation:"mozAnimationName",WebkitAnimation:"webkitAnimationName"},animation;for(animation in animations){if(element.style[animation]!==undefined){module.verbose("Determined animation vendor name property",animations[animation]);return animations[animation]}}return false},animationEvent:function(){var element=document.createElement("div"),animations={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"},animation;for(animation in animations){if(element.style[animation]!==undefined){module.verbose("Determined animation vendor end event",animations[animation]);return animations[animation]}}return false}},can:{animate:function(){if($module.css(settings.animation)!=="none"){module.debug("CSS definition found",$module.css(settings.animation));return true}else{module.debug("Unable to find css definition",$module.attr("class"));return false}},transition:function(){var elementClass=$module.attr("class"),animation=settings.animation,transitionExists=module.get.transitionExists(settings.animation),$clone,currentAnimation,inAnimation,displayType;if(transitionExists===undefined||instance.displayType===undefined){module.verbose("Determining whether animation exists");$clone=$("<div>").addClass(elementClass).appendTo($("body"));currentAnimation=$clone.removeClass(className.inward).removeClass(className.outward).addClass(className.animating).addClass(className.transition).addClass(animation).css(animationName);inAnimation=$clone.addClass(className.inward).css(animationName);displayType=$clone.attr("class",elementClass).show().css("display");module.verbose("Determining final display state",displayType);if(currentAnimation!=inAnimation){module.debug("Transition exists for animation",animation);transitionExists=true}else{module.debug("Static animation found",animation,displayType);transitionExists=false}$clone.remove();module.save.displayType(displayType);module.save.transitionExists(animation,transitionExists)}return transitionExists}},is:{animating:function(){return $module.hasClass(className.animating)},inward:function(){return $module.hasClass(className.inward)},outward:function(){return $module.hasClass(className.outward)},looping:function(){return $module.hasClass(className.looping)},occuring:function(animation){animation=animation||settings.animation;return $module.hasClass(animation)},visible:function(){return $module.is(":visible")},supported:function(){return animationName!==false&&animationEnd!==false}},hide:function(){module.verbose("Hiding element");module.remove.visible();module.set.hidden();module.repaint()},show:function(display){module.verbose("Showing element",display);module.remove.hidden();module.set.visible();module.repaint()},start:function(){module.verbose("Starting animation");$module.removeClass(className.disabled)},stop:function(){module.debug("Stopping animation");$module.addClass(className.disabled)},toggle:function(){module.debug("Toggling play status");$module.toggleClass(className.disabled)},setting:function(name,value){if($.isPlainObject(name)){$.extend(true,settings,name)}else if(value!==undefined){settings[name]=value}else{return settings[name]}},internal:function(name,value){if($.isPlainObject(name)){$.extend(true,module,name)}else if(value!==undefined){module[name]=value}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if($allModules.size()>1){title+=" "+"("+$allModules.size()+")"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found||false}};module.initialize()});return returnedValue!==undefined?returnedValue:this};$.fn.transition.exists={};$.fn.transition.settings={name:"Transition",debug:false,verbose:true,performance:true,namespace:"transition",complete:function(){},onShow:function(){},onHide:function(){},allowRepeats:false,animation:"fade",duration:"700ms",queue:true,className:{animating:"animating",disabled:"disabled",hidden:"hidden",inward:"in",loading:"loading",looping:"looping",outward:"out",transition:"ui transition",visible:"visible"},error:{noAnimation:"There is no css animation matching the one you specified.",repeated:"That animation is already occurring, cancelling repeated animation",method:"The method you called is not defined",support:"This browser does not support CSS animations"}}})(jQuery,window,document);(function($,window,document,undefined){$.fn.video=function(parameters){var $allModules=$(this),moduleSelector=$allModules.selector||"",time=(new Date).getTime(),performance=[],query=arguments[0],methodInvoked=typeof query=="string",queryArguments=[].slice.call(arguments,1),returnedValue;$allModules.each(function(){var settings=$.isPlainObject(parameters)?$.extend(true,{},$.fn.video.settings,parameters):$.extend({},$.fn.video.settings),selector=settings.selector,className=settings.className,error=settings.error,metadata=settings.metadata,namespace=settings.namespace,eventNamespace="."+namespace,moduleNamespace="module-"+namespace,$module=$(this),$placeholder=$module.find(selector.placeholder),$playButton=$module.find(selector.playButton),$embed=$module.find(selector.embed),element=this,instance=$module.data(moduleNamespace),module;module={initialize:function(){module.debug("Initializing video");$placeholder.on("click"+eventNamespace,module.play);$playButton.on("click"+eventNamespace,module.play);module.instantiate()},instantiate:function(){module.verbose("Storing instance of module",module);instance=module;$module.data(moduleNamespace,module)},destroy:function(){module.verbose("Destroying previous instance of video");$module.removeData(moduleNamespace).off(eventNamespace);$placeholder.off(eventNamespace);$playButton.off(eventNamespace)},change:function(source,id,url){module.debug("Changing video to ",source,id,url);$module.data(metadata.source,source).data(metadata.id,id).data(metadata.url,url);settings.onChange()},reset:function(){module.debug("Clearing video embed and showing placeholder");$module.removeClass(className.active);$embed.html(" ");$placeholder.show();settings.onReset()},play:function(){module.debug("Playing video");var source=$module.data(metadata.source)||false,url=$module.data(metadata.url)||false,id=$module.data(metadata.id)||false;$embed.html(module.generate.html(source,id,url));$module.addClass(className.active);settings.onPlay()},generate:{html:function(source,id,url){module.debug("Generating embed html");var width=settings.width=="auto"?$module.width():settings.width,height=settings.height=="auto"?$module.height():settings.height,html;if(source&&id){if(source=="vimeo"){html=""+'<iframe src="http://player.vimeo.com/video/'+id+"?="+module.generate.url(source)+'"'+' width="'+width+'" height="'+height+'"'+' frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'}else if(source=="youtube"){html=""+'<iframe src="http://www.youtube.com/embed/'+id+"?="+module.generate.url(source)+'"'+' width="'+width+'" height="'+height+'"'+' frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'}}else if(url){html=""+'<iframe src="'+url+'"'+' width="'+width+'" height="'+height+'"'+' frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'}else{module.error(error.noVideo)}return html},url:function(source){var api=settings.api?1:0,autoplay=settings.autoplay?1:0,hd=settings.hd?1:0,showUI=settings.showUI?1:0,hideUI=!settings.showUI?1:0,url="";if(source=="vimeo"){url=""+"api="+api+"&amp;title="+showUI+"&amp;byline="+showUI+"&amp;portrait="+showUI+"&amp;autoplay="+autoplay;if(settings.color){url+="&amp;color="+settings.color}}if(source=="ustream"){url=""+"autoplay="+autoplay;if(settings.color){url+="&amp;color="+settings.color}}else if(source=="youtube"){url=""+"enablejsapi="+api+"&amp;autoplay="+autoplay+"&amp;autohide="+hideUI+"&amp;hq="+hd+"&amp;modestbranding=1";if(settings.color){url+="&amp;color="+settings.color}}return url}},setting:function(name,value){if($.isPlainObject(name)){$.extend(true,settings,name)}else if(value!==undefined){settings[name]=value}else{return settings[name]}},internal:function(name,value){if($.isPlainObject(name)){$.extend(true,module,name)}else if(value!==undefined){module[name]=value}else{return module[name]}},debug:function(){if(settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.debug=Function.prototype.bind.call(console.info,console,settings.name+":");module.debug.apply(console,arguments)}}},verbose:function(){if(settings.verbose&&settings.debug){if(settings.performance){module.performance.log(arguments)}else{module.verbose=Function.prototype.bind.call(console.info,console,settings.name+":");module.verbose.apply(console,arguments)}}},error:function(){module.error=Function.prototype.bind.call(console.error,console,settings.name+":");module.error.apply(console,arguments)},performance:{log:function(message){var currentTime,executionTime,previousTime;if(settings.performance){currentTime=(new Date).getTime();previousTime=time||currentTime;executionTime=currentTime-previousTime;time=currentTime;performance.push({Element:element,Name:message[0],Arguments:[].slice.call(message,1)||"","Execution Time":executionTime})}clearTimeout(module.performance.timer);module.performance.timer=setTimeout(module.performance.display,100)},display:function(){var title=settings.name+":",totalTime=0;time=false;clearTimeout(module.performance.timer);$.each(performance,function(index,data){totalTime+=data["Execution Time"]});title+=" "+totalTime+"ms";if(moduleSelector){title+=" '"+moduleSelector+"'"}if($allModules.size()>1){title+=" "+"("+$allModules.size()+")"}if((console.group!==undefined||console.table!==undefined)&&performance.length>0){console.groupCollapsed(title);if(console.table){console.table(performance)}else{$.each(performance,function(index,data){console.log(data["Name"]+": "+data["Execution Time"]+"ms")})}console.groupEnd()}performance=[]}},invoke:function(query,passedArguments,context){var object=instance,maxDepth,found,response;passedArguments=passedArguments||queryArguments;context=element||context;if(typeof query=="string"&&object!==undefined){query=query.split(/[\. ]/);maxDepth=query.length-1;$.each(query,function(depth,value){var camelCaseValue=depth!=maxDepth?value+query[depth+1].charAt(0).toUpperCase()+query[depth+1].slice(1):query;if($.isPlainObject(object[camelCaseValue])&&depth!=maxDepth){object=object[camelCaseValue]}else if(object[camelCaseValue]!==undefined){found=object[camelCaseValue];return false}else if($.isPlainObject(object[value])&&depth!=maxDepth){object=object[value]}else if(object[value]!==undefined){found=object[value];return false}else{return false}})}if($.isFunction(found)){response=found.apply(context,passedArguments)}else if(found!==undefined){response=found}if($.isArray(returnedValue)){returnedValue.push(response)}else if(returnedValue!==undefined){returnedValue=[returnedValue,response]}else if(response!==undefined){returnedValue=response}return found}};if(methodInvoked){if(instance===undefined){module.initialize()}module.invoke(query)}else{if(instance!==undefined){module.destroy()}module.initialize()}});return returnedValue!==undefined?returnedValue:this};$.fn.video.settings={name:"Video",namespace:"video",debug:true,verbose:true,performance:true,metadata:{source:"source",id:"id",url:"url"},onPlay:function(){},onReset:function(){},onChange:function(){},onPause:function(){},onStop:function(){},width:"auto",height:"auto",autoplay:false,color:"#442359",hd:true,showUI:false,api:true,error:{noVideo:"No video specified",method:"The method you called is not defined"},className:{active:"active"},selector:{embed:".embed",placeholder:".placeholder",playButton:".play"}}})(jQuery,window,document);